var Pb=Object.defineProperty;var Rm=e=>{throw TypeError(e)};var Eb=(e,t,n)=>t in e?Pb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>Eb(e,typeof t!="symbol"?t+"":t,n),Wp=(e,t,n)=>t.has(e)||Rm("Cannot "+n);var x=(e,t,n)=>(Wp(e,t,"read from private field"),n?n.call(e):t.get(e)),me=(e,t,n)=>t.has(e)?Rm("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ae=(e,t,n,r)=>(Wp(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ct=(e,t,n)=>(Wp(e,t,"access private method"),n);var ml=(e,t,n,r)=>({set _(i){ae(e,t,i,n)},get _(){return x(e,t,r)}});function Tb(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dR(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ab(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var pR={exports:{}},Hu={},hR={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),bb=Symbol.for("react.portal"),Ib=Symbol.for("react.fragment"),_b=Symbol.for("react.strict_mode"),kb=Symbol.for("react.profiler"),xb=Symbol.for("react.provider"),Ob=Symbol.for("react.context"),Mb=Symbol.for("react.forward_ref"),Db=Symbol.for("react.suspense"),Nb=Symbol.for("react.memo"),zb=Symbol.for("react.lazy"),Pm=Symbol.iterator;function jb(e){return e===null||typeof e!="object"?null:(e=Pm&&e[Pm]||e["@@iterator"],typeof e=="function"?e:null)}var fR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vR=Object.assign,gR={};function Vo(e,t,n){this.props=e,this.context=t,this.refs=gR,this.updater=n||fR}Vo.prototype.isReactComponent={};Vo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mR(){}mR.prototype=Vo.prototype;function Ev(e,t,n){this.props=e,this.context=t,this.refs=gR,this.updater=n||fR}var Tv=Ev.prototype=new mR;Tv.constructor=Ev;vR(Tv,Vo.prototype);Tv.isPureReactComponent=!0;var Em=Array.isArray,yR=Object.prototype.hasOwnProperty,Av={current:null},SR={key:!0,ref:!0,__self:!0,__source:!0};function CR(e,t,n){var r,i={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)yR.call(t,r)&&!SR.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Wc,type:e,key:o,ref:a,props:i,_owner:Av.current}}function Lb(e,t){return{$$typeof:Wc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bv(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wc}function Fb(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Tm=/\/+/g;function Kp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fb(""+e.key):t.toString(36)}function $l(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Wc:case bb:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Kp(a,0):r,Em(i)?(n="",e!=null&&(n=e.replace(Tm,"$&/")+"/"),$l(i,t,n,"",function(l){return l})):i!=null&&(bv(i)&&(i=Lb(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Tm,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",Em(e))for(var s=0;s<e.length;s++){o=e[s];var c=r+Kp(o,s);a+=$l(o,t,n,c,i)}else if(c=jb(e),typeof c=="function")for(e=c.call(e),s=0;!(o=e.next()).done;)o=o.value,c=r+Kp(o,s++),a+=$l(o,t,n,c,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function yl(e,t,n){if(e==null)return e;var r=[],i=0;return $l(e,r,"","",function(o){return t.call(n,o,i++)}),r}function Bb(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},Vl={transition:null},qb={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Vl,ReactCurrentOwner:Av};function wR(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:yl,forEach:function(e,t,n){yl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yl(e,function(){t++}),t},toArray:function(e){return yl(e,function(t){return t})||[]},only:function(e){if(!bv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=Vo;ue.Fragment=Ib;ue.Profiler=kb;ue.PureComponent=Ev;ue.StrictMode=_b;ue.Suspense=Db;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qb;ue.act=wR;ue.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=vR({},e.props),i=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Av.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)yR.call(t,c)&&!SR.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&s!==void 0?s[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:Wc,type:e.type,key:i,ref:o,props:r,_owner:a}};ue.createContext=function(e){return e={$$typeof:Ob,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xb,_context:e},e.Consumer=e};ue.createElement=CR;ue.createFactory=function(e){var t=CR.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:Mb,render:e}};ue.isValidElement=bv;ue.lazy=function(e){return{$$typeof:zb,_payload:{_status:-1,_result:e},_init:Bb}};ue.memo=function(e,t){return{$$typeof:Nb,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=Vl.transition;Vl.transition={};try{e()}finally{Vl.transition=t}};ue.unstable_act=wR;ue.useCallback=function(e,t){return At.current.useCallback(e,t)};ue.useContext=function(e){return At.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return At.current.useDeferredValue(e)};ue.useEffect=function(e,t){return At.current.useEffect(e,t)};ue.useId=function(){return At.current.useId()};ue.useImperativeHandle=function(e,t,n){return At.current.useImperativeHandle(e,t,n)};ue.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return At.current.useMemo(e,t)};ue.useReducer=function(e,t,n){return At.current.useReducer(e,t,n)};ue.useRef=function(e){return At.current.useRef(e)};ue.useState=function(e){return At.current.useState(e)};ue.useSyncExternalStore=function(e,t,n){return At.current.useSyncExternalStore(e,t,n)};ue.useTransition=function(){return At.current.useTransition()};ue.version="18.3.1";hR.exports=ue;var w=hR.exports;const F=dR(w),RR=Tb({__proto__:null,default:F},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ub=w,$b=Symbol.for("react.element"),Vb=Symbol.for("react.fragment"),Hb=Object.prototype.hasOwnProperty,Wb=Ub.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kb={key:!0,ref:!0,__self:!0,__source:!0};function PR(e,t,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Hb.call(t,r)&&!Kb.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:$b,type:e,key:o,ref:a,props:i,_owner:Wb.current}}Hu.Fragment=Vb;Hu.jsx=PR;Hu.jsxs=PR;pR.exports=Hu;var P=pR.exports,ER={exports:{}},Gt={},TR={exports:{}},AR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,D){var K=b.length;b.push(D);e:for(;0<K;){var U=K-1>>>1,G=b[U];if(0<i(G,D))b[U]=D,b[K]=G,K=U;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var D=b[0],K=b.pop();if(K!==D){b[0]=K;e:for(var U=0,G=b.length,oe=G>>>1;U<oe;){var Se=2*(U+1)-1,Ye=b[Se],he=Se+1,Xe=b[he];if(0>i(Ye,K))he<G&&0>i(Xe,Ye)?(b[U]=Xe,b[he]=K,U=he):(b[U]=Ye,b[Se]=K,U=Se);else if(he<G&&0>i(Xe,K))b[U]=Xe,b[he]=K,U=he;else break e}}return D}function i(b,D){var K=b.sortIndex-D.sortIndex;return K!==0?K:b.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var c=[],l=[],u=1,d=null,p=3,h=!1,v=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(b){for(var D=n(l);D!==null;){if(D.callback===null)r(l);else if(D.startTime<=b)r(l),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(l)}}function C(b){if(g=!1,S(b),!v)if(n(c)!==null)v=!0,V(R);else{var D=n(l);D!==null&&Y(C,D.startTime-b)}}function R(b,D){v=!1,g&&(g=!1,f(E),E=-1),h=!0;var K=p;try{for(S(D),d=n(c);d!==null&&(!(d.expirationTime>D)||b&&!N());){var U=d.callback;if(typeof U=="function"){d.callback=null,p=d.priorityLevel;var G=U(d.expirationTime<=D);D=e.unstable_now(),typeof G=="function"?d.callback=G:d===n(c)&&r(c),S(D)}else r(c);d=n(c)}if(d!==null)var oe=!0;else{var Se=n(l);Se!==null&&Y(C,Se.startTime-D),oe=!1}return oe}finally{d=null,p=K,h=!1}}var T=!1,A=null,E=-1,k=5,_=-1;function N(){return!(e.unstable_now()-_<k)}function B(){if(A!==null){var b=e.unstable_now();_=b;var D=!0;try{D=A(!0,b)}finally{D?$():(T=!1,A=null)}}else T=!1}var $;if(typeof m=="function")$=function(){m(B)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,L=j.port2;j.port1.onmessage=B,$=function(){L.postMessage(null)}}else $=function(){y(B,0)};function V(b){A=b,T||(T=!0,$())}function Y(b,D){E=y(function(){b(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){v||h||(v=!0,V(R))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(b){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var K=p;p=D;try{return b()}finally{p=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,D){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var K=p;p=b;try{return D()}finally{p=K}},e.unstable_scheduleCallback=function(b,D,K){var U=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?U+K:U):K=U,b){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=K+G,b={id:u++,callback:D,priorityLevel:b,startTime:K,expirationTime:G,sortIndex:-1},K>U?(b.sortIndex=K,t(l,b),n(c)===null&&b===n(l)&&(g?(f(E),E=-1):g=!0,Y(C,K-U))):(b.sortIndex=G,t(c,b),v||h||(v=!0,V(R))),b},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(b){var D=p;return function(){var K=p;p=D;try{return b.apply(this,arguments)}finally{p=K}}}})(AR);TR.exports=AR;var Jb=TR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gb=w,Jt=Jb;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bR=new Set,yc={};function Wi(e,t){xo(e,t),xo(e+"Capture",t)}function xo(e,t){for(yc[e]=t,e=0;e<t.length;e++)bR.add(t[e])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yh=Object.prototype.hasOwnProperty,Qb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Am={},bm={};function Yb(e){return Yh.call(bm,e)?!0:Yh.call(Am,e)?!1:Qb.test(e)?bm[e]=!0:(Am[e]=!0,!1)}function Xb(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zb(e,t,n,r){if(t===null||typeof t>"u"||Xb(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,r,i,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iv=/[\-:]([a-z])/g;function _v(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iv,_v);ot[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iv,_v);ot[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iv,_v);ot[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function kv(e,t,n,r){var i=ot.hasOwnProperty(t)?ot[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zb(t,n,i,r)&&(n=null),r||i===null?Yb(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var lr=Gb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),xv=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),IR=Symbol.for("react.provider"),_R=Symbol.for("react.context"),Ov=Symbol.for("react.forward_ref"),Zh=Symbol.for("react.suspense"),ef=Symbol.for("react.suspense_list"),Mv=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),kR=Symbol.for("react.offscreen"),Im=Symbol.iterator;function as(e){return e===null||typeof e!="object"?null:(e=Im&&e[Im]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Object.assign,Jp;function nc(e){if(Jp===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jp=t&&t[1]||""}return`
`+Jp+e}var Gp=!1;function Qp(e,t){if(!e||Gp)return"";Gp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=s);break}}}finally{Gp=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?nc(e):""}function eI(e){switch(e.tag){case 5:return nc(e.type);case 16:return nc("Lazy");case 13:return nc("Suspense");case 19:return nc("SuspenseList");case 0:case 2:case 15:return e=Qp(e.type,!1),e;case 11:return e=Qp(e.type.render,!1),e;case 1:return e=Qp(e.type,!0),e;default:return""}}function tf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case to:return"Fragment";case eo:return"Portal";case Xh:return"Profiler";case xv:return"StrictMode";case Zh:return"Suspense";case ef:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _R:return(e.displayName||"Context")+".Consumer";case IR:return(e._context.displayName||"Context")+".Provider";case Ov:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Mv:return t=e.displayName||null,t!==null?t:tf(e.type)||"Memo";case Rr:t=e._payload,e=e._init;try{return tf(e(t))}catch{}}return null}function tI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tf(t);case 8:return t===xv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Jr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xR(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function nI(e){var t=xR(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cl(e){e._valueTracker||(e._valueTracker=nI(e))}function OR(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xR(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function lu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nf(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _m(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Jr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MR(e,t){t=t.checked,t!=null&&kv(e,"checked",t,!1)}function rf(e,t){MR(e,t);var n=Jr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?of(e,t.type,n):t.hasOwnProperty("defaultValue")&&of(e,t.type,Jr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function km(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function of(e,t,n){(t!=="number"||lu(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var rc=Array.isArray;function ho(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Jr(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function sf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function xm(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(rc(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Jr(n)}}function DR(e,t){var n=Jr(t.value),r=Jr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Om(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function NR(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function af(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?NR(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wl,zR=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wl=wl||document.createElement("div"),wl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rI=["Webkit","ms","Moz","O"];Object.keys(ac).forEach(function(e){rI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ac[t]=ac[e]})});function jR(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ac.hasOwnProperty(e)&&ac[e]?(""+t).trim():t+"px"}function LR(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jR(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var iI=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cf(e,t){if(t){if(iI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function lf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uf=null;function Dv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var df=null,fo=null,vo=null;function Mm(e){if(e=Gc(e)){if(typeof df!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Qu(t),df(e.stateNode,e.type,t))}}function FR(e){fo?vo?vo.push(e):vo=[e]:fo=e}function BR(){if(fo){var e=fo,t=vo;if(vo=fo=null,Mm(e),t)for(e=0;e<t.length;e++)Mm(t[e])}}function qR(e,t){return e(t)}function UR(){}var Yp=!1;function $R(e,t,n){if(Yp)return e(t,n);Yp=!0;try{return qR(e,t,n)}finally{Yp=!1,(fo!==null||vo!==null)&&(UR(),BR())}}function Cc(e,t){var n=e.stateNode;if(n===null)return null;var r=Qu(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var pf=!1;if(rr)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){pf=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{pf=!1}function oI(e,t,n,r,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var cc=!1,uu=null,du=!1,hf=null,sI={onError:function(e){cc=!0,uu=e}};function aI(e,t,n,r,i,o,a,s,c){cc=!1,uu=null,oI.apply(sI,arguments)}function cI(e,t,n,r,i,o,a,s,c){if(aI.apply(this,arguments),cc){if(cc){var l=uu;cc=!1,uu=null}else throw Error(M(198));du||(du=!0,hf=l)}}function Ki(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function VR(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dm(e){if(Ki(e)!==e)throw Error(M(188))}function lI(e){var t=e.alternate;if(!t){if(t=Ki(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Dm(i),e;if(o===r)return Dm(i),t;o=o.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function HR(e){return e=lI(e),e!==null?WR(e):null}function WR(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=WR(e);if(t!==null)return t;e=e.sibling}return null}var KR=Jt.unstable_scheduleCallback,Nm=Jt.unstable_cancelCallback,uI=Jt.unstable_shouldYield,dI=Jt.unstable_requestPaint,Fe=Jt.unstable_now,pI=Jt.unstable_getCurrentPriorityLevel,Nv=Jt.unstable_ImmediatePriority,JR=Jt.unstable_UserBlockingPriority,pu=Jt.unstable_NormalPriority,hI=Jt.unstable_LowPriority,GR=Jt.unstable_IdlePriority,Wu=null,Fn=null;function fI(e){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(Wu,e,void 0,(e.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:mI,vI=Math.log,gI=Math.LN2;function mI(e){return e>>>=0,e===0?32:31-(vI(e)/gI|0)|0}var Rl=64,Pl=4194304;function ic(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hu(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=ic(s):(o&=a,o!==0&&(r=ic(o)))}else a=n&~i,a!==0?r=ic(a):o!==0&&(r=ic(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sn(t),i=1<<n,r|=e[n],t&=~i;return r}function yI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SI(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Sn(o),s=1<<a,c=i[a];c===-1?(!(s&n)||s&r)&&(i[a]=yI(s,t)):c<=t&&(e.expiredLanes|=s),o&=~s}}function ff(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function QR(){var e=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),e}function Xp(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Kc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sn(t),e[t]=n}function CI(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Sn(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function zv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var ye=0;function YR(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var XR,jv,ZR,eP,tP,vf=!1,El=[],Lr=null,Fr=null,Br=null,wc=new Map,Rc=new Map,Ar=[],wI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zm(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":wc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rc.delete(t.pointerId)}}function ls(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=Gc(t),t!==null&&jv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function RI(e,t,n,r,i){switch(t){case"focusin":return Lr=ls(Lr,e,t,n,r,i),!0;case"dragenter":return Fr=ls(Fr,e,t,n,r,i),!0;case"mouseover":return Br=ls(Br,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return wc.set(o,ls(wc.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rc.set(o,ls(Rc.get(o)||null,e,t,n,r,i)),!0}return!1}function nP(e){var t=bi(e.target);if(t!==null){var n=Ki(t);if(n!==null){if(t=n.tag,t===13){if(t=VR(n),t!==null){e.blockedOn=t,tP(e.priority,function(){ZR(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);uf=r,n.target.dispatchEvent(r),uf=null}else return t=Gc(n),t!==null&&jv(t),e.blockedOn=n,!1;t.shift()}return!0}function jm(e,t,n){Hl(e)&&n.delete(t)}function PI(){vf=!1,Lr!==null&&Hl(Lr)&&(Lr=null),Fr!==null&&Hl(Fr)&&(Fr=null),Br!==null&&Hl(Br)&&(Br=null),wc.forEach(jm),Rc.forEach(jm)}function us(e,t){e.blockedOn===t&&(e.blockedOn=null,vf||(vf=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,PI)))}function Pc(e){function t(i){return us(i,e)}if(0<El.length){us(El[0],e);for(var n=1;n<El.length;n++){var r=El[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Lr!==null&&us(Lr,e),Fr!==null&&us(Fr,e),Br!==null&&us(Br,e),wc.forEach(t),Rc.forEach(t),n=0;n<Ar.length;n++)r=Ar[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ar.length&&(n=Ar[0],n.blockedOn===null);)nP(n),n.blockedOn===null&&Ar.shift()}var go=lr.ReactCurrentBatchConfig,fu=!0;function EI(e,t,n,r){var i=ye,o=go.transition;go.transition=null;try{ye=1,Lv(e,t,n,r)}finally{ye=i,go.transition=o}}function TI(e,t,n,r){var i=ye,o=go.transition;go.transition=null;try{ye=4,Lv(e,t,n,r)}finally{ye=i,go.transition=o}}function Lv(e,t,n,r){if(fu){var i=gf(e,t,n,r);if(i===null)ch(e,t,r,vu,n),zm(e,r);else if(RI(i,e,t,n,r))r.stopPropagation();else if(zm(e,r),t&4&&-1<wI.indexOf(e)){for(;i!==null;){var o=Gc(i);if(o!==null&&XR(o),o=gf(e,t,n,r),o===null&&ch(e,t,r,vu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ch(e,t,r,null,n)}}var vu=null;function gf(e,t,n,r){if(vu=null,e=Dv(r),e=bi(e),e!==null)if(t=Ki(e),t===null)e=null;else if(n=t.tag,n===13){if(e=VR(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vu=e,null}function rP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pI()){case Nv:return 1;case JR:return 4;case pu:case hI:return 16;case GR:return 536870912;default:return 16}default:return 16}}var Mr=null,Fv=null,Wl=null;function iP(){if(Wl)return Wl;var e,t=Fv,n=t.length,r,i="value"in Mr?Mr.value:Mr.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[o-r];r++);return Wl=i.slice(e,1<r?1-r:void 0)}function Kl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tl(){return!0}function Lm(){return!1}function Qt(e){function t(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Tl:Lm,this.isPropagationStopped=Lm,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),t}var Ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bv=Qt(Ho),Jc=Me({},Ho,{view:0,detail:0}),AI=Qt(Jc),Zp,eh,ds,Ku=Me({},Jc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ds&&(ds&&e.type==="mousemove"?(Zp=e.screenX-ds.screenX,eh=e.screenY-ds.screenY):eh=Zp=0,ds=e),Zp)},movementY:function(e){return"movementY"in e?e.movementY:eh}}),Fm=Qt(Ku),bI=Me({},Ku,{dataTransfer:0}),II=Qt(bI),_I=Me({},Jc,{relatedTarget:0}),th=Qt(_I),kI=Me({},Ho,{animationName:0,elapsedTime:0,pseudoElement:0}),xI=Qt(kI),OI=Me({},Ho,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),MI=Qt(OI),DI=Me({},Ho,{data:0}),Bm=Qt(DI),NI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jI[e])?!!t[e]:!1}function qv(){return LI}var FI=Me({},Jc,{key:function(e){if(e.key){var t=NI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zI[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qv,charCode:function(e){return e.type==="keypress"?Kl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),BI=Qt(FI),qI=Me({},Ku,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qm=Qt(qI),UI=Me({},Jc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qv}),$I=Qt(UI),VI=Me({},Ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),HI=Qt(VI),WI=Me({},Ku,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),KI=Qt(WI),JI=[9,13,27,32],Uv=rr&&"CompositionEvent"in window,lc=null;rr&&"documentMode"in document&&(lc=document.documentMode);var GI=rr&&"TextEvent"in window&&!lc,oP=rr&&(!Uv||lc&&8<lc&&11>=lc),Um=" ",$m=!1;function sP(e,t){switch(e){case"keyup":return JI.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var no=!1;function QI(e,t){switch(e){case"compositionend":return aP(t);case"keypress":return t.which!==32?null:($m=!0,Um);case"textInput":return e=t.data,e===Um&&$m?null:e;default:return null}}function YI(e,t){if(no)return e==="compositionend"||!Uv&&sP(e,t)?(e=iP(),Wl=Fv=Mr=null,no=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oP&&t.locale!=="ko"?null:t.data;default:return null}}var XI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XI[e.type]:t==="textarea"}function cP(e,t,n,r){FR(r),t=gu(t,"onChange"),0<t.length&&(n=new Bv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var uc=null,Ec=null;function ZI(e){SP(e,0)}function Ju(e){var t=oo(e);if(OR(t))return e}function e_(e,t){if(e==="change")return t}var lP=!1;if(rr){var nh;if(rr){var rh="oninput"in document;if(!rh){var Hm=document.createElement("div");Hm.setAttribute("oninput","return;"),rh=typeof Hm.oninput=="function"}nh=rh}else nh=!1;lP=nh&&(!document.documentMode||9<document.documentMode)}function Wm(){uc&&(uc.detachEvent("onpropertychange",uP),Ec=uc=null)}function uP(e){if(e.propertyName==="value"&&Ju(Ec)){var t=[];cP(t,Ec,e,Dv(e)),$R(ZI,t)}}function t_(e,t,n){e==="focusin"?(Wm(),uc=t,Ec=n,uc.attachEvent("onpropertychange",uP)):e==="focusout"&&Wm()}function n_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ju(Ec)}function r_(e,t){if(e==="click")return Ju(t)}function i_(e,t){if(e==="input"||e==="change")return Ju(t)}function o_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:o_;function Tc(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yh.call(t,i)||!wn(e[i],t[i]))return!1}return!0}function Km(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jm(e,t){var n=Km(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Km(n)}}function dP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pP(){for(var e=window,t=lu();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=lu(e.document)}return t}function $v(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function s_(e){var t=pP(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dP(n.ownerDocument.documentElement,n)){if(r!==null&&$v(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=Jm(n,o);var a=Jm(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var a_=rr&&"documentMode"in document&&11>=document.documentMode,ro=null,mf=null,dc=null,yf=!1;function Gm(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yf||ro==null||ro!==lu(r)||(r=ro,"selectionStart"in r&&$v(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dc&&Tc(dc,r)||(dc=r,r=gu(mf,"onSelect"),0<r.length&&(t=new Bv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ro)))}function Al(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var io={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},ih={},hP={};rr&&(hP=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Gu(e){if(ih[e])return ih[e];if(!io[e])return e;var t=io[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hP)return ih[e]=t[n];return e}var fP=Gu("animationend"),vP=Gu("animationiteration"),gP=Gu("animationstart"),mP=Gu("transitionend"),yP=new Map,Qm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(e,t){yP.set(e,t),Wi(t,[e])}for(var oh=0;oh<Qm.length;oh++){var sh=Qm[oh],c_=sh.toLowerCase(),l_=sh[0].toUpperCase()+sh.slice(1);ri(c_,"on"+l_)}ri(fP,"onAnimationEnd");ri(vP,"onAnimationIteration");ri(gP,"onAnimationStart");ri("dblclick","onDoubleClick");ri("focusin","onFocus");ri("focusout","onBlur");ri(mP,"onTransitionEnd");xo("onMouseEnter",["mouseout","mouseover"]);xo("onMouseLeave",["mouseout","mouseover"]);xo("onPointerEnter",["pointerout","pointerover"]);xo("onPointerLeave",["pointerout","pointerover"]);Wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u_=new Set("cancel close invalid load scroll toggle".split(" ").concat(oc));function Ym(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,cI(r,t,void 0,e),e.currentTarget=null}function SP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;Ym(i,s,l),o=c}else for(a=0;a<r.length;a++){if(s=r[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;Ym(i,s,l),o=c}}}if(du)throw e=hf,du=!1,hf=null,e}function Ae(e,t){var n=t[Pf];n===void 0&&(n=t[Pf]=new Set);var r=e+"__bubble";n.has(r)||(CP(t,e,2,!1),n.add(r))}function ah(e,t,n){var r=0;t&&(r|=4),CP(n,e,r,t)}var bl="_reactListening"+Math.random().toString(36).slice(2);function Ac(e){if(!e[bl]){e[bl]=!0,bR.forEach(function(n){n!=="selectionchange"&&(u_.has(n)||ah(n,!1,e),ah(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[bl]||(t[bl]=!0,ah("selectionchange",!1,t))}}function CP(e,t,n,r){switch(rP(t)){case 1:var i=EI;break;case 4:i=TI;break;default:i=Lv}n=i.bind(null,t,n,e),i=void 0,!pf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ch(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=bi(s),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}s=s.parentNode}}r=r.return}$R(function(){var l=o,u=Dv(n),d=[];e:{var p=yP.get(e);if(p!==void 0){var h=Bv,v=e;switch(e){case"keypress":if(Kl(n)===0)break e;case"keydown":case"keyup":h=BI;break;case"focusin":v="focus",h=th;break;case"focusout":v="blur",h=th;break;case"beforeblur":case"afterblur":h=th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Fm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=II;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=$I;break;case fP:case vP:case gP:h=xI;break;case mP:h=HI;break;case"scroll":h=AI;break;case"wheel":h=KI;break;case"copy":case"cut":case"paste":h=MI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=qm}var g=(t&4)!==0,y=!g&&e==="scroll",f=g?p!==null?p+"Capture":null:p;g=[];for(var m=l,S;m!==null;){S=m;var C=S.stateNode;if(S.tag===5&&C!==null&&(S=C,f!==null&&(C=Cc(m,f),C!=null&&g.push(bc(m,C,S)))),y)break;m=m.return}0<g.length&&(p=new h(p,v,null,n,u),d.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&n!==uf&&(v=n.relatedTarget||n.fromElement)&&(bi(v)||v[ir]))break e;if((h||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,h?(v=n.relatedTarget||n.toElement,h=l,v=v?bi(v):null,v!==null&&(y=Ki(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(h=null,v=l),h!==v)){if(g=Fm,C="onMouseLeave",f="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(g=qm,C="onPointerLeave",f="onPointerEnter",m="pointer"),y=h==null?p:oo(h),S=v==null?p:oo(v),p=new g(C,m+"leave",h,n,u),p.target=y,p.relatedTarget=S,C=null,bi(u)===l&&(g=new g(f,m+"enter",v,n,u),g.target=S,g.relatedTarget=y,C=g),y=C,h&&v)t:{for(g=h,f=v,m=0,S=g;S;S=Yi(S))m++;for(S=0,C=f;C;C=Yi(C))S++;for(;0<m-S;)g=Yi(g),m--;for(;0<S-m;)f=Yi(f),S--;for(;m--;){if(g===f||f!==null&&g===f.alternate)break t;g=Yi(g),f=Yi(f)}g=null}else g=null;h!==null&&Xm(d,p,h,g,!1),v!==null&&y!==null&&Xm(d,y,v,g,!0)}}e:{if(p=l?oo(l):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var R=e_;else if(Vm(p))if(lP)R=i_;else{R=n_;var T=t_}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=r_);if(R&&(R=R(e,l))){cP(d,R,n,u);break e}T&&T(e,p,l),e==="focusout"&&(T=p._wrapperState)&&T.controlled&&p.type==="number"&&of(p,"number",p.value)}switch(T=l?oo(l):window,e){case"focusin":(Vm(T)||T.contentEditable==="true")&&(ro=T,mf=l,dc=null);break;case"focusout":dc=mf=ro=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Gm(d,n,u);break;case"selectionchange":if(a_)break;case"keydown":case"keyup":Gm(d,n,u)}var A;if(Uv)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else no?sP(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(oP&&n.locale!=="ko"&&(no||E!=="onCompositionStart"?E==="onCompositionEnd"&&no&&(A=iP()):(Mr=u,Fv="value"in Mr?Mr.value:Mr.textContent,no=!0)),T=gu(l,E),0<T.length&&(E=new Bm(E,e,null,n,u),d.push({event:E,listeners:T}),A?E.data=A:(A=aP(n),A!==null&&(E.data=A)))),(A=GI?QI(e,n):YI(e,n))&&(l=gu(l,"onBeforeInput"),0<l.length&&(u=new Bm("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}SP(d,t)})}function bc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gu(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Cc(e,n),o!=null&&r.unshift(bc(e,o,i)),o=Cc(e,t),o!=null&&r.push(bc(e,o,i))),e=e.return}return r}function Yi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xm(e,t,n,r,i){for(var o=t._reactName,a=[];n!==null&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(c!==null&&c===r)break;s.tag===5&&l!==null&&(s=l,i?(c=Cc(n,o),c!=null&&a.unshift(bc(n,c,s))):i||(c=Cc(n,o),c!=null&&a.push(bc(n,c,s)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var d_=/\r\n?/g,p_=/\u0000|\uFFFD/g;function Zm(e){return(typeof e=="string"?e:""+e).replace(d_,`
`).replace(p_,"")}function Il(e,t,n){if(t=Zm(t),Zm(e)!==t&&n)throw Error(M(425))}function mu(){}var Sf=null,Cf=null;function wf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rf=typeof setTimeout=="function"?setTimeout:void 0,h_=typeof clearTimeout=="function"?clearTimeout:void 0,ey=typeof Promise=="function"?Promise:void 0,f_=typeof queueMicrotask=="function"?queueMicrotask:typeof ey<"u"?function(e){return ey.resolve(null).then(e).catch(v_)}:Rf;function v_(e){setTimeout(function(){throw e})}function lh(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Pc(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pc(t)}function qr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ty(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),jn="__reactFiber$"+Wo,Ic="__reactProps$"+Wo,ir="__reactContainer$"+Wo,Pf="__reactEvents$"+Wo,g_="__reactListeners$"+Wo,m_="__reactHandles$"+Wo;function bi(e){var t=e[jn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ir]||n[jn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ty(e);e!==null;){if(n=e[jn])return n;e=ty(e)}return t}e=n,n=e.parentNode}return null}function Gc(e){return e=e[jn]||e[ir],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function oo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Qu(e){return e[Ic]||null}var Ef=[],so=-1;function ii(e){return{current:e}}function be(e){0>so||(e.current=Ef[so],Ef[so]=null,so--)}function Ee(e,t){so++,Ef[so]=e.current,e.current=t}var Gr={},Ct=ii(Gr),xt=ii(!1),Li=Gr;function Oo(e,t){var n=e.type.contextTypes;if(!n)return Gr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ot(e){return e=e.childContextTypes,e!=null}function yu(){be(xt),be(Ct)}function ny(e,t,n){if(Ct.current!==Gr)throw Error(M(168));Ee(Ct,t),Ee(xt,n)}function wP(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(M(108,tI(e)||"Unknown",i));return Me({},n,r)}function Su(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gr,Li=Ct.current,Ee(Ct,e),Ee(xt,xt.current),!0}function ry(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=wP(e,t,Li),r.__reactInternalMemoizedMergedChildContext=e,be(xt),be(Ct),Ee(Ct,e)):be(xt),Ee(xt,n)}var Xn=null,Yu=!1,uh=!1;function RP(e){Xn===null?Xn=[e]:Xn.push(e)}function y_(e){Yu=!0,RP(e)}function oi(){if(!uh&&Xn!==null){uh=!0;var e=0,t=ye;try{var n=Xn;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xn=null,Yu=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(e+1)),KR(Nv,oi),i}finally{ye=t,uh=!1}}return null}var ao=[],co=0,Cu=null,wu=0,rn=[],on=0,Fi=null,Zn=1,er="";function Ti(e,t){ao[co++]=wu,ao[co++]=Cu,Cu=e,wu=t}function PP(e,t,n){rn[on++]=Zn,rn[on++]=er,rn[on++]=Fi,Fi=e;var r=Zn;e=er;var i=32-Sn(r)-1;r&=~(1<<i),n+=1;var o=32-Sn(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zn=1<<32-Sn(t)+i|n<<i|r,er=o+e}else Zn=1<<o|n<<i|r,er=e}function Vv(e){e.return!==null&&(Ti(e,1),PP(e,1,0))}function Hv(e){for(;e===Cu;)Cu=ao[--co],ao[co]=null,wu=ao[--co],ao[co]=null;for(;e===Fi;)Fi=rn[--on],rn[on]=null,er=rn[--on],rn[on]=null,Zn=rn[--on],rn[on]=null}var Wt=null,Ht=null,_e=!1,yn=null;function EP(e,t){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function iy(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wt=e,Ht=qr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wt=e,Ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fi!==null?{id:Zn,overflow:er}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wt=e,Ht=null,!0):!1;default:return!1}}function Tf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Af(e){if(_e){var t=Ht;if(t){var n=t;if(!iy(e,t)){if(Tf(e))throw Error(M(418));t=qr(n.nextSibling);var r=Wt;t&&iy(e,t)?EP(r,n):(e.flags=e.flags&-4097|2,_e=!1,Wt=e)}}else{if(Tf(e))throw Error(M(418));e.flags=e.flags&-4097|2,_e=!1,Wt=e}}}function oy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wt=e}function _l(e){if(e!==Wt)return!1;if(!_e)return oy(e),_e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wf(e.type,e.memoizedProps)),t&&(t=Ht)){if(Tf(e))throw TP(),Error(M(418));for(;t;)EP(e,t),t=qr(t.nextSibling)}if(oy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ht=qr(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ht=null}}else Ht=Wt?qr(e.stateNode.nextSibling):null;return!0}function TP(){for(var e=Ht;e;)e=qr(e.nextSibling)}function Mo(){Ht=Wt=null,_e=!1}function Wv(e){yn===null?yn=[e]:yn.push(e)}var S_=lr.ReactCurrentBatchConfig;function ps(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function kl(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function sy(e){var t=e._init;return t(e._payload)}function AP(e){function t(f,m){if(e){var S=f.deletions;S===null?(f.deletions=[m],f.flags|=16):S.push(m)}}function n(f,m){if(!e)return null;for(;m!==null;)t(f,m),m=m.sibling;return null}function r(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function i(f,m){return f=Hr(f,m),f.index=0,f.sibling=null,f}function o(f,m,S){return f.index=S,e?(S=f.alternate,S!==null?(S=S.index,S<m?(f.flags|=2,m):S):(f.flags|=2,m)):(f.flags|=1048576,m)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function s(f,m,S,C){return m===null||m.tag!==6?(m=mh(S,f.mode,C),m.return=f,m):(m=i(m,S),m.return=f,m)}function c(f,m,S,C){var R=S.type;return R===to?u(f,m,S.props.children,C,S.key):m!==null&&(m.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Rr&&sy(R)===m.type)?(C=i(m,S.props),C.ref=ps(f,m,S),C.return=f,C):(C=eu(S.type,S.key,S.props,null,f.mode,C),C.ref=ps(f,m,S),C.return=f,C)}function l(f,m,S,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==S.containerInfo||m.stateNode.implementation!==S.implementation?(m=yh(S,f.mode,C),m.return=f,m):(m=i(m,S.children||[]),m.return=f,m)}function u(f,m,S,C,R){return m===null||m.tag!==7?(m=zi(S,f.mode,C,R),m.return=f,m):(m=i(m,S),m.return=f,m)}function d(f,m,S){if(typeof m=="string"&&m!==""||typeof m=="number")return m=mh(""+m,f.mode,S),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Sl:return S=eu(m.type,m.key,m.props,null,f.mode,S),S.ref=ps(f,null,m),S.return=f,S;case eo:return m=yh(m,f.mode,S),m.return=f,m;case Rr:var C=m._init;return d(f,C(m._payload),S)}if(rc(m)||as(m))return m=zi(m,f.mode,S,null),m.return=f,m;kl(f,m)}return null}function p(f,m,S,C){var R=m!==null?m.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return R!==null?null:s(f,m,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Sl:return S.key===R?c(f,m,S,C):null;case eo:return S.key===R?l(f,m,S,C):null;case Rr:return R=S._init,p(f,m,R(S._payload),C)}if(rc(S)||as(S))return R!==null?null:u(f,m,S,C,null);kl(f,S)}return null}function h(f,m,S,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return f=f.get(S)||null,s(m,f,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Sl:return f=f.get(C.key===null?S:C.key)||null,c(m,f,C,R);case eo:return f=f.get(C.key===null?S:C.key)||null,l(m,f,C,R);case Rr:var T=C._init;return h(f,m,S,T(C._payload),R)}if(rc(C)||as(C))return f=f.get(S)||null,u(m,f,C,R,null);kl(m,C)}return null}function v(f,m,S,C){for(var R=null,T=null,A=m,E=m=0,k=null;A!==null&&E<S.length;E++){A.index>E?(k=A,A=null):k=A.sibling;var _=p(f,A,S[E],C);if(_===null){A===null&&(A=k);break}e&&A&&_.alternate===null&&t(f,A),m=o(_,m,E),T===null?R=_:T.sibling=_,T=_,A=k}if(E===S.length)return n(f,A),_e&&Ti(f,E),R;if(A===null){for(;E<S.length;E++)A=d(f,S[E],C),A!==null&&(m=o(A,m,E),T===null?R=A:T.sibling=A,T=A);return _e&&Ti(f,E),R}for(A=r(f,A);E<S.length;E++)k=h(A,f,E,S[E],C),k!==null&&(e&&k.alternate!==null&&A.delete(k.key===null?E:k.key),m=o(k,m,E),T===null?R=k:T.sibling=k,T=k);return e&&A.forEach(function(N){return t(f,N)}),_e&&Ti(f,E),R}function g(f,m,S,C){var R=as(S);if(typeof R!="function")throw Error(M(150));if(S=R.call(S),S==null)throw Error(M(151));for(var T=R=null,A=m,E=m=0,k=null,_=S.next();A!==null&&!_.done;E++,_=S.next()){A.index>E?(k=A,A=null):k=A.sibling;var N=p(f,A,_.value,C);if(N===null){A===null&&(A=k);break}e&&A&&N.alternate===null&&t(f,A),m=o(N,m,E),T===null?R=N:T.sibling=N,T=N,A=k}if(_.done)return n(f,A),_e&&Ti(f,E),R;if(A===null){for(;!_.done;E++,_=S.next())_=d(f,_.value,C),_!==null&&(m=o(_,m,E),T===null?R=_:T.sibling=_,T=_);return _e&&Ti(f,E),R}for(A=r(f,A);!_.done;E++,_=S.next())_=h(A,f,E,_.value,C),_!==null&&(e&&_.alternate!==null&&A.delete(_.key===null?E:_.key),m=o(_,m,E),T===null?R=_:T.sibling=_,T=_);return e&&A.forEach(function(B){return t(f,B)}),_e&&Ti(f,E),R}function y(f,m,S,C){if(typeof S=="object"&&S!==null&&S.type===to&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Sl:e:{for(var R=S.key,T=m;T!==null;){if(T.key===R){if(R=S.type,R===to){if(T.tag===7){n(f,T.sibling),m=i(T,S.props.children),m.return=f,f=m;break e}}else if(T.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Rr&&sy(R)===T.type){n(f,T.sibling),m=i(T,S.props),m.ref=ps(f,T,S),m.return=f,f=m;break e}n(f,T);break}else t(f,T);T=T.sibling}S.type===to?(m=zi(S.props.children,f.mode,C,S.key),m.return=f,f=m):(C=eu(S.type,S.key,S.props,null,f.mode,C),C.ref=ps(f,m,S),C.return=f,f=C)}return a(f);case eo:e:{for(T=S.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===S.containerInfo&&m.stateNode.implementation===S.implementation){n(f,m.sibling),m=i(m,S.children||[]),m.return=f,f=m;break e}else{n(f,m);break}else t(f,m);m=m.sibling}m=yh(S,f.mode,C),m.return=f,f=m}return a(f);case Rr:return T=S._init,y(f,m,T(S._payload),C)}if(rc(S))return v(f,m,S,C);if(as(S))return g(f,m,S,C);kl(f,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,m!==null&&m.tag===6?(n(f,m.sibling),m=i(m,S),m.return=f,f=m):(n(f,m),m=mh(S,f.mode,C),m.return=f,f=m),a(f)):n(f,m)}return y}var Do=AP(!0),bP=AP(!1),Ru=ii(null),Pu=null,lo=null,Kv=null;function Jv(){Kv=lo=Pu=null}function Gv(e){var t=Ru.current;be(Ru),e._currentValue=t}function bf(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mo(e,t){Pu=e,Kv=lo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kt=!0),e.firstContext=null)}function cn(e){var t=e._currentValue;if(Kv!==e)if(e={context:e,memoizedValue:t,next:null},lo===null){if(Pu===null)throw Error(M(308));lo=e,Pu.dependencies={lanes:0,firstContext:e}}else lo=lo.next=e;return t}var Ii=null;function Qv(e){Ii===null?Ii=[e]:Ii.push(e)}function IP(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Qv(t)):(n.next=i.next,i.next=n),t.interleaved=n,or(e,r)}function or(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Pr=!1;function Yv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _P(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ur(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,or(e,n)}return i=r.interleaved,i===null?(t.next=t,Qv(r)):(t.next=i.next,i.next=t),r.interleaved=t,or(e,n)}function Jl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zv(e,n)}}function ay(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Eu(e,t,n,r){var i=e.updateQueue;Pr=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,u=l=c=null,s=o;do{var p=s.lane,h=s.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var v=e,g=s;switch(p=t,h=n,g.tag){case 1:if(v=g.payload,typeof v=="function"){d=v.call(h,d,p);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,p=typeof v=="function"?v.call(h,d,p):v,p==null)break e;d=Me({},d,p);break e;case 2:Pr=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,p=i.effects,p===null?i.effects=[s]:p.push(s))}else h={eventTime:h,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,a|=p;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;p=s,s=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);qi|=a,e.lanes=a,e.memoizedState=d}}function cy(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var Qc={},Bn=ii(Qc),_c=ii(Qc),kc=ii(Qc);function _i(e){if(e===Qc)throw Error(M(174));return e}function Xv(e,t){switch(Ee(kc,t),Ee(_c,e),Ee(Bn,Qc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:af(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=af(t,e)}be(Bn),Ee(Bn,t)}function No(){be(Bn),be(_c),be(kc)}function kP(e){_i(kc.current);var t=_i(Bn.current),n=af(t,e.type);t!==n&&(Ee(_c,e),Ee(Bn,n))}function Zv(e){_c.current===e&&(be(Bn),be(_c))}var xe=ii(0);function Tu(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dh=[];function eg(){for(var e=0;e<dh.length;e++)dh[e]._workInProgressVersionPrimary=null;dh.length=0}var Gl=lr.ReactCurrentDispatcher,ph=lr.ReactCurrentBatchConfig,Bi=0,Oe=null,Ve=null,Ke=null,Au=!1,pc=!1,xc=0,C_=0;function lt(){throw Error(M(321))}function tg(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wn(e[n],t[n]))return!1;return!0}function ng(e,t,n,r,i,o){if(Bi=o,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gl.current=e===null||e.memoizedState===null?E_:T_,e=n(r,i),pc){o=0;do{if(pc=!1,xc=0,25<=o)throw Error(M(301));o+=1,Ke=Ve=null,t.updateQueue=null,Gl.current=A_,e=n(r,i)}while(pc)}if(Gl.current=bu,t=Ve!==null&&Ve.next!==null,Bi=0,Ke=Ve=Oe=null,Au=!1,t)throw Error(M(300));return e}function rg(){var e=xc!==0;return xc=0,e}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Oe.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function ln(){if(Ve===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Ke===null?Oe.memoizedState:Ke.next;if(t!==null)Ke=t,Ve=e;else{if(e===null)throw Error(M(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ke===null?Oe.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function Oc(e,t){return typeof t=="function"?t(e):t}function hh(e){var t=ln(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=Ve,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,c=null,l=o;do{var u=l.lane;if((Bi&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=d,a=r):c=c.next=d,Oe.lanes|=u,qi|=u}l=l.next}while(l!==null&&l!==o);c===null?a=r:c.next=s,wn(r,t.memoizedState)||(kt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,Oe.lanes|=o,qi|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fh(e){var t=ln(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=e(o,a.action),a=a.next;while(a!==i);wn(o,t.memoizedState)||(kt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function xP(){}function OP(e,t){var n=Oe,r=ln(),i=t(),o=!wn(r.memoizedState,i);if(o&&(r.memoizedState=i,kt=!0),r=r.queue,ig(NP.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Mc(9,DP.bind(null,n,r,i,t),void 0,null),Je===null)throw Error(M(349));Bi&30||MP(n,t,i)}return i}function MP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function DP(e,t,n,r){t.value=n,t.getSnapshot=r,zP(t)&&jP(e)}function NP(e,t,n){return n(function(){zP(t)&&jP(e)})}function zP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wn(e,n)}catch{return!0}}function jP(e){var t=or(e,1);t!==null&&Cn(t,e,1,-1)}function ly(e){var t=Mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:e},t.queue=e,e=e.dispatch=P_.bind(null,Oe,e),[t.memoizedState,e]}function Mc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Oe.updateQueue,t===null?(t={lastEffect:null,stores:null},Oe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function LP(){return ln().memoizedState}function Ql(e,t,n,r){var i=Mn();Oe.flags|=e,i.memoizedState=Mc(1|t,n,void 0,r===void 0?null:r)}function Xu(e,t,n,r){var i=ln();r=r===void 0?null:r;var o=void 0;if(Ve!==null){var a=Ve.memoizedState;if(o=a.destroy,r!==null&&tg(r,a.deps)){i.memoizedState=Mc(t,n,o,r);return}}Oe.flags|=e,i.memoizedState=Mc(1|t,n,o,r)}function uy(e,t){return Ql(8390656,8,e,t)}function ig(e,t){return Xu(2048,8,e,t)}function FP(e,t){return Xu(4,2,e,t)}function BP(e,t){return Xu(4,4,e,t)}function qP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function UP(e,t,n){return n=n!=null?n.concat([e]):null,Xu(4,4,qP.bind(null,t,e),n)}function og(){}function $P(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tg(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function VP(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tg(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function HP(e,t,n){return Bi&21?(wn(n,t)||(n=QR(),Oe.lanes|=n,qi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,kt=!0),e.memoizedState=n)}function w_(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=ph.transition;ph.transition={};try{e(!1),t()}finally{ye=n,ph.transition=r}}function WP(){return ln().memoizedState}function R_(e,t,n){var r=Vr(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KP(e))JP(t,n);else if(n=IP(e,t,n,r),n!==null){var i=Tt();Cn(n,e,r,i),GP(n,t,r)}}function P_(e,t,n){var r=Vr(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KP(e))JP(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,wn(s,a)){var c=t.interleaved;c===null?(i.next=i,Qv(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=IP(e,t,i,r),n!==null&&(i=Tt(),Cn(n,e,r,i),GP(n,t,r))}}function KP(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function JP(e,t){pc=Au=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function GP(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,zv(e,n)}}var bu={readContext:cn,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},E_={readContext:cn,useCallback:function(e,t){return Mn().memoizedState=[e,t===void 0?null:t],e},useContext:cn,useEffect:uy,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ql(4194308,4,qP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ql(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ql(4,2,e,t)},useMemo:function(e,t){var n=Mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=R_.bind(null,Oe,e),[r.memoizedState,e]},useRef:function(e){var t=Mn();return e={current:e},t.memoizedState=e},useState:ly,useDebugValue:og,useDeferredValue:function(e){return Mn().memoizedState=e},useTransition:function(){var e=ly(!1),t=e[0];return e=w_.bind(null,e[1]),Mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Oe,i=Mn();if(_e){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),Je===null)throw Error(M(349));Bi&30||MP(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,uy(NP.bind(null,r,o,e),[e]),r.flags|=2048,Mc(9,DP.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Mn(),t=Je.identifierPrefix;if(_e){var n=er,r=Zn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=xc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=C_++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},T_={readContext:cn,useCallback:$P,useContext:cn,useEffect:ig,useImperativeHandle:UP,useInsertionEffect:FP,useLayoutEffect:BP,useMemo:VP,useReducer:hh,useRef:LP,useState:function(){return hh(Oc)},useDebugValue:og,useDeferredValue:function(e){var t=ln();return HP(t,Ve.memoizedState,e)},useTransition:function(){var e=hh(Oc)[0],t=ln().memoizedState;return[e,t]},useMutableSource:xP,useSyncExternalStore:OP,useId:WP,unstable_isNewReconciler:!1},A_={readContext:cn,useCallback:$P,useContext:cn,useEffect:ig,useImperativeHandle:UP,useInsertionEffect:FP,useLayoutEffect:BP,useMemo:VP,useReducer:fh,useRef:LP,useState:function(){return fh(Oc)},useDebugValue:og,useDeferredValue:function(e){var t=ln();return Ve===null?t.memoizedState=e:HP(t,Ve.memoizedState,e)},useTransition:function(){var e=fh(Oc)[0],t=ln().memoizedState;return[e,t]},useMutableSource:xP,useSyncExternalStore:OP,useId:WP,unstable_isNewReconciler:!1};function fn(e,t){if(e&&e.defaultProps){t=Me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function If(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Zu={isMounted:function(e){return(e=e._reactInternals)?Ki(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Vr(e),o=tr(r,i);o.payload=t,n!=null&&(o.callback=n),t=Ur(e,o,i),t!==null&&(Cn(t,e,i,r),Jl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tt(),i=Vr(e),o=tr(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Ur(e,o,i),t!==null&&(Cn(t,e,i,r),Jl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tt(),r=Vr(e),i=tr(n,r);i.tag=2,t!=null&&(i.callback=t),t=Ur(e,i,r),t!==null&&(Cn(t,e,r,n),Jl(t,e,r))}};function dy(e,t,n,r,i,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Tc(n,r)||!Tc(i,o):!0}function QP(e,t,n){var r=!1,i=Gr,o=t.contextType;return typeof o=="object"&&o!==null?o=cn(o):(i=Ot(t)?Li:Ct.current,r=t.contextTypes,o=(r=r!=null)?Oo(e,i):Gr),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zu,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function py(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Zu.enqueueReplaceState(t,t.state,null)}function _f(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Yv(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=cn(o):(o=Ot(t)?Li:Ct.current,i.context=Oo(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(If(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Zu.enqueueReplaceState(i,i.state,null),Eu(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function zo(e,t){try{var n="",r=t;do n+=eI(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function vh(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function kf(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var b_=typeof WeakMap=="function"?WeakMap:Map;function YP(e,t,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){_u||(_u=!0,Bf=r),kf(e,t)},n}function XP(e,t,n){n=tr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){kf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){kf(e,t),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function hy(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new b_;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=q_.bind(null,e,t,n),t.then(e,e))}function fy(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vy(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=tr(-1,1),t.tag=2,Ur(n,t,1))),n.lanes|=1),e)}var I_=lr.ReactCurrentOwner,kt=!1;function Pt(e,t,n,r){t.child=e===null?bP(t,null,n,r):Do(t,e.child,n,r)}function gy(e,t,n,r,i){n=n.render;var o=t.ref;return mo(t,i),r=ng(e,t,n,r,o,i),n=rg(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sr(e,t,i)):(_e&&n&&Vv(t),t.flags|=1,Pt(e,t,r,i),t.child)}function my(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!hg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,ZP(e,t,o,r,i)):(e=eu(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Tc,n(a,r)&&e.ref===t.ref)return sr(e,t,i)}return t.flags|=1,e=Hr(o,r),e.ref=t.ref,e.return=t,t.child=e}function ZP(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Tc(o,r)&&e.ref===t.ref)if(kt=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(kt=!0);else return t.lanes=e.lanes,sr(e,t,i)}return xf(e,t,n,r,i)}function eE(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(po,$t),$t|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(po,$t),$t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ee(po,$t),$t|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ee(po,$t),$t|=r;return Pt(e,t,i,n),t.child}function tE(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xf(e,t,n,r,i){var o=Ot(n)?Li:Ct.current;return o=Oo(t,o),mo(t,i),n=ng(e,t,n,r,o,i),r=rg(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,sr(e,t,i)):(_e&&r&&Vv(t),t.flags|=1,Pt(e,t,n,i),t.child)}function yy(e,t,n,r,i){if(Ot(n)){var o=!0;Su(t)}else o=!1;if(mo(t,i),t.stateNode===null)Yl(e,t),QP(t,n,r),_f(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=n.contextType;typeof l=="object"&&l!==null?l=cn(l):(l=Ot(n)?Li:Ct.current,l=Oo(t,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||c!==l)&&py(t,a,r,l),Pr=!1;var p=t.memoizedState;a.state=p,Eu(t,r,a,i),c=t.memoizedState,s!==r||p!==c||xt.current||Pr?(typeof u=="function"&&(If(t,n,u,r),c=t.memoizedState),(s=Pr||dy(t,n,s,r,p,c,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,_P(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:fn(t.type,s),a.props=l,d=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=cn(c):(c=Ot(n)?Li:Ct.current,c=Oo(t,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||p!==c)&&py(t,a,r,c),Pr=!1,p=t.memoizedState,a.state=p,Eu(t,r,a,i);var v=t.memoizedState;s!==d||p!==v||xt.current||Pr?(typeof h=="function"&&(If(t,n,h,r),v=t.memoizedState),(l=Pr||dy(t,n,l,r,p,v,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),a.props=r,a.state=v,a.context=c,r=l):(typeof a.componentDidUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Of(e,t,n,r,o,i)}function Of(e,t,n,r,i,o){tE(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&ry(t,n,!1),sr(e,t,o);r=t.stateNode,I_.current=t;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Do(t,e.child,null,o),t.child=Do(t,null,s,o)):Pt(e,t,s,o),t.memoizedState=r.state,i&&ry(t,n,!0),t.child}function nE(e){var t=e.stateNode;t.pendingContext?ny(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ny(e,t.context,!1),Xv(e,t.containerInfo)}function Sy(e,t,n,r,i){return Mo(),Wv(i),t.flags|=256,Pt(e,t,n,r),t.child}var Mf={dehydrated:null,treeContext:null,retryLane:0};function Df(e){return{baseLanes:e,cachePool:null,transitions:null}}function rE(e,t,n){var r=t.pendingProps,i=xe.current,o=!1,a=(t.flags&128)!==0,s;if((s=a)||(s=e!==null&&e.memoizedState===null?!1:(i&2)!==0),s?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ee(xe,i&1),e===null)return Af(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=nd(a,r,0,null),e=zi(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Df(n),t.memoizedState=Mf,e):sg(t,a));if(i=e.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return __(e,t,a,r,s,i,n);if(o){o=r.fallback,a=t.mode,i=e.child,s=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Hr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=Hr(s,o):(o=zi(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Df(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Mf,r}return o=e.child,e=o.sibling,r=Hr(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function sg(e,t){return t=nd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xl(e,t,n,r){return r!==null&&Wv(r),Do(t,e.child,null,n),e=sg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function __(e,t,n,r,i,o,a){if(n)return t.flags&256?(t.flags&=-257,r=vh(Error(M(422))),xl(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=nd({mode:"visible",children:r.children},i,0,null),o=zi(o,i,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Do(t,e.child,null,a),t.child.memoizedState=Df(a),t.memoizedState=Mf,o);if(!(t.mode&1))return xl(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(M(419)),r=vh(o,r,void 0),xl(e,t,a,r)}if(s=(a&e.childLanes)!==0,kt||s){if(r=Je,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,or(e,i),Cn(r,e,i,-1))}return pg(),r=vh(Error(M(421))),xl(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=U_.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Ht=qr(i.nextSibling),Wt=t,_e=!0,yn=null,e!==null&&(rn[on++]=Zn,rn[on++]=er,rn[on++]=Fi,Zn=e.id,er=e.overflow,Fi=t),t=sg(t,r.children),t.flags|=4096,t)}function Cy(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),bf(e.return,t,n)}function gh(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function iE(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Pt(e,t,r.children,n),r=xe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cy(e,n,t);else if(e.tag===19)Cy(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ee(xe,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Tu(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),gh(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Tu(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}gh(t,!0,n,null,o);break;case"together":gh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),qi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=Hr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function k_(e,t,n){switch(t.tag){case 3:nE(t),Mo();break;case 5:kP(t);break;case 1:Ot(t.type)&&Su(t);break;case 4:Xv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ee(Ru,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ee(xe,xe.current&1),t.flags|=128,null):n&t.child.childLanes?rE(e,t,n):(Ee(xe,xe.current&1),e=sr(e,t,n),e!==null?e.sibling:null);Ee(xe,xe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return iE(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ee(xe,xe.current),r)break;return null;case 22:case 23:return t.lanes=0,eE(e,t,n)}return sr(e,t,n)}var oE,Nf,sE,aE;oE=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nf=function(){};sE=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,_i(Bn.current);var o=null;switch(n){case"input":i=nf(e,i),r=nf(e,r),o=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),o=[];break;case"textarea":i=sf(e,i),r=sf(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=mu)}cf(n,r);var a;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(yc.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(yc.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Ae("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}};aE=function(e,t,n,r){n!==r&&(t.flags|=4)};function hs(e,t){if(!_e)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function x_(e,t,n){var r=t.pendingProps;switch(Hv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return Ot(t.type)&&yu(),ut(t),null;case 3:return r=t.stateNode,No(),be(xt),be(Ct),eg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(_l(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yn!==null&&($f(yn),yn=null))),Nf(e,t),ut(t),null;case 5:Zv(t);var i=_i(kc.current);if(n=t.type,e!==null&&t.stateNode!=null)sE(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return ut(t),null}if(e=_i(Bn.current),_l(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[jn]=t,r[Ic]=o,e=(t.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<oc.length;i++)Ae(oc[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":_m(r,o),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ae("invalid",r);break;case"textarea":xm(r,o),Ae("invalid",r)}cf(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Il(r.textContent,s,e),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Il(r.textContent,s,e),i=["children",""+s]):yc.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Cl(r),km(r,o,!0);break;case"textarea":Cl(r),Om(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=mu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=NR(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[jn]=t,e[Ic]=r,oE(e,t,!1,!1),t.stateNode=e;e:{switch(a=lf(n,r),n){case"dialog":Ae("cancel",e),Ae("close",e),i=r;break;case"iframe":case"object":case"embed":Ae("load",e),i=r;break;case"video":case"audio":for(i=0;i<oc.length;i++)Ae(oc[i],e);i=r;break;case"source":Ae("error",e),i=r;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),i=r;break;case"details":Ae("toggle",e),i=r;break;case"input":_m(e,r),i=nf(e,r),Ae("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Ae("invalid",e);break;case"textarea":xm(e,r),i=sf(e,r),Ae("invalid",e);break;default:i=r}cf(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?LR(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&zR(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Sc(e,c):typeof c=="number"&&Sc(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yc.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ae("scroll",e):c!=null&&kv(e,o,c,a))}switch(n){case"input":Cl(e),km(e,r,!1);break;case"textarea":Cl(e),Om(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Jr(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?ho(e,!!r.multiple,o,!1):r.defaultValue!=null&&ho(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=mu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)aE(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=_i(kc.current),_i(Bn.current),_l(t)){if(r=t.stateNode,n=t.memoizedProps,r[jn]=t,(o=r.nodeValue!==n)&&(e=Wt,e!==null))switch(e.tag){case 3:Il(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Il(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jn]=t,t.stateNode=r}return ut(t),null;case 13:if(be(xe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_e&&Ht!==null&&t.mode&1&&!(t.flags&128))TP(),Mo(),t.flags|=98560,o=!1;else if(o=_l(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(M(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[jn]=t}else Mo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),o=!1}else yn!==null&&($f(yn),yn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||xe.current&1?He===0&&(He=3):pg())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return No(),Nf(e,t),e===null&&Ac(t.stateNode.containerInfo),ut(t),null;case 10:return Gv(t.type._context),ut(t),null;case 17:return Ot(t.type)&&yu(),ut(t),null;case 19:if(be(xe),o=t.memoizedState,o===null)return ut(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)hs(o,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Tu(e),a!==null){for(t.flags|=128,hs(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee(xe,xe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Fe()>jo&&(t.flags|=128,r=!0,hs(o,!1),t.lanes=4194304)}else{if(!r)if(e=Tu(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),hs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!_e)return ut(t),null}else 2*Fe()-o.renderingStartTime>jo&&n!==1073741824&&(t.flags|=128,r=!0,hs(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Fe(),t.sibling=null,n=xe.current,Ee(xe,r?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return dg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$t&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function O_(e,t){switch(Hv(t),t.tag){case 1:return Ot(t.type)&&yu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return No(),be(xt),be(Ct),eg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zv(t),null;case 13:if(be(xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Mo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(xe),null;case 4:return No(),null;case 10:return Gv(t.type._context),null;case 22:case 23:return dg(),null;case 24:return null;default:return null}}var Ol=!1,yt=!1,M_=typeof WeakSet=="function"?WeakSet:Set,H=null;function uo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function zf(e,t,n){try{n()}catch(r){je(e,t,r)}}var wy=!1;function D_(e,t){if(Sf=fu,e=pP(),$v(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,c=-1,l=0,u=0,d=e,p=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(c=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++l===i&&(s=a),p===o&&++u===r&&(c=a),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}n=s===-1||c===-1?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cf={focusedElem:e,selectionRange:n},fu=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,y=v.memoizedState,f=t.stateNode,m=f.getSnapshotBeforeUpdate(t.elementType===t.type?g:fn(t.type,g),y);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(C){je(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return v=wy,wy=!1,v}function hc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&zf(t,n,o)}i=i.next}while(i!==r)}}function ed(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jf(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cE(e){var t=e.alternate;t!==null&&(e.alternate=null,cE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jn],delete t[Ic],delete t[Pf],delete t[g_],delete t[m_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lE(e){return e.tag===5||e.tag===3||e.tag===4}function Ry(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lf(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=mu));else if(r!==4&&(e=e.child,e!==null))for(Lf(e,t,n),e=e.sibling;e!==null;)Lf(e,t,n),e=e.sibling}function Ff(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ff(e,t,n),e=e.sibling;e!==null;)Ff(e,t,n),e=e.sibling}var tt=null,mn=!1;function gr(e,t,n){for(n=n.child;n!==null;)uE(e,t,n),n=n.sibling}function uE(e,t,n){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(Wu,n)}catch{}switch(n.tag){case 5:yt||uo(n,t);case 6:var r=tt,i=mn;tt=null,gr(e,t,n),tt=r,mn=i,tt!==null&&(mn?(e=tt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):tt.removeChild(n.stateNode));break;case 18:tt!==null&&(mn?(e=tt,n=n.stateNode,e.nodeType===8?lh(e.parentNode,n):e.nodeType===1&&lh(e,n),Pc(e)):lh(tt,n.stateNode));break;case 4:r=tt,i=mn,tt=n.stateNode.containerInfo,mn=!0,gr(e,t,n),tt=r,mn=i;break;case 0:case 11:case 14:case 15:if(!yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&zf(n,t,a),i=i.next}while(i!==r)}gr(e,t,n);break;case 1:if(!yt&&(uo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){je(n,t,s)}gr(e,t,n);break;case 21:gr(e,t,n);break;case 22:n.mode&1?(yt=(r=yt)||n.memoizedState!==null,gr(e,t,n),yt=r):gr(e,t,n);break;default:gr(e,t,n)}}function Py(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new M_),t.forEach(function(r){var i=$_.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function hn(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;s!==null;){switch(s.tag){case 5:tt=s.stateNode,mn=!1;break e;case 3:tt=s.stateNode.containerInfo,mn=!0;break e;case 4:tt=s.stateNode.containerInfo,mn=!0;break e}s=s.return}if(tt===null)throw Error(M(160));uE(o,a,i),tt=null,mn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){je(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)dE(t,e),t=t.sibling}function dE(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hn(t,e),xn(e),r&4){try{hc(3,e,e.return),ed(3,e)}catch(g){je(e,e.return,g)}try{hc(5,e,e.return)}catch(g){je(e,e.return,g)}}break;case 1:hn(t,e),xn(e),r&512&&n!==null&&uo(n,n.return);break;case 5:if(hn(t,e),xn(e),r&512&&n!==null&&uo(n,n.return),e.flags&32){var i=e.stateNode;try{Sc(i,"")}catch(g){je(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&MR(i,o),lf(s,a);var l=lf(s,o);for(a=0;a<c.length;a+=2){var u=c[a],d=c[a+1];u==="style"?LR(i,d):u==="dangerouslySetInnerHTML"?zR(i,d):u==="children"?Sc(i,d):kv(i,u,d,l)}switch(s){case"input":rf(i,o);break;case"textarea":DR(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?ho(i,!!o.multiple,h,!1):p!==!!o.multiple&&(o.defaultValue!=null?ho(i,!!o.multiple,o.defaultValue,!0):ho(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ic]=o}catch(g){je(e,e.return,g)}}break;case 6:if(hn(t,e),xn(e),r&4){if(e.stateNode===null)throw Error(M(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){je(e,e.return,g)}}break;case 3:if(hn(t,e),xn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pc(t.containerInfo)}catch(g){je(e,e.return,g)}break;case 4:hn(t,e),xn(e);break;case 13:hn(t,e),xn(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(lg=Fe())),r&4&&Py(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(yt=(l=yt)||u,hn(t,e),yt=l):hn(t,e),xn(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(H=e,u=e.child;u!==null;){for(d=H=u;H!==null;){switch(p=H,h=p.child,p.tag){case 0:case 11:case 14:case 15:hc(4,p,p.return);break;case 1:uo(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(g){je(r,n,g)}}break;case 5:uo(p,p.return);break;case 22:if(p.memoizedState!==null){Ty(d);continue}}h!==null?(h.return=p,H=h):Ty(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=jR("display",a))}catch(g){je(e,e.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){je(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:hn(t,e),xn(e),r&4&&Py(e);break;case 21:break;default:hn(t,e),xn(e)}}function xn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lE(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Sc(i,""),r.flags&=-33);var o=Ry(e);Ff(e,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=Ry(e);Lf(e,s,a);break;default:throw Error(M(161))}}catch(c){je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function N_(e,t,n){H=e,pE(e)}function pE(e,t,n){for(var r=(e.mode&1)!==0;H!==null;){var i=H,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ol;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||yt;s=Ol;var l=yt;if(Ol=a,(yt=c)&&!l)for(H=i;H!==null;)a=H,c=a.child,a.tag===22&&a.memoizedState!==null?Ay(i):c!==null?(c.return=a,H=c):Ay(i);for(;o!==null;)H=o,pE(o),o=o.sibling;H=i,Ol=s,yt=l}Ey(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,H=o):Ey(e)}}function Ey(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yt||ed(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!yt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:fn(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&cy(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cy(t,a,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Pc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}yt||t.flags&512&&jf(t)}catch(p){je(t,t.return,p)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function Ty(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function Ay(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ed(4,t)}catch(c){je(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){je(t,i,c)}}var o=t.return;try{jf(t)}catch(c){je(t,o,c)}break;case 5:var a=t.return;try{jf(t)}catch(c){je(t,a,c)}}}catch(c){je(t,t.return,c)}if(t===e){H=null;break}var s=t.sibling;if(s!==null){s.return=t.return,H=s;break}H=t.return}}var z_=Math.ceil,Iu=lr.ReactCurrentDispatcher,ag=lr.ReactCurrentOwner,an=lr.ReactCurrentBatchConfig,fe=0,Je=null,qe=null,rt=0,$t=0,po=ii(0),He=0,Dc=null,qi=0,td=0,cg=0,fc=null,_t=null,lg=0,jo=1/0,Yn=null,_u=!1,Bf=null,$r=null,Ml=!1,Dr=null,ku=0,vc=0,qf=null,Xl=-1,Zl=0;function Tt(){return fe&6?Fe():Xl!==-1?Xl:Xl=Fe()}function Vr(e){return e.mode&1?fe&2&&rt!==0?rt&-rt:S_.transition!==null?(Zl===0&&(Zl=QR()),Zl):(e=ye,e!==0||(e=window.event,e=e===void 0?16:rP(e.type)),e):1}function Cn(e,t,n,r){if(50<vc)throw vc=0,qf=null,Error(M(185));Kc(e,n,r),(!(fe&2)||e!==Je)&&(e===Je&&(!(fe&2)&&(td|=n),He===4&&br(e,rt)),Mt(e,r),n===1&&fe===0&&!(t.mode&1)&&(jo=Fe()+500,Yu&&oi()))}function Mt(e,t){var n=e.callbackNode;SI(e,t);var r=hu(e,e===Je?rt:0);if(r===0)n!==null&&Nm(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Nm(n),t===1)e.tag===0?y_(by.bind(null,e)):RP(by.bind(null,e)),f_(function(){!(fe&6)&&oi()}),n=null;else{switch(YR(r)){case 1:n=Nv;break;case 4:n=JR;break;case 16:n=pu;break;case 536870912:n=GR;break;default:n=pu}n=CE(n,hE.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hE(e,t){if(Xl=-1,Zl=0,fe&6)throw Error(M(327));var n=e.callbackNode;if(yo()&&e.callbackNode!==n)return null;var r=hu(e,e===Je?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xu(e,r);else{t=r;var i=fe;fe|=2;var o=vE();(Je!==e||rt!==t)&&(Yn=null,jo=Fe()+500,Ni(e,t));do try{F_();break}catch(s){fE(e,s)}while(!0);Jv(),Iu.current=o,fe=i,qe!==null?t=0:(Je=null,rt=0,t=He)}if(t!==0){if(t===2&&(i=ff(e),i!==0&&(r=i,t=Uf(e,i))),t===1)throw n=Dc,Ni(e,0),br(e,r),Mt(e,Fe()),n;if(t===6)br(e,r);else{if(i=e.current.alternate,!(r&30)&&!j_(i)&&(t=xu(e,r),t===2&&(o=ff(e),o!==0&&(r=o,t=Uf(e,o))),t===1))throw n=Dc,Ni(e,0),br(e,r),Mt(e,Fe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:Ai(e,_t,Yn);break;case 3:if(br(e,r),(r&130023424)===r&&(t=lg+500-Fe(),10<t)){if(hu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Tt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Rf(Ai.bind(null,e,_t,Yn),t);break}Ai(e,_t,Yn);break;case 4:if(br(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Sn(r);o=1<<a,a=t[a],a>i&&(i=a),r&=~o}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z_(r/1960))-r,10<r){e.timeoutHandle=Rf(Ai.bind(null,e,_t,Yn),r);break}Ai(e,_t,Yn);break;case 5:Ai(e,_t,Yn);break;default:throw Error(M(329))}}}return Mt(e,Fe()),e.callbackNode===n?hE.bind(null,e):null}function Uf(e,t){var n=fc;return e.current.memoizedState.isDehydrated&&(Ni(e,t).flags|=256),e=xu(e,t),e!==2&&(t=_t,_t=n,t!==null&&$f(t)),e}function $f(e){_t===null?_t=e:_t.push.apply(_t,e)}function j_(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!wn(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function br(e,t){for(t&=~cg,t&=~td,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sn(t),r=1<<n;e[n]=-1,t&=~r}}function by(e){if(fe&6)throw Error(M(327));yo();var t=hu(e,0);if(!(t&1))return Mt(e,Fe()),null;var n=xu(e,t);if(e.tag!==0&&n===2){var r=ff(e);r!==0&&(t=r,n=Uf(e,r))}if(n===1)throw n=Dc,Ni(e,0),br(e,t),Mt(e,Fe()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ai(e,_t,Yn),Mt(e,Fe()),null}function ug(e,t){var n=fe;fe|=1;try{return e(t)}finally{fe=n,fe===0&&(jo=Fe()+500,Yu&&oi())}}function Ui(e){Dr!==null&&Dr.tag===0&&!(fe&6)&&yo();var t=fe;fe|=1;var n=an.transition,r=ye;try{if(an.transition=null,ye=1,e)return e()}finally{ye=r,an.transition=n,fe=t,!(fe&6)&&oi()}}function dg(){$t=po.current,be(po)}function Ni(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,h_(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Hv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yu();break;case 3:No(),be(xt),be(Ct),eg();break;case 5:Zv(r);break;case 4:No();break;case 13:be(xe);break;case 19:be(xe);break;case 10:Gv(r.type._context);break;case 22:case 23:dg()}n=n.return}if(Je=e,qe=e=Hr(e.current,null),rt=$t=t,He=0,Dc=null,cg=td=qi=0,_t=fc=null,Ii!==null){for(t=0;t<Ii.length;t++)if(n=Ii[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Ii=null}return e}function fE(e,t){do{var n=qe;try{if(Jv(),Gl.current=bu,Au){for(var r=Oe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Au=!1}if(Bi=0,Ke=Ve=Oe=null,pc=!1,xc=0,ag.current=null,n===null||n.return===null){He=1,Dc=t,qe=null;break}e:{var o=e,a=n.return,s=n,c=t;if(t=rt,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=fy(a);if(h!==null){h.flags&=-257,vy(h,a,s,o,t),h.mode&1&&hy(o,l,t),t=h,c=l;var v=t.updateQueue;if(v===null){var g=new Set;g.add(c),t.updateQueue=g}else v.add(c);break e}else{if(!(t&1)){hy(o,l,t),pg();break e}c=Error(M(426))}}else if(_e&&s.mode&1){var y=fy(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),vy(y,a,s,o,t),Wv(zo(c,s));break e}}o=c=zo(c,s),He!==4&&(He=2),fc===null?fc=[o]:fc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var f=YP(o,c,t);ay(o,f);break e;case 1:s=c;var m=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($r===null||!$r.has(S)))){o.flags|=65536,t&=-t,o.lanes|=t;var C=XP(o,s,t);ay(o,C);break e}}o=o.return}while(o!==null)}mE(n)}catch(R){t=R,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function vE(){var e=Iu.current;return Iu.current=bu,e===null?bu:e}function pg(){(He===0||He===3||He===2)&&(He=4),Je===null||!(qi&268435455)&&!(td&268435455)||br(Je,rt)}function xu(e,t){var n=fe;fe|=2;var r=vE();(Je!==e||rt!==t)&&(Yn=null,Ni(e,t));do try{L_();break}catch(i){fE(e,i)}while(!0);if(Jv(),fe=n,Iu.current=r,qe!==null)throw Error(M(261));return Je=null,rt=0,He}function L_(){for(;qe!==null;)gE(qe)}function F_(){for(;qe!==null&&!uI();)gE(qe)}function gE(e){var t=SE(e.alternate,e,$t);e.memoizedProps=e.pendingProps,t===null?mE(e):qe=t,ag.current=null}function mE(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=O_(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,qe=null;return}}else if(n=x_(n,t,$t),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);He===0&&(He=5)}function Ai(e,t,n){var r=ye,i=an.transition;try{an.transition=null,ye=1,B_(e,t,n,r)}finally{an.transition=i,ye=r}return null}function B_(e,t,n,r){do yo();while(Dr!==null);if(fe&6)throw Error(M(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(CI(e,o),e===Je&&(qe=Je=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ml||(Ml=!0,CE(pu,function(){return yo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=an.transition,an.transition=null;var a=ye;ye=1;var s=fe;fe|=4,ag.current=null,D_(e,n),dE(n,e),s_(Cf),fu=!!Sf,Cf=Sf=null,e.current=n,N_(n),dI(),fe=s,ye=a,an.transition=o}else e.current=n;if(Ml&&(Ml=!1,Dr=e,ku=i),o=e.pendingLanes,o===0&&($r=null),fI(n.stateNode),Mt(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_u)throw _u=!1,e=Bf,Bf=null,e;return ku&1&&e.tag!==0&&yo(),o=e.pendingLanes,o&1?e===qf?vc++:(vc=0,qf=e):vc=0,oi(),null}function yo(){if(Dr!==null){var e=YR(ku),t=an.transition,n=ye;try{if(an.transition=null,ye=16>e?16:e,Dr===null)var r=!1;else{if(e=Dr,Dr=null,ku=0,fe&6)throw Error(M(331));var i=fe;for(fe|=4,H=e.current;H!==null;){var o=H,a=o.child;if(H.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(H=l;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:hc(8,u,o)}var d=u.child;if(d!==null)d.return=u,H=d;else for(;H!==null;){u=H;var p=u.sibling,h=u.return;if(cE(u),u===l){H=null;break}if(p!==null){p.return=h,H=p;break}H=h}}}var v=o.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}H=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,H=a;else e:for(;H!==null;){if(o=H,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hc(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,H=f;break e}H=o.return}}var m=e.current;for(H=m;H!==null;){a=H;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,H=S;else e:for(a=m;H!==null;){if(s=H,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:ed(9,s)}}catch(R){je(s,s.return,R)}if(s===a){H=null;break e}var C=s.sibling;if(C!==null){C.return=s.return,H=C;break e}H=s.return}}if(fe=i,oi(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(Wu,e)}catch{}r=!0}return r}finally{ye=n,an.transition=t}}return!1}function Iy(e,t,n){t=zo(n,t),t=YP(e,t,1),e=Ur(e,t,1),t=Tt(),e!==null&&(Kc(e,1,t),Mt(e,t))}function je(e,t,n){if(e.tag===3)Iy(e,e,n);else for(;t!==null;){if(t.tag===3){Iy(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){e=zo(n,e),e=XP(t,e,1),t=Ur(t,e,1),e=Tt(),t!==null&&(Kc(t,1,e),Mt(t,e));break}}t=t.return}}function q_(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tt(),e.pingedLanes|=e.suspendedLanes&n,Je===e&&(rt&n)===n&&(He===4||He===3&&(rt&130023424)===rt&&500>Fe()-lg?Ni(e,0):cg|=n),Mt(e,t)}function yE(e,t){t===0&&(e.mode&1?(t=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):t=1);var n=Tt();e=or(e,t),e!==null&&(Kc(e,t,n),Mt(e,n))}function U_(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),yE(e,n)}function $_(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),yE(e,n)}var SE;SE=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xt.current)kt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return kt=!1,k_(e,t,n);kt=!!(e.flags&131072)}else kt=!1,_e&&t.flags&1048576&&PP(t,wu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Yl(e,t),e=t.pendingProps;var i=Oo(t,Ct.current);mo(t,n),i=ng(null,t,r,e,i,n);var o=rg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ot(r)?(o=!0,Su(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Yv(t),i.updater=Zu,t.stateNode=i,i._reactInternals=t,_f(t,r,e,n),t=Of(null,t,r,!0,o,n)):(t.tag=0,_e&&o&&Vv(t),Pt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Yl(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=H_(r),e=fn(r,e),i){case 0:t=xf(null,t,r,e,n);break e;case 1:t=yy(null,t,r,e,n);break e;case 11:t=gy(null,t,r,e,n);break e;case 14:t=my(null,t,r,fn(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fn(r,i),xf(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fn(r,i),yy(e,t,r,i,n);case 3:e:{if(nE(t),e===null)throw Error(M(387));r=t.pendingProps,o=t.memoizedState,i=o.element,_P(e,t),Eu(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=zo(Error(M(423)),t),t=Sy(e,t,r,n,i);break e}else if(r!==i){i=zo(Error(M(424)),t),t=Sy(e,t,r,n,i);break e}else for(Ht=qr(t.stateNode.containerInfo.firstChild),Wt=t,_e=!0,yn=null,n=bP(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mo(),r===i){t=sr(e,t,n);break e}Pt(e,t,r,n)}t=t.child}return t;case 5:return kP(t),e===null&&Af(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,a=i.children,wf(r,i)?a=null:o!==null&&wf(r,o)&&(t.flags|=32),tE(e,t),Pt(e,t,a,n),t.child;case 6:return e===null&&Af(t),null;case 13:return rE(e,t,n);case 4:return Xv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Do(t,null,r,n):Pt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fn(r,i),gy(e,t,r,i,n);case 7:return Pt(e,t,t.pendingProps,n),t.child;case 8:return Pt(e,t,t.pendingProps.children,n),t.child;case 12:return Pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ee(Ru,r._currentValue),r._currentValue=a,o!==null)if(wn(o.value,a)){if(o.children===i.children&&!xt.current){t=sr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=tr(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),bf(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(M(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),bf(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Pt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,mo(t,n),i=cn(i),r=r(i),t.flags|=1,Pt(e,t,r,n),t.child;case 14:return r=t.type,i=fn(r,t.pendingProps),i=fn(r.type,i),my(e,t,r,i,n);case 15:return ZP(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:fn(r,i),Yl(e,t),t.tag=1,Ot(r)?(e=!0,Su(t)):e=!1,mo(t,n),QP(t,r,i),_f(t,r,i,n),Of(null,t,r,!0,e,n);case 19:return iE(e,t,n);case 22:return eE(e,t,n)}throw Error(M(156,t.tag))};function CE(e,t){return KR(e,t)}function V_(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,t,n,r){return new V_(e,t,n,r)}function hg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function H_(e){if(typeof e=="function")return hg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ov)return 11;if(e===Mv)return 14}return 2}function Hr(e,t){var n=e.alternate;return n===null?(n=sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eu(e,t,n,r,i,o){var a=2;if(r=e,typeof e=="function")hg(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case to:return zi(n.children,i,o,t);case xv:a=8,i|=8;break;case Xh:return e=sn(12,n,t,i|2),e.elementType=Xh,e.lanes=o,e;case Zh:return e=sn(13,n,t,i),e.elementType=Zh,e.lanes=o,e;case ef:return e=sn(19,n,t,i),e.elementType=ef,e.lanes=o,e;case kR:return nd(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case IR:a=10;break e;case _R:a=9;break e;case Ov:a=11;break e;case Mv:a=14;break e;case Rr:a=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=sn(a,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function zi(e,t,n,r){return e=sn(7,e,r,t),e.lanes=n,e}function nd(e,t,n,r){return e=sn(22,e,r,t),e.elementType=kR,e.lanes=n,e.stateNode={isHidden:!1},e}function mh(e,t,n){return e=sn(6,e,null,t),e.lanes=n,e}function yh(e,t,n){return t=sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function W_(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xp(0),this.expirationTimes=Xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fg(e,t,n,r,i,o,a,s,c){return e=new W_(e,t,n,s,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=sn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yv(o),e}function K_(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wE(e){if(!e)return Gr;e=e._reactInternals;e:{if(Ki(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ot(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(Ot(n))return wP(e,n,t)}return t}function RE(e,t,n,r,i,o,a,s,c){return e=fg(n,r,!0,e,i,o,a,s,c),e.context=wE(null),n=e.current,r=Tt(),i=Vr(n),o=tr(r,i),o.callback=t??null,Ur(n,o,i),e.current.lanes=i,Kc(e,i,r),Mt(e,r),e}function rd(e,t,n,r){var i=t.current,o=Tt(),a=Vr(i);return n=wE(n),t.context===null?t.context=n:t.pendingContext=n,t=tr(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ur(i,t,a),e!==null&&(Cn(e,i,a,o),Jl(e,i,a)),a}function Ou(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _y(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vg(e,t){_y(e,t),(e=e.alternate)&&_y(e,t)}function J_(){return null}var PE=typeof reportError=="function"?reportError:function(e){console.error(e)};function gg(e){this._internalRoot=e}id.prototype.render=gg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));rd(e,t,null,null)};id.prototype.unmount=gg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ui(function(){rd(null,e,null,null)}),t[ir]=null}};function id(e){this._internalRoot=e}id.prototype.unstable_scheduleHydration=function(e){if(e){var t=eP();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ar.length&&t!==0&&t<Ar[n].priority;n++);Ar.splice(n,0,e),n===0&&nP(e)}};function mg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function od(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ky(){}function G_(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Ou(a);o.call(l)}}var a=RE(t,r,e,0,null,!1,!1,"",ky);return e._reactRootContainer=a,e[ir]=a.current,Ac(e.nodeType===8?e.parentNode:e),Ui(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var l=Ou(c);s.call(l)}}var c=fg(e,0,!1,null,null,!1,!1,"",ky);return e._reactRootContainer=c,e[ir]=c.current,Ac(e.nodeType===8?e.parentNode:e),Ui(function(){rd(t,c,n,r)}),c}function sd(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=Ou(a);s.call(c)}}rd(t,a,e,i)}else a=G_(n,t,e,i,r);return Ou(a)}XR=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ic(t.pendingLanes);n!==0&&(zv(t,n|1),Mt(t,Fe()),!(fe&6)&&(jo=Fe()+500,oi()))}break;case 13:Ui(function(){var r=or(e,1);if(r!==null){var i=Tt();Cn(r,e,1,i)}}),vg(e,1)}};jv=function(e){if(e.tag===13){var t=or(e,134217728);if(t!==null){var n=Tt();Cn(t,e,134217728,n)}vg(e,134217728)}};ZR=function(e){if(e.tag===13){var t=Vr(e),n=or(e,t);if(n!==null){var r=Tt();Cn(n,e,t,r)}vg(e,t)}};eP=function(){return ye};tP=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};df=function(e,t,n){switch(t){case"input":if(rf(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Qu(r);if(!i)throw Error(M(90));OR(r),rf(r,i)}}}break;case"textarea":DR(e,n);break;case"select":t=n.value,t!=null&&ho(e,!!n.multiple,t,!1)}};qR=ug;UR=Ui;var Q_={usingClientEntryPoint:!1,Events:[Gc,oo,Qu,FR,BR,ug]},fs={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y_={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=HR(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||J_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{Wu=Dl.inject(Y_),Fn=Dl}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q_;Gt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mg(t))throw Error(M(200));return K_(e,t,null,n)};Gt.createRoot=function(e,t){if(!mg(e))throw Error(M(299));var n=!1,r="",i=PE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=fg(e,1,!1,null,null,n,!1,r,i),e[ir]=t.current,Ac(e.nodeType===8?e.parentNode:e),new gg(t)};Gt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=HR(t),e=e===null?null:e.stateNode,e};Gt.flushSync=function(e){return Ui(e)};Gt.hydrate=function(e,t,n){if(!od(t))throw Error(M(200));return sd(null,e,t,!0,n)};Gt.hydrateRoot=function(e,t,n){if(!mg(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=PE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=RE(t,null,e,1,n??null,i,!1,o,a),e[ir]=t.current,Ac(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new id(t)};Gt.render=function(e,t,n){if(!od(t))throw Error(M(200));return sd(null,e,t,!1,n)};Gt.unmountComponentAtNode=function(e){if(!od(e))throw Error(M(40));return e._reactRootContainer?(Ui(function(){sd(null,null,e,!1,function(){e._reactRootContainer=null,e[ir]=null})}),!0):!1};Gt.unstable_batchedUpdates=ug;Gt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!od(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return sd(e,t,n,!1,r)};Gt.version="18.3.1-next-f1338f8080-20240426";function EE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EE)}catch(e){console.error(e)}}EE(),ER.exports=Gt;var Yc=ER.exports;const TE=dR(Yc);var AE,xy=Yc;AE=xy.createRoot,xy.hydrateRoot;const X_=1,Z_=1e6;let Sh=0;function ek(){return Sh=(Sh+1)%Number.MAX_SAFE_INTEGER,Sh.toString()}const Ch=new Map,Oy=e=>{if(Ch.has(e))return;const t=setTimeout(()=>{Ch.delete(e),gc({type:"REMOVE_TOAST",toastId:e})},Z_);Ch.set(e,t)},tk=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,X_)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?Oy(n):e.toasts.forEach(r=>{Oy(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},tu=[];let nu={toasts:[]};function gc(e){nu=tk(nu,e),tu.forEach(t=>{t(nu)})}function nk({...e}){const t=ek(),n=i=>gc({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>gc({type:"DISMISS_TOAST",toastId:t});return gc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function bE(){const[e,t]=w.useState(nu);return w.useEffect(()=>(tu.push(t),()=>{const n=tu.indexOf(t);n>-1&&tu.splice(n,1)}),[e]),{...e,toast:nk,dismiss:n=>gc({type:"DISMISS_TOAST",toastId:n})}}function pe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function rk(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function IE(...e){return t=>e.forEach(n=>rk(n,t))}function Ue(...e){return w.useCallback(IE(...e),e)}function ik(e,t=[]){let n=[];function r(o,a){const s=w.createContext(a),c=n.length;n=[...n,a];function l(d){const{scope:p,children:h,...v}=d,g=(p==null?void 0:p[e][c])||s,y=w.useMemo(()=>v,Object.values(v));return P.jsx(g.Provider,{value:y,children:h})}function u(d,p){const h=(p==null?void 0:p[e][c])||s,v=w.useContext(h);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return l.displayName=o+"Provider",[l,u]}const i=()=>{const o=n.map(a=>w.createContext(a));return function(s){const c=(s==null?void 0:s[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return i.scopeName=e,[r,ok(i,...t)]}function ok(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...s,...d}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var Nc=w.forwardRef((e,t)=>{const{children:n,...r}=e,i=w.Children.toArray(n),o=i.find(sk);if(o){const a=o.props.children,s=i.map(c=>c===o?w.Children.count(a)>1?w.Children.only(null):w.isValidElement(a)?a.props.children:null:c);return P.jsx(Vf,{...r,ref:t,children:w.isValidElement(a)?w.cloneElement(a,void 0,s):null})}return P.jsx(Vf,{...r,ref:t,children:n})});Nc.displayName="Slot";var Vf=w.forwardRef((e,t)=>{const{children:n,...r}=e;if(w.isValidElement(n)){const i=ck(n);return w.cloneElement(n,{...ak(r,n.props),ref:t?IE(t,i):i})}return w.Children.count(n)>1?w.Children.only(null):null});Vf.displayName="SlotClone";var _E=({children:e})=>P.jsx(P.Fragment,{children:e});function sk(e){return w.isValidElement(e)&&e.type===_E}function ak(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...s)=>{o(...s),i(...s)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function ck(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function yg(e){const t=e+"CollectionProvider",[n,r]=ik(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=h=>{const{scope:v,children:g}=h,y=F.useRef(null),f=F.useRef(new Map).current;return P.jsx(i,{scope:v,itemMap:f,collectionRef:y,children:g})};a.displayName=t;const s=e+"CollectionSlot",c=F.forwardRef((h,v)=>{const{scope:g,children:y}=h,f=o(s,g),m=Ue(v,f.collectionRef);return P.jsx(Nc,{ref:m,children:y})});c.displayName=s;const l=e+"CollectionItemSlot",u="data-radix-collection-item",d=F.forwardRef((h,v)=>{const{scope:g,children:y,...f}=h,m=F.useRef(null),S=Ue(v,m),C=o(l,g);return F.useEffect(()=>(C.itemMap.set(m,{ref:m,...f}),()=>void C.itemMap.delete(m))),P.jsx(Nc,{[u]:"",ref:S,children:y})});d.displayName=l;function p(h){const v=o(e+"CollectionConsumer",h);return F.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const f=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((C,R)=>f.indexOf(C.ref.current)-f.indexOf(R.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:a,Slot:c,ItemSlot:d},p,r]}function Ko(e,t=[]){let n=[];function r(o,a){const s=w.createContext(a),c=n.length;n=[...n,a];const l=d=>{var f;const{scope:p,children:h,...v}=d,g=((f=p==null?void 0:p[e])==null?void 0:f[c])||s,y=w.useMemo(()=>v,Object.values(v));return P.jsx(g.Provider,{value:y,children:h})};l.displayName=o+"Provider";function u(d,p){var g;const h=((g=p==null?void 0:p[e])==null?void 0:g[c])||s,v=w.useContext(h);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,u]}const i=()=>{const o=n.map(a=>w.createContext(a));return function(s){const c=(s==null?void 0:s[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return i.scopeName=e,[r,lk(i,...t)]}function lk(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...s,...d}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var uk=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],we=uk.reduce((e,t)=>{const n=w.forwardRef((r,i)=>{const{asChild:o,...a}=r,s=o?Nc:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),P.jsx(s,{...a,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function kE(e,t){e&&Yc.flushSync(()=>e.dispatchEvent(t))}function Rn(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function dk(e,t=globalThis==null?void 0:globalThis.document){const n=Rn(e);w.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var pk="DismissableLayer",Hf="dismissableLayer.update",hk="dismissableLayer.pointerDownOutside",fk="dismissableLayer.focusOutside",My,xE=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Sg=w.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...c}=e,l=w.useContext(xE),[u,d]=w.useState(null),p=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=w.useState({}),v=Ue(t,A=>d(A)),g=Array.from(l.layers),[y]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),f=g.indexOf(y),m=u?g.indexOf(u):-1,S=l.layersWithOutsidePointerEventsDisabled.size>0,C=m>=f,R=gk(A=>{const E=A.target,k=[...l.branches].some(_=>_.contains(E));!C||k||(i==null||i(A),a==null||a(A),A.defaultPrevented||s==null||s())},p),T=mk(A=>{const E=A.target;[...l.branches].some(_=>_.contains(E))||(o==null||o(A),a==null||a(A),A.defaultPrevented||s==null||s())},p);return dk(A=>{m===l.layers.size-1&&(r==null||r(A),!A.defaultPrevented&&s&&(A.preventDefault(),s()))},p),w.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(My=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),Dy(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=My)}},[u,p,n,l]),w.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),Dy())},[u,l]),w.useEffect(()=>{const A=()=>h({});return document.addEventListener(Hf,A),()=>document.removeEventListener(Hf,A)},[]),P.jsx(we.div,{...c,ref:v,style:{pointerEvents:S?C?"auto":"none":void 0,...e.style},onFocusCapture:pe(e.onFocusCapture,T.onFocusCapture),onBlurCapture:pe(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:pe(e.onPointerDownCapture,R.onPointerDownCapture)})});Sg.displayName=pk;var vk="DismissableLayerBranch",OE=w.forwardRef((e,t)=>{const n=w.useContext(xE),r=w.useRef(null),i=Ue(t,r);return w.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),P.jsx(we.div,{...e,ref:i})});OE.displayName=vk;function gk(e,t=globalThis==null?void 0:globalThis.document){const n=Rn(e),r=w.useRef(!1),i=w.useRef(()=>{});return w.useEffect(()=>{const o=s=>{if(s.target&&!r.current){let c=function(){ME(hk,n,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function mk(e,t=globalThis==null?void 0:globalThis.document){const n=Rn(e),r=w.useRef(!1);return w.useEffect(()=>{const i=o=>{o.target&&!r.current&&ME(fk,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Dy(){const e=new CustomEvent(Hf);document.dispatchEvent(e)}function ME(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?kE(i,o):i.dispatchEvent(o)}var yk=Sg,Sk=OE,Qr=globalThis!=null&&globalThis.document?w.useLayoutEffect:()=>{},Ck="Portal",DE=w.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[i,o]=w.useState(!1);Qr(()=>o(!0),[]);const a=n||i&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return a?TE.createPortal(P.jsx(we.div,{...r,ref:t}),a):null});DE.displayName=Ck;function wk(e,t){return w.useReducer((n,r)=>t[n][r]??n,e)}var Xc=e=>{const{present:t,children:n}=e,r=Rk(t),i=typeof n=="function"?n({present:r.isPresent}):w.Children.only(n),o=Ue(r.ref,Pk(i));return typeof n=="function"||r.isPresent?w.cloneElement(i,{ref:o}):null};Xc.displayName="Presence";function Rk(e){const[t,n]=w.useState(),r=w.useRef({}),i=w.useRef(e),o=w.useRef("none"),a=e?"mounted":"unmounted",[s,c]=wk(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const l=Nl(r.current);o.current=s==="mounted"?l:"none"},[s]),Qr(()=>{const l=r.current,u=i.current;if(u!==e){const p=o.current,h=Nl(l);e?c("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&p!==h?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Qr(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,d=h=>{const g=Nl(r.current).includes(h.animationName);if(h.target===t&&g&&(c("ANIMATION_END"),!i.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},p=h=>{h.target===t&&(o.current=Nl(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:w.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function Nl(e){return(e==null?void 0:e.animationName)||"none"}function Pk(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Zc({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=Ek({defaultProp:t,onChange:n}),o=e!==void 0,a=o?e:r,s=Rn(n),c=w.useCallback(l=>{if(o){const d=typeof l=="function"?l(e):l;d!==e&&s(d)}else i(l)},[o,e,i,s]);return[a,c]}function Ek({defaultProp:e,onChange:t}){const n=w.useState(e),[r]=n,i=w.useRef(r),o=Rn(t);return w.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var Tk="VisuallyHidden",ad=w.forwardRef((e,t)=>P.jsx(we.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));ad.displayName=Tk;var Ak=ad,Cg="ToastProvider",[wg,bk,Ik]=yg("Toast"),[NE,Iq]=Ko("Toast",[Ik]),[_k,cd]=NE(Cg),zE=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=e,[s,c]=w.useState(null),[l,u]=w.useState(0),d=w.useRef(!1),p=w.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cg}\`. Expected non-empty \`string\`.`),P.jsx(wg.Provider,{scope:t,children:P.jsx(_k,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:l,viewport:s,onViewportChange:c,onToastAdd:w.useCallback(()=>u(h=>h+1),[]),onToastRemove:w.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:p,children:a})})};zE.displayName=Cg;var jE="ToastViewport",kk=["F8"],Wf="toast.viewportPause",Kf="toast.viewportResume",LE=w.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=kk,label:i="Notifications ({hotkey})",...o}=e,a=cd(jE,n),s=bk(n),c=w.useRef(null),l=w.useRef(null),u=w.useRef(null),d=w.useRef(null),p=Ue(t,d,a.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=a.toastCount>0;w.useEffect(()=>{const y=f=>{var S;r.length!==0&&r.every(C=>f[C]||f.code===C)&&((S=d.current)==null||S.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),w.useEffect(()=>{const y=c.current,f=d.current;if(v&&y&&f){const m=()=>{if(!a.isClosePausedRef.current){const T=new CustomEvent(Wf);f.dispatchEvent(T),a.isClosePausedRef.current=!0}},S=()=>{if(a.isClosePausedRef.current){const T=new CustomEvent(Kf);f.dispatchEvent(T),a.isClosePausedRef.current=!1}},C=T=>{!y.contains(T.relatedTarget)&&S()},R=()=>{y.contains(document.activeElement)||S()};return y.addEventListener("focusin",m),y.addEventListener("focusout",C),y.addEventListener("pointermove",m),y.addEventListener("pointerleave",R),window.addEventListener("blur",m),window.addEventListener("focus",S),()=>{y.removeEventListener("focusin",m),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",m),y.removeEventListener("pointerleave",R),window.removeEventListener("blur",m),window.removeEventListener("focus",S)}}},[v,a.isClosePausedRef]);const g=w.useCallback(({tabbingDirection:y})=>{const m=s().map(S=>{const C=S.ref.current,R=[C,...$k(C)];return y==="forwards"?R:R.reverse()});return(y==="forwards"?m.reverse():m).flat()},[s]);return w.useEffect(()=>{const y=d.current;if(y){const f=m=>{var R,T,A;const S=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!S){const E=document.activeElement,k=m.shiftKey;if(m.target===y&&k){(R=l.current)==null||R.focus();return}const B=g({tabbingDirection:k?"backwards":"forwards"}),$=B.findIndex(j=>j===E);wh(B.slice($+1))?m.preventDefault():k?(T=l.current)==null||T.focus():(A=u.current)==null||A.focus()}};return y.addEventListener("keydown",f),()=>y.removeEventListener("keydown",f)}},[s,g]),P.jsxs(Sk,{ref:c,role:"region","aria-label":i.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&P.jsx(Jf,{ref:l,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});wh(y)}}),P.jsx(wg.Slot,{scope:n,children:P.jsx(we.ol,{tabIndex:-1,...o,ref:p})}),v&&P.jsx(Jf,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});wh(y)}})]})});LE.displayName=jE;var FE="ToastFocusProxy",Jf=w.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,o=cd(FE,n);return P.jsx(ad,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:a=>{var l;const s=a.relatedTarget;!((l=o.viewport)!=null&&l.contains(s))&&r()}})});Jf.displayName=FE;var ld="Toast",xk="toast.swipeStart",Ok="toast.swipeMove",Mk="toast.swipeCancel",Dk="toast.swipeEnd",BE=w.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...a}=e,[s=!0,c]=Zc({prop:r,defaultProp:i,onChange:o});return P.jsx(Xc,{present:n||s,children:P.jsx(jk,{open:s,...a,ref:t,onClose:()=>c(!1),onPause:Rn(e.onPause),onResume:Rn(e.onResume),onSwipeStart:pe(e.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(e.onSwipeMove,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:pe(e.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(e.onSwipeEnd,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});BE.displayName=ld;var[Nk,zk]=NE(ld,{onClose(){}}),jk=w.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:p,onSwipeEnd:h,...v}=e,g=cd(ld,n),[y,f]=w.useState(null),m=Ue(t,j=>f(j)),S=w.useRef(null),C=w.useRef(null),R=i||g.duration,T=w.useRef(0),A=w.useRef(R),E=w.useRef(0),{onToastAdd:k,onToastRemove:_}=g,N=Rn(()=>{var L;(y==null?void 0:y.contains(document.activeElement))&&((L=g.viewport)==null||L.focus()),a()}),B=w.useCallback(j=>{!j||j===1/0||(window.clearTimeout(E.current),T.current=new Date().getTime(),E.current=window.setTimeout(N,j))},[N]);w.useEffect(()=>{const j=g.viewport;if(j){const L=()=>{B(A.current),l==null||l()},V=()=>{const Y=new Date().getTime()-T.current;A.current=A.current-Y,window.clearTimeout(E.current),c==null||c()};return j.addEventListener(Wf,V),j.addEventListener(Kf,L),()=>{j.removeEventListener(Wf,V),j.removeEventListener(Kf,L)}}},[g.viewport,R,c,l,B]),w.useEffect(()=>{o&&!g.isClosePausedRef.current&&B(R)},[o,R,g.isClosePausedRef,B]),w.useEffect(()=>(k(),()=>_()),[k,_]);const $=w.useMemo(()=>y?KE(y):null,[y]);return g.viewport?P.jsxs(P.Fragment,{children:[$&&P.jsx(Lk,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),P.jsx(Nk,{scope:n,onClose:N,children:Yc.createPortal(P.jsx(wg.ItemSlot,{scope:n,children:P.jsx(yk,{asChild:!0,onEscapeKeyDown:pe(s,()=>{g.isFocusedToastEscapeKeyDownRef.current||N(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:P.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":g.swipeDirection,...v,ref:m,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:pe(e.onKeyDown,j=>{j.key==="Escape"&&(s==null||s(j.nativeEvent),j.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:pe(e.onPointerDown,j=>{j.button===0&&(S.current={x:j.clientX,y:j.clientY})}),onPointerMove:pe(e.onPointerMove,j=>{if(!S.current)return;const L=j.clientX-S.current.x,V=j.clientY-S.current.y,Y=!!C.current,b=["left","right"].includes(g.swipeDirection),D=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,K=b?D(0,L):0,U=b?0:D(0,V),G=j.pointerType==="touch"?10:2,oe={x:K,y:U},Se={originalEvent:j,delta:oe};Y?(C.current=oe,zl(Ok,d,Se,{discrete:!1})):Ny(oe,g.swipeDirection,G)?(C.current=oe,zl(xk,u,Se,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(L)>G||Math.abs(V)>G)&&(S.current=null)}),onPointerUp:pe(e.onPointerUp,j=>{const L=C.current,V=j.target;if(V.hasPointerCapture(j.pointerId)&&V.releasePointerCapture(j.pointerId),C.current=null,S.current=null,L){const Y=j.currentTarget,b={originalEvent:j,delta:L};Ny(L,g.swipeDirection,g.swipeThreshold)?zl(Dk,h,b,{discrete:!0}):zl(Mk,p,b,{discrete:!0}),Y.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Lk=e=>{const{__scopeToast:t,children:n,...r}=e,i=cd(ld,t),[o,a]=w.useState(!1),[s,c]=w.useState(!1);return qk(()=>a(!0)),w.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),s?null:P.jsx(DE,{asChild:!0,children:P.jsx(ad,{...r,children:o&&P.jsxs(P.Fragment,{children:[i.label," ",n]})})})},Fk="ToastTitle",qE=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return P.jsx(we.div,{...r,ref:t})});qE.displayName=Fk;var Bk="ToastDescription",UE=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return P.jsx(we.div,{...r,ref:t})});UE.displayName=Bk;var $E="ToastAction",VE=w.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?P.jsx(WE,{altText:n,asChild:!0,children:P.jsx(Rg,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${$E}\`. Expected non-empty \`string\`.`),null)});VE.displayName=$E;var HE="ToastClose",Rg=w.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=zk(HE,n);return P.jsx(WE,{asChild:!0,children:P.jsx(we.button,{type:"button",...r,ref:t,onClick:pe(e.onClick,i.onClose)})})});Rg.displayName=HE;var WE=w.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return P.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function KE(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Uk(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...KE(r))}}),t}function zl(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?kE(i,o):i.dispatchEvent(o)}var Ny=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),o=r>i;return t==="left"||t==="right"?o&&r>n:!o&&i>n};function qk(e=()=>{}){const t=Rn(e);Qr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Uk(e){return e.nodeType===e.ELEMENT_NODE}function $k(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wh(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Vk=zE,JE=LE,GE=BE,QE=qE,YE=UE,XE=VE,ZE=Rg;function e0(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=e0(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function t0(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=e0(e))&&(r&&(r+=" "),r+=t);return r}const zy=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,jy=t0,Pg=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return jy(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=t,a=Object.keys(i).map(l=>{const u=n==null?void 0:n[l],d=o==null?void 0:o[l];if(u===null)return null;const p=zy(u)||zy(d);return i[l][p]}),s=n&&Object.entries(n).reduce((l,u)=>{let[d,p]=u;return p===void 0||(l[d]=p),l},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((l,u)=>{let{class:d,className:p,...h}=u;return Object.entries(h).every(v=>{let[g,y]=v;return Array.isArray(y)?y.includes({...o,...s}[g]):{...o,...s}[g]===y})?[...l,d,p]:l},[]);return jy(e,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n0=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},c)=>w.createElement("svg",{ref:c,...Wk,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:n0("lucide",i),...s},[...a.map(([l,u])=>w.createElement(l,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=(e,t)=>{const n=w.forwardRef(({className:r,...i},o)=>w.createElement(Kk,{ref:o,iconNode:t,className:n0(`lucide-${Hk(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=Un("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=Un("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=Un("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=Un("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=Un("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=Un("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=Un("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=Un("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Un("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Un("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Eg="-",rx=e=>{const t=ox(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:a=>{const s=a.split(Eg);return s[0]===""&&s.length!==1&&s.shift(),r0(s,t)||ix(a)},getConflictingClassGroupIds:(a,s)=>{const c=n[a]||[];return s&&r[a]?[...c,...r[a]]:c}}},r0=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?r0(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const o=e.join(Eg);return(a=t.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},Fy=/^\[(.+)\]$/,ix=e=>{if(Fy.test(e)){const t=Fy.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ox=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return ax(Object.entries(e.classGroups),n).forEach(([o,a])=>{Gf(a,r,o,t)}),r},Gf=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const o=i===""?t:By(t,i);o.classGroupId=n;return}if(typeof i=="function"){if(sx(i)){Gf(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,a])=>{Gf(a,By(t,o),n,r)})})},By=(e,t)=>{let n=e;return t.split(Eg).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},sx=e=>e.isThemeGetter,ax=(e,t)=>t?e.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[t+a,s])):o);return[n,i]}):e,cx=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(o,a)=>{n.set(o,a),t++,t>e&&(t=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set(o,a){n.has(o)?n.set(o,a):i(o,a)}}},i0="!",lx=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],o=t.length,a=s=>{const c=[];let l=0,u=0,d;for(let y=0;y<s.length;y++){let f=s[y];if(l===0){if(f===i&&(r||s.slice(y,y+o)===t)){c.push(s.slice(u,y)),u=y+o;continue}if(f==="/"){d=y;continue}}f==="["?l++:f==="]"&&l--}const p=c.length===0?s:s.substring(u),h=p.startsWith(i0),v=h?p.substring(1):p,g=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:h,baseClassName:v,maybePostfixModifierPosition:g}};return n?s=>n({className:s,parseClassName:a}):a},ux=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},dx=e=>({cache:cx(e.cacheSize),parseClassName:lx(e),...rx(e)}),px=/\s+/,hx=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,o=[],a=e.trim().split(px);let s="";for(let c=a.length-1;c>=0;c-=1){const l=a[c],{modifiers:u,hasImportantModifier:d,baseClassName:p,maybePostfixModifierPosition:h}=n(l);let v=!!h,g=r(v?p.substring(0,h):p);if(!g){if(!v){s=l+(s.length>0?" "+s:s);continue}if(g=r(p),!g){s=l+(s.length>0?" "+s:s);continue}v=!1}const y=ux(u).join(":"),f=d?y+i0:y,m=f+g;if(o.includes(m))continue;o.push(m);const S=i(g,v);for(let C=0;C<S.length;++C){const R=S[C];o.push(f+R)}s=l+(s.length>0?" "+s:s)}return s};function fx(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=o0(t))&&(r&&(r+=" "),r+=n);return r}const o0=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=o0(e[r]))&&(n&&(n+=" "),n+=t);return n};function vx(e,...t){let n,r,i,o=a;function a(c){const l=t.reduce((u,d)=>d(u),e());return n=dx(l),r=n.cache.get,i=n.cache.set,o=s,s(c)}function s(c){const l=r(c);if(l)return l;const u=hx(c,n);return i(c,u),u}return function(){return o(fx.apply(null,arguments))}}const Te=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},s0=/^\[(?:([a-z-]+):)?(.+)\]$/i,gx=/^\d+\/\d+$/,mx=new Set(["px","full","screen"]),yx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Sx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Cx=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,wx=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Rx=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hn=e=>So(e)||mx.has(e)||gx.test(e),mr=e=>Jo(e,"length",kx),So=e=>!!e&&!Number.isNaN(Number(e)),Rh=e=>Jo(e,"number",So),vs=e=>!!e&&Number.isInteger(Number(e)),Px=e=>e.endsWith("%")&&So(e.slice(0,-1)),se=e=>s0.test(e),yr=e=>yx.test(e),Ex=new Set(["length","size","percentage"]),Tx=e=>Jo(e,Ex,a0),Ax=e=>Jo(e,"position",a0),bx=new Set(["image","url"]),Ix=e=>Jo(e,bx,Ox),_x=e=>Jo(e,"",xx),gs=()=>!0,Jo=(e,t,n)=>{const r=s0.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},kx=e=>Sx.test(e)&&!Cx.test(e),a0=()=>!1,xx=e=>wx.test(e),Ox=e=>Rx.test(e),Mx=()=>{const e=Te("colors"),t=Te("spacing"),n=Te("blur"),r=Te("brightness"),i=Te("borderColor"),o=Te("borderRadius"),a=Te("borderSpacing"),s=Te("borderWidth"),c=Te("contrast"),l=Te("grayscale"),u=Te("hueRotate"),d=Te("invert"),p=Te("gap"),h=Te("gradientColorStops"),v=Te("gradientColorStopPositions"),g=Te("inset"),y=Te("margin"),f=Te("opacity"),m=Te("padding"),S=Te("saturate"),C=Te("scale"),R=Te("sepia"),T=Te("skew"),A=Te("space"),E=Te("translate"),k=()=>["auto","contain","none"],_=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",se,t],B=()=>[se,t],$=()=>["",Hn,mr],j=()=>["auto",So,se],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],b=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",se],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[So,se];return{cacheSize:500,separator:":",theme:{colors:[gs],spacing:[Hn,mr],blur:["none","",yr,se],brightness:U(),borderColor:[e],borderRadius:["none","","full",yr,se],borderSpacing:B(),borderWidth:$(),contrast:U(),grayscale:D(),hueRotate:U(),invert:D(),gap:B(),gradientColorStops:[e],gradientColorStopPositions:[Px,mr],inset:N(),margin:N(),opacity:U(),padding:B(),saturate:U(),scale:U(),sepia:D(),skew:U(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",se]}],container:["container"],columns:[{columns:[yr]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),se]}],overflow:[{overflow:_()}],"overflow-x":[{"overflow-x":_()}],"overflow-y":[{"overflow-y":_()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",vs,se]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",se]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",vs,se]}],"grid-cols":[{"grid-cols":[gs]}],"col-start-end":[{col:["auto",{span:["full",vs,se]},se]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[gs]}],"row-start-end":[{row:["auto",{span:[vs,se]},se]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",se]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...b()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...b(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...b(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",se,t]}],"min-w":[{"min-w":[se,t,"min","max","fit"]}],"max-w":[{"max-w":[se,t,"none","full","min","max","fit","prose",{screen:[yr]},yr]}],h:[{h:[se,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[se,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[se,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[se,t,"auto","min","max","fit"]}],"font-size":[{text:["base",yr,mr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Rh]}],"font-family":[{font:[gs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",se]}],"line-clamp":[{"line-clamp":["none",So,Rh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hn,se]}],"list-image":[{"list-image":["none",se]}],"list-style-type":[{list:["none","disc","decimal",se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hn,mr]}],"underline-offset":[{"underline-offset":["auto",Hn,se]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),Ax]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Tx]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ix]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:V()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Hn,se]}],"outline-w":[{outline:[Hn,mr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[Hn,mr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",yr,_x]}],"shadow-color":[{shadow:[gs]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",yr,se]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[S]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",se]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",se]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[vs,se]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",se]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hn,mr,Rh]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Dx=vx(Mx);function Le(...e){return Dx(t0(e))}const Nx=Vk,c0=w.forwardRef(({className:e,...t},n)=>P.jsx(JE,{ref:n,className:Le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));c0.displayName=JE.displayName;const zx=Pg("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),l0=w.forwardRef(({className:e,variant:t,...n},r)=>P.jsx(GE,{ref:r,className:Le(zx({variant:t}),e),...n}));l0.displayName=GE.displayName;const jx=w.forwardRef(({className:e,...t},n)=>P.jsx(XE,{ref:n,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));jx.displayName=XE.displayName;const u0=w.forwardRef(({className:e,...t},n)=>P.jsx(ZE,{ref:n,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:P.jsx(nx,{className:"h-4 w-4"})}));u0.displayName=ZE.displayName;const d0=w.forwardRef(({className:e,...t},n)=>P.jsx(QE,{ref:n,className:Le("text-sm font-semibold",e),...t}));d0.displayName=QE.displayName;const p0=w.forwardRef(({className:e,...t},n)=>P.jsx(YE,{ref:n,className:Le("text-sm opacity-90",e),...t}));p0.displayName=YE.displayName;function Lx(){const{toasts:e}=bE();return P.jsxs(Nx,{children:[e.map(function({id:t,title:n,description:r,action:i,...o}){return P.jsxs(l0,{...o,children:[P.jsxs("div",{className:"grid gap-1",children:[n&&P.jsx(d0,{children:n}),r&&P.jsx(p0,{children:r})]}),i,P.jsx(u0,{})]},t)}),P.jsx(c0,{})]})}var qy=["light","dark"],Fx="(prefers-color-scheme: dark)",Bx=w.createContext(void 0),qx={setTheme:e=>{},themes:[]},Ux=()=>{var e;return(e=w.useContext(Bx))!=null?e:qx};w.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:a,attrs:s,nonce:c})=>{let l=o==="system",u=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,d=i?qy.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(v,g=!1,y=!0)=>{let f=a?a[v]:v,m=g?v+"|| ''":`'${f}'`,S="";return i&&y&&!g&&qy.includes(v)&&(S+=`d.style.colorScheme = '${v}';`),n==="class"?g||f?S+=`c.add(${m})`:S+="null":f&&(S+=`d[s](n,${m})`),S},h=e?`!function(){${u}${p(e)}}()`:r?`!function(){try{${u}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${l})){var t='${Fx}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}${l?"":"else{"+p(o,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${t}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${p(a?"x[e]":"e",!0)}}else{${p(o,!1,!1)};}${d}}catch(t){}}();`;return w.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:h}})});var $x=e=>{switch(e){case"success":return Wx;case"info":return Jx;case"warning":return Kx;case"error":return Gx;default:return null}},Vx=Array(12).fill(0),Hx=({visible:e})=>F.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},F.createElement("div",{className:"sonner-spinner"},Vx.map((t,n)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),Wx=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Kx=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Jx=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Gx=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Qx=()=>{let[e,t]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Qf=1,Yx=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Qf++,o=this.toasts.find(s=>s.id===i),a=e.dismissible===void 0?!0:e.dismissible;return o?this.toasts=this.toasts.map(s=>s.id===i?(this.publish({...s,...e,id:i,title:n}),{...s,...e,id:i,dismissible:a,title:n}):s):this.addToast({title:n,...r,dismissible:a,id:i}),i},this.dismiss=e=>(e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),i=n!==void 0;return r.then(async o=>{if(Zx(o)&&!o.ok){i=!1;let a=typeof t.error=="function"?await t.error(`HTTP error! status: ${o.status}`):t.error,s=typeof t.description=="function"?await t.description(`HTTP error! status: ${o.status}`):t.description;this.create({id:n,type:"error",message:a,description:s})}else if(t.success!==void 0){i=!1;let a=typeof t.success=="function"?await t.success(o):t.success,s=typeof t.description=="function"?await t.description(o):t.description;this.create({id:n,type:"success",message:a,description:s})}}).catch(async o=>{if(t.error!==void 0){i=!1;let a=typeof t.error=="function"?await t.error(o):t.error,s=typeof t.description=="function"?await t.description(o):t.description;this.create({id:n,type:"error",message:a,description:s})}}).finally(()=>{var o;i&&(this.dismiss(n),n=void 0),(o=t.finally)==null||o.call(t)}),n},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Qf++;return this.create({jsx:e(n),id:n,...t}),n},this.subscribers=[],this.toasts=[]}},Ut=new Yx,Xx=(e,t)=>{let n=(t==null?void 0:t.id)||Qf++;return Ut.addToast({title:e,...t,id:n}),n},Zx=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",eO=Xx,tO=()=>Ut.toasts;Object.assign(eO,{success:Ut.success,info:Ut.info,warning:Ut.warning,error:Ut.error,custom:Ut.custom,message:Ut.message,promise:Ut.promise,dismiss:Ut.dismiss,loading:Ut.loading},{getHistory:tO});function nO(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}nO(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function jl(e){return e.label!==void 0}var rO=3,iO="32px",oO=4e3,sO=356,aO=14,cO=20,lO=200;function uO(...e){return e.filter(Boolean).join(" ")}var dO=e=>{var t,n,r,i,o,a,s,c,l,u;let{invert:d,toast:p,unstyled:h,interacting:v,setHeights:g,visibleToasts:y,heights:f,index:m,toasts:S,expanded:C,removeToast:R,defaultRichColors:T,closeButton:A,style:E,cancelButtonStyle:k,actionButtonStyle:_,className:N="",descriptionClassName:B="",duration:$,position:j,gap:L,loadingIcon:V,expandByDefault:Y,classNames:b,icons:D,closeButtonAriaLabel:K="Close toast",pauseWhenPageIsHidden:U,cn:G}=e,[oe,Se]=F.useState(!1),[Ye,he]=F.useState(!1),[Xe,jt]=F.useState(!1),[Lt,Ft]=F.useState(!1),[pr,_n]=F.useState(0),[dn,Vn]=F.useState(0),hr=F.useRef(null),Xt=F.useRef(null),li=m===0,q=m+1<=y,z=p.type,J=p.dismissible!==!1,ee=p.className||"",ge=p.descriptionClassName||"",ve=F.useMemo(()=>f.findIndex(ne=>ne.toastId===p.id)||0,[f,p.id]),Re=F.useMemo(()=>{var ne;return(ne=p.closeButton)!=null?ne:A},[p.closeButton,A]),We=F.useMemo(()=>p.duration||$||oO,[p.duration,$]),$e=F.useRef(0),pn=F.useRef(0),fr=F.useRef(0),vr=F.useRef(null),[vl,is]=j.split("-"),Ze=F.useMemo(()=>f.reduce((ne,Pe,Ce)=>Ce>=ve?ne:ne+Pe.height,0),[f,ve]),gl=Qx(),Vp=p.invert||d,os=z==="loading";pn.current=F.useMemo(()=>ve*L+Ze,[ve,Ze]),F.useEffect(()=>{Se(!0)},[]),F.useLayoutEffect(()=>{if(!oe)return;let ne=Xt.current,Pe=ne.style.height;ne.style.height="auto";let Ce=ne.getBoundingClientRect().height;ne.style.height=Pe,Vn(Ce),g(Zt=>Zt.find(en=>en.toastId===p.id)?Zt.map(en=>en.toastId===p.id?{...en,height:Ce}:en):[{toastId:p.id,height:Ce,position:p.position},...Zt])},[oe,p.title,p.description,g,p.id]);let kn=F.useCallback(()=>{he(!0),_n(pn.current),g(ne=>ne.filter(Pe=>Pe.toastId!==p.id)),setTimeout(()=>{R(p)},lO)},[p,R,g,pn]);F.useEffect(()=>{if(p.promise&&z==="loading"||p.duration===1/0||p.type==="loading")return;let ne,Pe=We;return C||v||U&&gl?(()=>{if(fr.current<$e.current){let Ce=new Date().getTime()-$e.current;Pe=Pe-Ce}fr.current=new Date().getTime()})():Pe!==1/0&&($e.current=new Date().getTime(),ne=setTimeout(()=>{var Ce;(Ce=p.onAutoClose)==null||Ce.call(p,p),kn()},Pe)),()=>clearTimeout(ne)},[C,v,Y,p,We,kn,p.promise,z,U,gl]),F.useEffect(()=>{let ne=Xt.current;if(ne){let Pe=ne.getBoundingClientRect().height;return Vn(Pe),g(Ce=>[{toastId:p.id,height:Pe,position:p.position},...Ce]),()=>g(Ce=>Ce.filter(Zt=>Zt.toastId!==p.id))}},[g,p.id]),F.useEffect(()=>{p.delete&&kn()},[kn,p.delete]);function Hp(){return D!=null&&D.loading?F.createElement("div",{className:"sonner-loader","data-visible":z==="loading"},D.loading):V?F.createElement("div",{className:"sonner-loader","data-visible":z==="loading"},V):F.createElement(Hx,{visible:z==="loading"})}return F.createElement("li",{"aria-live":p.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:Xt,className:G(N,ee,b==null?void 0:b.toast,(t=p==null?void 0:p.classNames)==null?void 0:t.toast,b==null?void 0:b.default,b==null?void 0:b[z],(n=p==null?void 0:p.classNames)==null?void 0:n[z]),"data-sonner-toast":"","data-rich-colors":(r=p.richColors)!=null?r:T,"data-styled":!(p.jsx||p.unstyled||h),"data-mounted":oe,"data-promise":!!p.promise,"data-removed":Ye,"data-visible":q,"data-y-position":vl,"data-x-position":is,"data-index":m,"data-front":li,"data-swiping":Xe,"data-dismissible":J,"data-type":z,"data-invert":Vp,"data-swipe-out":Lt,"data-expanded":!!(C||Y&&oe),style:{"--index":m,"--toasts-before":m,"--z-index":S.length-m,"--offset":`${Ye?pr:pn.current}px`,"--initial-height":Y?"auto":`${dn}px`,...E,...p.style},onPointerDown:ne=>{os||!J||(hr.current=new Date,_n(pn.current),ne.target.setPointerCapture(ne.pointerId),ne.target.tagName!=="BUTTON"&&(jt(!0),vr.current={x:ne.clientX,y:ne.clientY}))},onPointerUp:()=>{var ne,Pe,Ce,Zt;if(Lt||!J)return;vr.current=null;let en=Number(((ne=Xt.current)==null?void 0:ne.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Qi=new Date().getTime()-((Pe=hr.current)==null?void 0:Pe.getTime()),ss=Math.abs(en)/Qi;if(Math.abs(en)>=cO||ss>.11){_n(pn.current),(Ce=p.onDismiss)==null||Ce.call(p,p),kn(),Ft(!0);return}(Zt=Xt.current)==null||Zt.style.setProperty("--swipe-amount","0px"),jt(!1)},onPointerMove:ne=>{var Pe;if(!vr.current||!J)return;let Ce=ne.clientY-vr.current.y,Zt=ne.clientX-vr.current.x,en=(vl==="top"?Math.min:Math.max)(0,Ce),Qi=ne.pointerType==="touch"?10:2;Math.abs(en)>Qi?(Pe=Xt.current)==null||Pe.style.setProperty("--swipe-amount",`${Ce}px`):Math.abs(Zt)>Qi&&(vr.current=null)}},Re&&!p.jsx?F.createElement("button",{"aria-label":K,"data-disabled":os,"data-close-button":!0,onClick:os||!J?()=>{}:()=>{var ne;kn(),(ne=p.onDismiss)==null||ne.call(p,p)},className:G(b==null?void 0:b.closeButton,(i=p==null?void 0:p.classNames)==null?void 0:i.closeButton)},F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,p.jsx||F.isValidElement(p.title)?p.jsx||p.title:F.createElement(F.Fragment,null,z||p.icon||p.promise?F.createElement("div",{"data-icon":"",className:G(b==null?void 0:b.icon,(o=p==null?void 0:p.classNames)==null?void 0:o.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Hp():null,p.type!=="loading"?p.icon||(D==null?void 0:D[z])||$x(z):null):null,F.createElement("div",{"data-content":"",className:G(b==null?void 0:b.content,(a=p==null?void 0:p.classNames)==null?void 0:a.content)},F.createElement("div",{"data-title":"",className:G(b==null?void 0:b.title,(s=p==null?void 0:p.classNames)==null?void 0:s.title)},p.title),p.description?F.createElement("div",{"data-description":"",className:G(B,ge,b==null?void 0:b.description,(c=p==null?void 0:p.classNames)==null?void 0:c.description)},p.description):null),F.isValidElement(p.cancel)?p.cancel:p.cancel&&jl(p.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||k,onClick:ne=>{var Pe,Ce;jl(p.cancel)&&J&&((Ce=(Pe=p.cancel).onClick)==null||Ce.call(Pe,ne),kn())},className:G(b==null?void 0:b.cancelButton,(l=p==null?void 0:p.classNames)==null?void 0:l.cancelButton)},p.cancel.label):null,F.isValidElement(p.action)?p.action:p.action&&jl(p.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||_,onClick:ne=>{var Pe,Ce;jl(p.action)&&(ne.defaultPrevented||((Ce=(Pe=p.action).onClick)==null||Ce.call(Pe,ne),kn()))},className:G(b==null?void 0:b.actionButton,(u=p==null?void 0:p.classNames)==null?void 0:u.actionButton)},p.action.label):null))};function Uy(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}var pO=e=>{let{invert:t,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:i,closeButton:o,className:a,offset:s,theme:c="light",richColors:l,duration:u,style:d,visibleToasts:p=rO,toastOptions:h,dir:v=Uy(),gap:g=aO,loadingIcon:y,icons:f,containerAriaLabel:m="Notifications",pauseWhenPageIsHidden:S,cn:C=uO}=e,[R,T]=F.useState([]),A=F.useMemo(()=>Array.from(new Set([n].concat(R.filter(U=>U.position).map(U=>U.position)))),[R,n]),[E,k]=F.useState([]),[_,N]=F.useState(!1),[B,$]=F.useState(!1),[j,L]=F.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),V=F.useRef(null),Y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=F.useRef(null),D=F.useRef(!1),K=F.useCallback(U=>{var G;(G=R.find(oe=>oe.id===U.id))!=null&&G.delete||Ut.dismiss(U.id),T(oe=>oe.filter(({id:Se})=>Se!==U.id))},[R]);return F.useEffect(()=>Ut.subscribe(U=>{if(U.dismiss){T(G=>G.map(oe=>oe.id===U.id?{...oe,delete:!0}:oe));return}setTimeout(()=>{TE.flushSync(()=>{T(G=>{let oe=G.findIndex(Se=>Se.id===U.id);return oe!==-1?[...G.slice(0,oe),{...G[oe],...U},...G.slice(oe+1)]:[U,...G]})})})}),[]),F.useEffect(()=>{if(c!=="system"){L(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?L("dark"):L("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:U})=>{L(U?"dark":"light")})},[c]),F.useEffect(()=>{R.length<=1&&N(!1)},[R]),F.useEffect(()=>{let U=G=>{var oe,Se;r.every(Ye=>G[Ye]||G.code===Ye)&&(N(!0),(oe=V.current)==null||oe.focus()),G.code==="Escape"&&(document.activeElement===V.current||(Se=V.current)!=null&&Se.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",U),()=>document.removeEventListener("keydown",U)},[r]),F.useEffect(()=>{if(V.current)return()=>{b.current&&(b.current.focus({preventScroll:!0}),b.current=null,D.current=!1)}},[V.current]),R.length?F.createElement("section",{"aria-label":`${m} ${Y}`,tabIndex:-1},A.map((U,G)=>{var oe;let[Se,Ye]=U.split("-");return F.createElement("ol",{key:U,dir:v==="auto"?Uy():v,tabIndex:-1,ref:V,className:a,"data-sonner-toaster":!0,"data-theme":j,"data-y-position":Se,"data-x-position":Ye,style:{"--front-toast-height":`${((oe=E[0])==null?void 0:oe.height)||0}px`,"--offset":typeof s=="number"?`${s}px`:s||iO,"--width":`${sO}px`,"--gap":`${g}px`,...d},onBlur:he=>{D.current&&!he.currentTarget.contains(he.relatedTarget)&&(D.current=!1,b.current&&(b.current.focus({preventScroll:!0}),b.current=null))},onFocus:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||D.current||(D.current=!0,b.current=he.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{B||N(!1)},onPointerDown:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},R.filter(he=>!he.position&&G===0||he.position===U).map((he,Xe)=>{var jt,Lt;return F.createElement(dO,{key:he.id,icons:f,index:Xe,toast:he,defaultRichColors:l,duration:(jt=h==null?void 0:h.duration)!=null?jt:u,className:h==null?void 0:h.className,descriptionClassName:h==null?void 0:h.descriptionClassName,invert:t,visibleToasts:p,closeButton:(Lt=h==null?void 0:h.closeButton)!=null?Lt:o,interacting:B,position:U,style:h==null?void 0:h.style,unstyled:h==null?void 0:h.unstyled,classNames:h==null?void 0:h.classNames,cancelButtonStyle:h==null?void 0:h.cancelButtonStyle,actionButtonStyle:h==null?void 0:h.actionButtonStyle,removeToast:K,toasts:R.filter(Ft=>Ft.position==he.position),heights:E.filter(Ft=>Ft.position==he.position),setHeights:k,expandByDefault:i,gap:g,loadingIcon:y,expanded:_,pauseWhenPageIsHidden:S,cn:C})}))})):null};const hO=({...e})=>{const{theme:t="system"}=Ux();return P.jsx(pO,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var fO=RR.useId||(()=>{}),vO=0;function gO(e){const[t,n]=w.useState(fO());return Qr(()=>{n(r=>r??String(vO++))},[e]),t?`radix-${t}`:""}const mO=["top","right","bottom","left"],Yr=Math.min,Vt=Math.max,Mu=Math.round,Ll=Math.floor,Xr=e=>({x:e,y:e}),yO={left:"right",right:"left",bottom:"top",top:"bottom"},SO={start:"end",end:"start"};function Yf(e,t,n){return Vt(e,Yr(t,n))}function ar(e,t){return typeof e=="function"?e(t):e}function cr(e){return e.split("-")[0]}function Go(e){return e.split("-")[1]}function Tg(e){return e==="x"?"y":"x"}function Ag(e){return e==="y"?"height":"width"}function Zr(e){return["top","bottom"].includes(cr(e))?"y":"x"}function bg(e){return Tg(Zr(e))}function CO(e,t,n){n===void 0&&(n=!1);const r=Go(e),i=bg(e),o=Ag(i);let a=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Du(a)),[a,Du(a)]}function wO(e){const t=Du(e);return[Xf(e),t,Xf(t)]}function Xf(e){return e.replace(/start|end/g,t=>SO[t])}function RO(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:a;default:return[]}}function PO(e,t,n,r){const i=Go(e);let o=RO(cr(e),n==="start",r);return i&&(o=o.map(a=>a+"-"+i),t&&(o=o.concat(o.map(Xf)))),o}function Du(e){return e.replace(/left|right|bottom|top/g,t=>yO[t])}function EO(e){return{top:0,right:0,bottom:0,left:0,...e}}function h0(e){return typeof e!="number"?EO(e):{top:e,right:e,bottom:e,left:e}}function Nu(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function $y(e,t,n){let{reference:r,floating:i}=e;const o=Zr(t),a=bg(t),s=Ag(a),c=cr(t),l=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[s]/2-i[s]/2;let h;switch(c){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(Go(t)){case"start":h[a]-=p*(n&&l?-1:1);break;case"end":h[a]+=p*(n&&l?-1:1);break}return h}const TO=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let l=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=$y(l,r,c),p=r,h={},v=0;for(let g=0;g<s.length;g++){const{name:y,fn:f}=s[g],{x:m,y:S,data:C,reset:R}=await f({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:h,rects:l,platform:a,elements:{reference:e,floating:t}});u=m??u,d=S??d,h={...h,[y]:{...h[y],...C}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(l=R.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:i}):R.rects),{x:u,y:d}=$y(l,p,c)),g=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:h}};async function zc(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=ar(t,e),v=h0(h),y=s[p?d==="floating"?"reference":"floating":d],f=Nu(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),m=d==="floating"?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),C=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},R=Nu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:m,offsetParent:S,strategy:c}):m);return{top:(f.top-R.top+v.top)/C.y,bottom:(R.bottom-f.bottom+v.bottom)/C.y,left:(f.left-R.left+v.left)/C.x,right:(R.right-f.right+v.right)/C.x}}const AO=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:c}=t,{element:l,padding:u=0}=ar(e,t)||{};if(l==null)return{};const d=h0(u),p={x:n,y:r},h=bg(i),v=Ag(h),g=await a.getDimensions(l),y=h==="y",f=y?"top":"left",m=y?"bottom":"right",S=y?"clientHeight":"clientWidth",C=o.reference[v]+o.reference[h]-p[h]-o.floating[v],R=p[h]-o.reference[h],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let A=T?T[S]:0;(!A||!await(a.isElement==null?void 0:a.isElement(T)))&&(A=s.floating[S]||o.floating[v]);const E=C/2-R/2,k=A/2-g[v]/2-1,_=Yr(d[f],k),N=Yr(d[m],k),B=_,$=A-g[v]-N,j=A/2-g[v]/2+E,L=Yf(B,j,$),V=!c.arrow&&Go(i)!=null&&j!==L&&o.reference[v]/2-(j<B?_:N)-g[v]/2<0,Y=V?j<B?j-B:j-$:0;return{[h]:p[h]+Y,data:{[h]:L,centerOffset:j-L-Y,...V&&{alignmentOffset:Y}},reset:V}}}),bO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=ar(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const f=cr(i),m=Zr(s),S=cr(s)===s,C=await(c.isRTL==null?void 0:c.isRTL(l.floating)),R=p||(S||!g?[Du(s)]:wO(s)),T=v!=="none";!p&&T&&R.push(...PO(s,g,v,C));const A=[s,...R],E=await zc(t,y),k=[];let _=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&k.push(E[f]),d){const j=CO(i,a,C);k.push(E[j[0]],E[j[1]])}if(_=[..._,{placement:i,overflows:k}],!k.every(j=>j<=0)){var N,B;const j=(((N=o.flip)==null?void 0:N.index)||0)+1,L=A[j];if(L)return{data:{index:j,overflows:_},reset:{placement:L}};let V=(B=_.filter(Y=>Y.overflows[0]<=0).sort((Y,b)=>Y.overflows[1]-b.overflows[1])[0])==null?void 0:B.placement;if(!V)switch(h){case"bestFit":{var $;const Y=($=_.filter(b=>{if(T){const D=Zr(b.placement);return D===m||D==="y"}return!0}).map(b=>[b.placement,b.overflows.filter(D=>D>0).reduce((D,K)=>D+K,0)]).sort((b,D)=>b[1]-D[1])[0])==null?void 0:$[0];Y&&(V=Y);break}case"initialPlacement":V=s;break}if(i!==V)return{reset:{placement:V}}}return{}}}};function Vy(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Hy(e){return mO.some(t=>e[t]>=0)}const IO=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=ar(e,t);switch(r){case"referenceHidden":{const o=await zc(t,{...i,elementContext:"reference"}),a=Vy(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Hy(a)}}}case"escaped":{const o=await zc(t,{...i,altBoundary:!0}),a=Vy(o,n.floating);return{data:{escapedOffsets:a,escaped:Hy(a)}}}default:return{}}}}};async function _O(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),a=cr(n),s=Go(n),c=Zr(n)==="y",l=["left","top"].includes(a)?-1:1,u=o&&c?-1:1,d=ar(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof v=="number"&&(h=s==="end"?v*-1:v),c?{x:h*u,y:p*l}:{x:p*l,y:h*u}}const kO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=t,c=await _O(t,e);return a===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},xO=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:y=>{let{x:f,y:m}=y;return{x:f,y:m}}},...c}=ar(e,t),l={x:n,y:r},u=await zc(t,c),d=Zr(cr(i)),p=Tg(d);let h=l[p],v=l[d];if(o){const y=p==="y"?"top":"left",f=p==="y"?"bottom":"right",m=h+u[y],S=h-u[f];h=Yf(m,h,S)}if(a){const y=d==="y"?"top":"left",f=d==="y"?"bottom":"right",m=v+u[y],S=v-u[f];v=Yf(m,v,S)}const g=s.fn({...t,[p]:h,[d]:v});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[p]:o,[d]:a}}}}}},OO=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=t,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=ar(e,t),u={x:n,y:r},d=Zr(i),p=Tg(d);let h=u[p],v=u[d];const g=ar(s,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const S=p==="y"?"height":"width",C=o.reference[p]-o.floating[S]+y.mainAxis,R=o.reference[p]+o.reference[S]-y.mainAxis;h<C?h=C:h>R&&(h=R)}if(l){var f,m;const S=p==="y"?"width":"height",C=["top","left"].includes(cr(i)),R=o.reference[d]-o.floating[S]+(C&&((f=a.offset)==null?void 0:f[d])||0)+(C?0:y.crossAxis),T=o.reference[d]+o.reference[S]+(C?0:((m=a.offset)==null?void 0:m[d])||0)-(C?y.crossAxis:0);v<R?v=R:v>T&&(v=T)}return{[p]:h,[d]:v}}}},MO=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:a,elements:s}=t,{apply:c=()=>{},...l}=ar(e,t),u=await zc(t,l),d=cr(i),p=Go(i),h=Zr(i)==="y",{width:v,height:g}=o.floating;let y,f;d==="top"||d==="bottom"?(y=d,f=p===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(f=d,y=p==="end"?"top":"bottom");const m=g-u.top-u.bottom,S=v-u.left-u.right,C=Yr(g-u[y],m),R=Yr(v-u[f],S),T=!t.middlewareData.shift;let A=C,E=R;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(E=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(A=m),T&&!p){const _=Vt(u.left,0),N=Vt(u.right,0),B=Vt(u.top,0),$=Vt(u.bottom,0);h?E=v-2*(_!==0||N!==0?_+N:Vt(u.left,u.right)):A=g-2*(B!==0||$!==0?B+$:Vt(u.top,u.bottom))}await c({...t,availableWidth:E,availableHeight:A});const k=await a.getDimensions(s.floating);return v!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function ud(){return typeof window<"u"}function Qo(e){return f0(e)?(e.nodeName||"").toLowerCase():"#document"}function Kt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function $n(e){var t;return(t=(f0(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function f0(e){return ud()?e instanceof Node||e instanceof Kt(e).Node:!1}function Pn(e){return ud()?e instanceof Element||e instanceof Kt(e).Element:!1}function qn(e){return ud()?e instanceof HTMLElement||e instanceof Kt(e).HTMLElement:!1}function Wy(e){return!ud()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Kt(e).ShadowRoot}function el(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=En(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function DO(e){return["table","td","th"].includes(Qo(e))}function dd(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ig(e){const t=_g(),n=Pn(e)?En(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function NO(e){let t=ei(e);for(;qn(t)&&!Lo(t);){if(Ig(t))return t;if(dd(t))return null;t=ei(t)}return null}function _g(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Lo(e){return["html","body","#document"].includes(Qo(e))}function En(e){return Kt(e).getComputedStyle(e)}function pd(e){return Pn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function ei(e){if(Qo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Wy(e)&&e.host||$n(e);return Wy(t)?t.host:t}function v0(e){const t=ei(e);return Lo(t)?e.ownerDocument?e.ownerDocument.body:e.body:qn(t)&&el(t)?t:v0(t)}function jc(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=v0(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),a=Kt(i);if(o){const s=Zf(a);return t.concat(a,a.visualViewport||[],el(i)?i:[],s&&n?jc(s):[])}return t.concat(i,jc(i,[],n))}function Zf(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function g0(e){const t=En(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=qn(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Mu(n)!==o||Mu(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function kg(e){return Pn(e)?e:e.contextElement}function Co(e){const t=kg(e);if(!qn(t))return Xr(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=g0(t);let a=(o?Mu(n.width):n.width)/r,s=(o?Mu(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const zO=Xr(0);function m0(e){const t=Kt(e);return!_g()||!t.visualViewport?zO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function jO(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Kt(e)?!1:t}function $i(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=kg(e);let a=Xr(1);t&&(r?Pn(r)&&(a=Co(r)):a=Co(e));const s=jO(o,n,r)?m0(o):Xr(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(o){const p=Kt(o),h=r&&Pn(r)?Kt(r):r;let v=p,g=Zf(v);for(;g&&r&&h!==v;){const y=Co(g),f=g.getBoundingClientRect(),m=En(g),S=f.left+(g.clientLeft+parseFloat(m.paddingLeft))*y.x,C=f.top+(g.clientTop+parseFloat(m.paddingTop))*y.y;c*=y.x,l*=y.y,u*=y.x,d*=y.y,c+=S,l+=C,v=Kt(g),g=Zf(v)}}return Nu({width:u,height:d,x:c,y:l})}function LO(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",a=$n(r),s=t?dd(t.floating):!1;if(r===a||s&&o)return n;let c={scrollLeft:0,scrollTop:0},l=Xr(1);const u=Xr(0),d=qn(r);if((d||!d&&!o)&&((Qo(r)!=="body"||el(a))&&(c=pd(r)),qn(r))){const p=$i(r);l=Co(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function FO(e){return Array.from(e.getClientRects())}function ev(e,t){const n=pd(e).scrollLeft;return t?t.left+n:$i($n(e)).left+n}function BO(e){const t=$n(e),n=pd(e),r=e.ownerDocument.body,i=Vt(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Vt(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+ev(e);const s=-n.scrollTop;return En(r).direction==="rtl"&&(a+=Vt(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}function qO(e,t){const n=Kt(e),r=$n(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const l=_g();(!l||l&&t==="fixed")&&(s=i.offsetLeft,c=i.offsetTop)}return{width:o,height:a,x:s,y:c}}function UO(e,t){const n=$i(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=qn(e)?Co(e):Xr(1),a=e.clientWidth*o.x,s=e.clientHeight*o.y,c=i*o.x,l=r*o.y;return{width:a,height:s,x:c,y:l}}function Ky(e,t,n){let r;if(t==="viewport")r=qO(e,n);else if(t==="document")r=BO($n(e));else if(Pn(t))r=UO(t,n);else{const i=m0(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return Nu(r)}function y0(e,t){const n=ei(e);return n===t||!Pn(n)||Lo(n)?!1:En(n).position==="fixed"||y0(n,t)}function $O(e,t){const n=t.get(e);if(n)return n;let r=jc(e,[],!1).filter(s=>Pn(s)&&Qo(s)!=="body"),i=null;const o=En(e).position==="fixed";let a=o?ei(e):e;for(;Pn(a)&&!Lo(a);){const s=En(a),c=Ig(a);!c&&s.position==="fixed"&&(i=null),(o?!c&&!i:!c&&s.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||el(a)&&!c&&y0(e,a))?r=r.filter(u=>u!==a):i=s,a=ei(a)}return t.set(e,r),r}function VO(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const a=[...n==="clippingAncestors"?dd(t)?[]:$O(t,this._c):[].concat(n),r],s=a[0],c=a.reduce((l,u)=>{const d=Ky(t,u,i);return l.top=Vt(d.top,l.top),l.right=Yr(d.right,l.right),l.bottom=Yr(d.bottom,l.bottom),l.left=Vt(d.left,l.left),l},Ky(t,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function HO(e){const{width:t,height:n}=g0(e);return{width:t,height:n}}function WO(e,t,n){const r=qn(t),i=$n(t),o=n==="fixed",a=$i(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const c=Xr(0);if(r||!r&&!o)if((Qo(t)!=="body"||el(i))&&(s=pd(t)),r){const h=$i(t,!0,o,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else i&&(c.x=ev(i));let l=0,u=0;if(i&&!r&&!o){const h=i.getBoundingClientRect();u=h.top+s.scrollTop,l=h.left+s.scrollLeft-ev(i,h)}const d=a.left+s.scrollLeft-c.x-l,p=a.top+s.scrollTop-c.y-u;return{x:d,y:p,width:a.width,height:a.height}}function Ph(e){return En(e).position==="static"}function Jy(e,t){if(!qn(e)||En(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return $n(e)===n&&(n=n.ownerDocument.body),n}function S0(e,t){const n=Kt(e);if(dd(e))return n;if(!qn(e)){let i=ei(e);for(;i&&!Lo(i);){if(Pn(i)&&!Ph(i))return i;i=ei(i)}return n}let r=Jy(e,t);for(;r&&DO(r)&&Ph(r);)r=Jy(r,t);return r&&Lo(r)&&Ph(r)&&!Ig(r)?n:r||NO(e)||n}const KO=async function(e){const t=this.getOffsetParent||S0,n=this.getDimensions,r=await n(e.floating);return{reference:WO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function JO(e){return En(e).direction==="rtl"}const GO={convertOffsetParentRelativeRectToViewportRelativeRect:LO,getDocumentElement:$n,getClippingRect:VO,getOffsetParent:S0,getElementRects:KO,getClientRects:FO,getDimensions:HO,getScale:Co,isElement:Pn,isRTL:JO};function QO(e,t){let n=null,r;const i=$n(e);function o(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function a(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const{left:l,top:u,width:d,height:p}=e.getBoundingClientRect();if(s||t(),!d||!p)return;const h=Ll(u),v=Ll(i.clientWidth-(l+d)),g=Ll(i.clientHeight-(u+p)),y=Ll(l),m={rootMargin:-h+"px "+-v+"px "+-g+"px "+-y+"px",threshold:Vt(0,Yr(1,c))||1};let S=!0;function C(R){const T=R[0].intersectionRatio;if(T!==c){if(!S)return a();T?a(!1,T):r=setTimeout(()=>{a(!1,1e-7)},1e3)}S=!1}try{n=new IntersectionObserver(C,{...m,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,m)}n.observe(e)}return a(!0),o}function YO(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=kg(e),u=i||o?[...l?jc(l):[],...jc(t)]:[];u.forEach(f=>{i&&f.addEventListener("scroll",n,{passive:!0}),o&&f.addEventListener("resize",n)});const d=l&&s?QO(l,n):null;let p=-1,h=null;a&&(h=new ResizeObserver(f=>{let[m]=f;m&&m.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=h)==null||S.observe(t)})),n()}),l&&!c&&h.observe(l),h.observe(t));let v,g=c?$i(e):null;c&&y();function y(){const f=$i(e);g&&(f.x!==g.x||f.y!==g.y||f.width!==g.width||f.height!==g.height)&&n(),g=f,v=requestAnimationFrame(y)}return n(),()=>{var f;u.forEach(m=>{i&&m.removeEventListener("scroll",n),o&&m.removeEventListener("resize",n)}),d==null||d(),(f=h)==null||f.disconnect(),h=null,c&&cancelAnimationFrame(v)}}const XO=kO,ZO=xO,eM=bO,tM=MO,nM=IO,Gy=AO,rM=OO,iM=(e,t,n)=>{const r=new Map,i={platform:GO,...n},o={...i.platform,_c:r};return TO(e,t,{...i,platform:o})};var ru=typeof document<"u"?w.useLayoutEffect:w.useEffect;function zu(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!zu(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!zu(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function C0(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Qy(e,t){const n=C0(e);return Math.round(t*n)/n}function Eh(e){const t=w.useRef(e);return ru(()=>{t.current=e}),t}function oM(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:c,open:l}=e,[u,d]=w.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=w.useState(r);zu(p,r)||h(r);const[v,g]=w.useState(null),[y,f]=w.useState(null),m=w.useCallback(b=>{b!==T.current&&(T.current=b,g(b))},[]),S=w.useCallback(b=>{b!==A.current&&(A.current=b,f(b))},[]),C=o||v,R=a||y,T=w.useRef(null),A=w.useRef(null),E=w.useRef(u),k=c!=null,_=Eh(c),N=Eh(i),B=Eh(l),$=w.useCallback(()=>{if(!T.current||!A.current)return;const b={placement:t,strategy:n,middleware:p};N.current&&(b.platform=N.current),iM(T.current,A.current,b).then(D=>{const K={...D,isPositioned:B.current!==!1};j.current&&!zu(E.current,K)&&(E.current=K,Yc.flushSync(()=>{d(K)}))})},[p,t,n,N,B]);ru(()=>{l===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,d(b=>({...b,isPositioned:!1})))},[l]);const j=w.useRef(!1);ru(()=>(j.current=!0,()=>{j.current=!1}),[]),ru(()=>{if(C&&(T.current=C),R&&(A.current=R),C&&R){if(_.current)return _.current(C,R,$);$()}},[C,R,$,_,k]);const L=w.useMemo(()=>({reference:T,floating:A,setReference:m,setFloating:S}),[m,S]),V=w.useMemo(()=>({reference:C,floating:R}),[C,R]),Y=w.useMemo(()=>{const b={position:n,left:0,top:0};if(!V.floating)return b;const D=Qy(V.floating,u.x),K=Qy(V.floating,u.y);return s?{...b,transform:"translate("+D+"px, "+K+"px)",...C0(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:K}},[n,s,V.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:$,refs:L,elements:V,floatingStyles:Y}),[u,$,L,V,Y])}const sM=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Gy({element:r.current,padding:i}).fn(n):{}:r?Gy({element:r,padding:i}).fn(n):{}}}},aM=(e,t)=>({...XO(e),options:[e,t]}),cM=(e,t)=>({...ZO(e),options:[e,t]}),lM=(e,t)=>({...rM(e),options:[e,t]}),uM=(e,t)=>({...eM(e),options:[e,t]}),dM=(e,t)=>({...tM(e),options:[e,t]}),pM=(e,t)=>({...nM(e),options:[e,t]}),hM=(e,t)=>({...sM(e),options:[e,t]});var fM="Arrow",w0=w.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return P.jsx(we.svg,{...o,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:P.jsx("polygon",{points:"0,0 30,0 15,10"})})});w0.displayName=fM;var vM=w0;function gM(e,t=[]){let n=[];function r(o,a){const s=w.createContext(a),c=n.length;n=[...n,a];function l(d){const{scope:p,children:h,...v}=d,g=(p==null?void 0:p[e][c])||s,y=w.useMemo(()=>v,Object.values(v));return P.jsx(g.Provider,{value:y,children:h})}function u(d,p){const h=(p==null?void 0:p[e][c])||s,v=w.useContext(h);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return l.displayName=o+"Provider",[l,u]}const i=()=>{const o=n.map(a=>w.createContext(a));return function(s){const c=(s==null?void 0:s[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return i.scopeName=e,[r,mM(i,...t)]}function mM(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...s,...d}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function hd(e){const[t,n]=w.useState(void 0);return Qr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const c=o.borderBoxSize,l=Array.isArray(c)?c[0]:c;a=l.inlineSize,s=l.blockSize}else a=e.offsetWidth,s=e.offsetHeight;n({width:a,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var R0="Popper",[P0,E0]=gM(R0),[_q,T0]=P0(R0),A0="PopperAnchor",b0=w.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=T0(A0,n),a=w.useRef(null),s=Ue(t,a);return w.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:P.jsx(we.div,{...i,ref:s})});b0.displayName=A0;var xg="PopperContent",[yM,SM]=P0(xg),I0=w.forwardRef((e,t)=>{var Xe,jt,Lt,Ft,pr,_n;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:v,...g}=e,y=T0(xg,n),[f,m]=w.useState(null),S=Ue(t,dn=>m(dn)),[C,R]=w.useState(null),T=hd(C),A=(T==null?void 0:T.width)??0,E=(T==null?void 0:T.height)??0,k=r+(o!=="center"?"-"+o:""),_=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(l)?l:[l],B=N.length>0,$={padding:_,boundary:N.filter(wM),altBoundary:B},{refs:j,floatingStyles:L,placement:V,isPositioned:Y,middlewareData:b}=oM({strategy:"fixed",placement:k,whileElementsMounted:(...dn)=>YO(...dn,{animationFrame:h==="always"}),elements:{reference:y.anchor},middleware:[aM({mainAxis:i+E,alignmentAxis:a}),c&&cM({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?lM():void 0,...$}),c&&uM({...$}),dM({...$,apply:({elements:dn,rects:Vn,availableWidth:hr,availableHeight:Xt})=>{const{width:li,height:q}=Vn.reference,z=dn.floating.style;z.setProperty("--radix-popper-available-width",`${hr}px`),z.setProperty("--radix-popper-available-height",`${Xt}px`),z.setProperty("--radix-popper-anchor-width",`${li}px`),z.setProperty("--radix-popper-anchor-height",`${q}px`)}}),C&&hM({element:C,padding:s}),RM({arrowWidth:A,arrowHeight:E}),p&&pM({strategy:"referenceHidden",...$})]}),[D,K]=x0(V),U=Rn(v);Qr(()=>{Y&&(U==null||U())},[Y,U]);const G=(Xe=b.arrow)==null?void 0:Xe.x,oe=(jt=b.arrow)==null?void 0:jt.y,Se=((Lt=b.arrow)==null?void 0:Lt.centerOffset)!==0,[Ye,he]=w.useState();return Qr(()=>{f&&he(window.getComputedStyle(f).zIndex)},[f]),P.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:Y?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ye,"--radix-popper-transform-origin":[(Ft=b.transformOrigin)==null?void 0:Ft.x,(pr=b.transformOrigin)==null?void 0:pr.y].join(" "),...((_n=b.hide)==null?void 0:_n.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:P.jsx(yM,{scope:n,placedSide:D,onArrowChange:R,arrowX:G,arrowY:oe,shouldHideArrow:Se,children:P.jsx(we.div,{"data-side":D,"data-align":K,...g,ref:S,style:{...g.style,animation:Y?void 0:"none"}})})})});I0.displayName=xg;var _0="PopperArrow",CM={top:"bottom",right:"left",bottom:"top",left:"right"},k0=w.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=SM(_0,r),a=CM[o.placedSide];return P.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:P.jsx(vM,{...i,ref:n,style:{...i.style,display:"block"}})})});k0.displayName=_0;function wM(e){return e!==null}var RM=e=>({name:"transformOrigin",options:e,fn(t){var y,f,m;const{placement:n,rects:r,middlewareData:i}=t,a=((y=i.arrow)==null?void 0:y.centerOffset)!==0,s=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[l,u]=x0(n),d={start:"0%",center:"50%",end:"100%"}[u],p=(((f=i.arrow)==null?void 0:f.x)??0)+s/2,h=(((m=i.arrow)==null?void 0:m.y)??0)+c/2;let v="",g="";return l==="bottom"?(v=a?d:`${p}px`,g=`${-c}px`):l==="top"?(v=a?d:`${p}px`,g=`${r.floating.height+c}px`):l==="right"?(v=`${-c}px`,g=a?d:`${h}px`):l==="left"&&(v=`${r.floating.width+c}px`,g=a?d:`${h}px`),{data:{x:v,y:g}}}});function x0(e){const[t,n="center"]=e.split("-");return[t,n]}var PM=b0,EM=I0,TM=k0,[fd,kq]=Ko("Tooltip",[E0]),Og=E0(),O0="TooltipProvider",AM=700,Yy="tooltip.open",[bM,M0]=fd(O0),D0=e=>{const{__scopeTooltip:t,delayDuration:n=AM,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=e,[a,s]=w.useState(!0),c=w.useRef(!1),l=w.useRef(0);return w.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),P.jsx(bM,{scope:t,isOpenDelayed:a,delayDuration:n,onOpen:w.useCallback(()=>{window.clearTimeout(l.current),s(!1)},[]),onClose:w.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:w.useCallback(u=>{c.current=u},[]),disableHoverableContent:i,children:o})};D0.displayName=O0;var N0="Tooltip",[xq,vd]=fd(N0),tv="TooltipTrigger",IM=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=vd(tv,n),o=M0(tv,n),a=Og(n),s=w.useRef(null),c=Ue(t,s,i.onTriggerChange),l=w.useRef(!1),u=w.useRef(!1),d=w.useCallback(()=>l.current=!1,[]);return w.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),P.jsx(PM,{asChild:!0,...a,children:P.jsx(we.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:pe(e.onPointerMove,p=>{p.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:pe(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:pe(e.onPointerDown,()=>{l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:pe(e.onFocus,()=>{l.current||i.onOpen()}),onBlur:pe(e.onBlur,i.onClose),onClick:pe(e.onClick,i.onClose)})})});IM.displayName=tv;var _M="TooltipPortal",[Oq,kM]=fd(_M,{forceMount:void 0}),Fo="TooltipContent",z0=w.forwardRef((e,t)=>{const n=kM(Fo,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=e,a=vd(Fo,e.__scopeTooltip);return P.jsx(Xc,{present:r||a.open,children:a.disableHoverableContent?P.jsx(j0,{side:i,...o,ref:t}):P.jsx(xM,{side:i,...o,ref:t})})}),xM=w.forwardRef((e,t)=>{const n=vd(Fo,e.__scopeTooltip),r=M0(Fo,e.__scopeTooltip),i=w.useRef(null),o=Ue(t,i),[a,s]=w.useState(null),{trigger:c,onClose:l}=n,u=i.current,{onPointerInTransitChange:d}=r,p=w.useCallback(()=>{s(null),d(!1)},[d]),h=w.useCallback((v,g)=>{const y=v.currentTarget,f={x:v.clientX,y:v.clientY},m=NM(f,y.getBoundingClientRect()),S=zM(f,m),C=jM(g.getBoundingClientRect()),R=FM([...S,...C]);s(R),d(!0)},[d]);return w.useEffect(()=>()=>p(),[p]),w.useEffect(()=>{if(c&&u){const v=y=>h(y,u),g=y=>h(y,c);return c.addEventListener("pointerleave",v),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",g)}}},[c,u,h,p]),w.useEffect(()=>{if(a){const v=g=>{const y=g.target,f={x:g.clientX,y:g.clientY},m=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),S=!LM(f,a);m?p():S&&(p(),l())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,u,a,l,p]),P.jsx(j0,{...e,ref:o})}),[OM,MM]=fd(N0,{isInside:!1}),j0=w.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=e,c=vd(Fo,n),l=Og(n),{onClose:u}=c;return w.useEffect(()=>(document.addEventListener(Yy,u),()=>document.removeEventListener(Yy,u)),[u]),w.useEffect(()=>{if(c.trigger){const d=p=>{const h=p.target;h!=null&&h.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),P.jsx(Sg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:P.jsxs(EM,{"data-state":c.stateAttribute,...l,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[P.jsx(_E,{children:r}),P.jsx(OM,{scope:n,isInside:!0,children:P.jsx(Ak,{id:c.contentId,role:"tooltip",children:i||r})})]})})});z0.displayName=Fo;var L0="TooltipArrow",DM=w.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Og(n);return MM(L0,n).isInside?null:P.jsx(TM,{...i,...r,ref:t})});DM.displayName=L0;function NM(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function zM(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function jM(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function LM(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const s=t[o].x,c=t[o].y,l=t[a].x,u=t[a].y;c>r!=u>r&&n<(l-s)*(r-c)/(u-c)+s&&(i=!i)}return i}function FM(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),BM(t)}function BM(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var qM=D0,F0=z0;const UM=qM,$M=w.forwardRef(({className:e,sideOffset:t=4,...n},r)=>P.jsx(F0,{ref:r,sideOffset:t,className:Le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));$M.displayName=F0.displayName;var gd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},md=typeof window>"u"||"Deno"in globalThis;function vn(){}function VM(e,t){return typeof e=="function"?e(t):e}function HM(e){return typeof e=="number"&&e>=0&&e!==1/0}function WM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Xy(e,t){return typeof e=="function"?e(t):e}function KM(e,t){return typeof e=="function"?e(t):e}function Zy(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:a,stale:s}=e;if(a){if(r){if(t.queryHash!==Mg(a,t.options))return!1}else if(!Fc(t.queryKey,a))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof s=="boolean"&&t.isStale()!==s||i&&i!==t.state.fetchStatus||o&&!o(t))}function eS(e,t){const{exact:n,status:r,predicate:i,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(n){if(Lc(t.options.mutationKey)!==Lc(o))return!1}else if(!Fc(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function Mg(e,t){return((t==null?void 0:t.queryKeyHashFn)||Lc)(e)}function Lc(e){return JSON.stringify(e,(t,n)=>nv(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Fc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Fc(e[n],t[n])):!1}function B0(e,t){if(e===t)return e;const n=tS(e)&&tS(t);if(n||nv(e)&&nv(t)){const r=n?e:Object.keys(e),i=r.length,o=n?t:Object.keys(t),a=o.length,s=n?[]:{};let c=0;for(let l=0;l<a;l++){const u=n?l:o[l];(!n&&r.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(s[u]=void 0,c++):(s[u]=B0(e[u],t[u]),s[u]===e[u]&&e[u]!==void 0&&c++)}return i===a&&c===i?e:s}return t}function tS(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function nv(e){if(!nS(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!nS(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function nS(e){return Object.prototype.toString.call(e)==="[object Object]"}function JM(e){return new Promise(t=>{setTimeout(t,e)})}function GM(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?B0(e,t):t}function QM(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function YM(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Dg=Symbol();function q0(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Dg?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var xi,Ir,Ro,rR,XM=(rR=class extends gd{constructor(){super();me(this,xi);me(this,Ir);me(this,Ro);ae(this,Ro,t=>{if(!md&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){x(this,Ir)||this.setEventListener(x(this,Ro))}onUnsubscribe(){var t;this.hasListeners()||((t=x(this,Ir))==null||t.call(this),ae(this,Ir,void 0))}setEventListener(t){var n;ae(this,Ro,t),(n=x(this,Ir))==null||n.call(this),ae(this,Ir,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){x(this,xi)!==t&&(ae(this,xi,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof x(this,xi)=="boolean"?x(this,xi):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},xi=new WeakMap,Ir=new WeakMap,Ro=new WeakMap,rR),U0=new XM,Po,_r,Eo,iR,ZM=(iR=class extends gd{constructor(){super();me(this,Po,!0);me(this,_r);me(this,Eo);ae(this,Eo,t=>{if(!md&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){x(this,_r)||this.setEventListener(x(this,Eo))}onUnsubscribe(){var t;this.hasListeners()||((t=x(this,_r))==null||t.call(this),ae(this,_r,void 0))}setEventListener(t){var n;ae(this,Eo,t),(n=x(this,_r))==null||n.call(this),ae(this,_r,t(this.setOnline.bind(this)))}setOnline(t){x(this,Po)!==t&&(ae(this,Po,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return x(this,Po)}},Po=new WeakMap,_r=new WeakMap,Eo=new WeakMap,iR),ju=new ZM;function eD(){let e,t;const n=new Promise((i,o)=>{e=i,t=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function tD(e){return Math.min(1e3*2**e,3e4)}function $0(e){return(e??"online")==="online"?ju.isOnline():!0}var V0=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Th(e){return e instanceof V0}function H0(e){let t=!1,n=0,r=!1,i;const o=eD(),a=g=>{var y;r||(p(new V0(g)),(y=e.abort)==null||y.call(e))},s=()=>{t=!0},c=()=>{t=!1},l=()=>U0.isFocused()&&(e.networkMode==="always"||ju.isOnline())&&e.canRun(),u=()=>$0(e.networkMode)&&e.canRun(),d=g=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,g),i==null||i(),o.resolve(g))},p=g=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,g),i==null||i(),o.reject(g))},h=()=>new Promise(g=>{var y;i=f=>{(r||l())&&g(f)},(y=e.onPause)==null||y.call(e)}).then(()=>{var g;i=void 0,r||(g=e.onContinue)==null||g.call(e)}),v=()=>{if(r)return;let g;const y=n===0?e.initialPromise:void 0;try{g=y??e.fn()}catch(f){g=Promise.reject(f)}Promise.resolve(g).then(d).catch(f=>{var T;if(r)return;const m=e.retry??(md?0:3),S=e.retryDelay??tD,C=typeof S=="function"?S(n,f):S,R=m===!0||typeof m=="number"&&n<m||typeof m=="function"&&m(n,f);if(t||!R){p(f);return}n++,(T=e.onFail)==null||T.call(e,n,f),JM(C).then(()=>l()?void 0:h()).then(()=>{t?p(f):v()})})};return{promise:o,cancel:a,continue:()=>(i==null||i(),o),cancelRetry:s,continueRetry:c,canStart:u,start:()=>(u()?v():h().then(v),o)}}function nD(){let e=[],t=0,n=s=>{s()},r=s=>{s()},i=s=>setTimeout(s,0);const o=s=>{t?e.push(s):i(()=>{n(s)})},a=()=>{const s=e;e=[],s.length&&i(()=>{r(()=>{s.forEach(c=>{n(c)})})})};return{batch:s=>{let c;t++;try{c=s()}finally{t--,t||a()}return c},batchCalls:s=>(...c)=>{o(()=>{s(...c)})},schedule:o,setNotifyFunction:s=>{n=s},setBatchNotifyFunction:s=>{r=s},setScheduler:s=>{i=s}}}var Et=nD(),Oi,oR,W0=(oR=class{constructor(){me(this,Oi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HM(this.gcTime)&&ae(this,Oi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(md?1/0:5*60*1e3))}clearGcTimeout(){x(this,Oi)&&(clearTimeout(x(this,Oi)),ae(this,Oi,void 0))}},Oi=new WeakMap,oR),To,Ao,nn,vt,Vc,Mi,gn,Qn,sR,rD=(sR=class extends W0{constructor(t){super();me(this,gn);me(this,To);me(this,Ao);me(this,nn);me(this,vt);me(this,Vc);me(this,Mi);ae(this,Mi,!1),ae(this,Vc,t.defaultOptions),this.setOptions(t.options),this.observers=[],ae(this,nn,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ae(this,To,oD(this.options)),this.state=t.state??x(this,To),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=x(this,vt))==null?void 0:t.promise}setOptions(t){this.options={...x(this,Vc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&x(this,nn).remove(this)}setData(t,n){const r=GM(this.state.data,t,this.options);return ct(this,gn,Qn).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ct(this,gn,Qn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=x(this,vt))==null?void 0:r.promise;return(i=x(this,vt))==null||i.cancel(t),n?n.then(vn).catch(vn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(x(this,To))}isActive(){return this.observers.some(t=>KM(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dg||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!WM(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=x(this,vt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=x(this,vt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),x(this,nn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(x(this,vt)&&(x(this,Mi)?x(this,vt).cancel({revert:!0}):x(this,vt).cancelRetry()),this.scheduleGc()),x(this,nn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ct(this,gn,Qn).call(this,{type:"invalidate"})}fetch(t,n){var c,l,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(x(this,vt))return x(this,vt).continueRetry(),x(this,vt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(p=>p.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,i=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(ae(this,Mi,!0),r.signal)})},o=()=>{const d=q0(this.options,n),p={queryKey:this.queryKey,meta:this.meta};return i(p),ae(this,Mi,!1),this.options.persister?this.options.persister(d,p,this):d(p)},a={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(c=this.options.behavior)==null||c.onFetch(a,this),ae(this,Ao,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((l=a.fetchOptions)==null?void 0:l.meta))&&ct(this,gn,Qn).call(this,{type:"fetch",meta:(u=a.fetchOptions)==null?void 0:u.meta});const s=d=>{var p,h,v,g;Th(d)&&d.silent||ct(this,gn,Qn).call(this,{type:"error",error:d}),Th(d)||((h=(p=x(this,nn).config).onError)==null||h.call(p,d,this),(g=(v=x(this,nn).config).onSettled)==null||g.call(v,this.state.data,d,this)),this.scheduleGc()};return ae(this,vt,H0({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:d=>{var p,h,v,g;if(d===void 0){s(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(d)}catch(y){s(y);return}(h=(p=x(this,nn).config).onSuccess)==null||h.call(p,d,this),(g=(v=x(this,nn).config).onSettled)==null||g.call(v,d,this.state.error,this),this.scheduleGc()},onError:s,onFail:(d,p)=>{ct(this,gn,Qn).call(this,{type:"failed",failureCount:d,error:p})},onPause:()=>{ct(this,gn,Qn).call(this,{type:"pause"})},onContinue:()=>{ct(this,gn,Qn).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),x(this,vt).start()}},To=new WeakMap,Ao=new WeakMap,nn=new WeakMap,vt=new WeakMap,Vc=new WeakMap,Mi=new WeakMap,gn=new WeakSet,Qn=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...iD(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Th(i)&&i.revert&&x(this,Ao)?{...x(this,Ao),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Et.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),x(this,nn).notify({query:this,type:"updated",action:t})})},sR);function iD(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:$0(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function oD(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Dn,aR,sD=(aR=class extends gd{constructor(t={}){super();me(this,Dn);this.config=t,ae(this,Dn,new Map)}build(t,n,r){const i=n.queryKey,o=n.queryHash??Mg(i,n);let a=this.get(o);return a||(a=new rD({cache:this,queryKey:i,queryHash:o,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){x(this,Dn).has(t.queryHash)||(x(this,Dn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=x(this,Dn).get(t.queryHash);n&&(t.destroy(),n===t&&x(this,Dn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return x(this,Dn).get(t)}getAll(){return[...x(this,Dn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>Zy(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>Zy(t,r)):n}notify(t){Et.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Et.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Et.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Dn=new WeakMap,aR),Nn,Rt,Di,zn,Cr,cR,aD=(cR=class extends W0{constructor(t){super();me(this,zn);me(this,Nn);me(this,Rt);me(this,Di);this.mutationId=t.mutationId,ae(this,Rt,t.mutationCache),ae(this,Nn,[]),this.state=t.state||cD(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){x(this,Nn).includes(t)||(x(this,Nn).push(t),this.clearGcTimeout(),x(this,Rt).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ae(this,Nn,x(this,Nn).filter(n=>n!==t)),this.scheduleGc(),x(this,Rt).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){x(this,Nn).length||(this.state.status==="pending"?this.scheduleGc():x(this,Rt).remove(this))}continue(){var t;return((t=x(this,Di))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,a,s,c,l,u,d,p,h,v,g,y,f,m,S,C,R,T,A;ae(this,Di,H0({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(E,k)=>{ct(this,zn,Cr).call(this,{type:"failed",failureCount:E,error:k})},onPause:()=>{ct(this,zn,Cr).call(this,{type:"pause"})},onContinue:()=>{ct(this,zn,Cr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>x(this,Rt).canRun(this)}));const n=this.state.status==="pending",r=!x(this,Di).canStart();try{if(!n){ct(this,zn,Cr).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(i=x(this,Rt).config).onMutate)==null?void 0:o.call(i,t,this));const k=await((s=(a=this.options).onMutate)==null?void 0:s.call(a,t));k!==this.state.context&&ct(this,zn,Cr).call(this,{type:"pending",context:k,variables:t,isPaused:r})}const E=await x(this,Di).start();return await((l=(c=x(this,Rt).config).onSuccess)==null?void 0:l.call(c,E,t,this.state.context,this)),await((d=(u=this.options).onSuccess)==null?void 0:d.call(u,E,t,this.state.context)),await((h=(p=x(this,Rt).config).onSettled)==null?void 0:h.call(p,E,null,this.state.variables,this.state.context,this)),await((g=(v=this.options).onSettled)==null?void 0:g.call(v,E,null,t,this.state.context)),ct(this,zn,Cr).call(this,{type:"success",data:E}),E}catch(E){try{throw await((f=(y=x(this,Rt).config).onError)==null?void 0:f.call(y,E,t,this.state.context,this)),await((S=(m=this.options).onError)==null?void 0:S.call(m,E,t,this.state.context)),await((R=(C=x(this,Rt).config).onSettled)==null?void 0:R.call(C,void 0,E,this.state.variables,this.state.context,this)),await((A=(T=this.options).onSettled)==null?void 0:A.call(T,void 0,E,t,this.state.context)),E}finally{ct(this,zn,Cr).call(this,{type:"error",error:E})}}finally{x(this,Rt).runNext(this)}}},Nn=new WeakMap,Rt=new WeakMap,Di=new WeakMap,zn=new WeakSet,Cr=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Et.batch(()=>{x(this,Nn).forEach(r=>{r.onMutationUpdate(t)}),x(this,Rt).notify({mutation:this,type:"updated",action:t})})},cR);function cD(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qt,Hc,lR,lD=(lR=class extends gd{constructor(t={}){super();me(this,qt);me(this,Hc);this.config=t,ae(this,qt,new Map),ae(this,Hc,Date.now())}build(t,n,r){const i=new aD({mutationCache:this,mutationId:++ml(this,Hc)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=Fl(t),r=x(this,qt).get(n)??[];r.push(t),x(this,qt).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=Fl(t);if(x(this,qt).has(n)){const i=(r=x(this,qt).get(n))==null?void 0:r.filter(o=>o!==t);i&&(i.length===0?x(this,qt).delete(n):x(this,qt).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=x(this,qt).get(Fl(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=x(this,qt).get(Fl(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Et.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...x(this,qt).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>eS(n,r))}findAll(t={}){return this.getAll().filter(n=>eS(t,n))}notify(t){Et.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Et.batch(()=>Promise.all(t.map(n=>n.continue().catch(vn))))}},qt=new WeakMap,Hc=new WeakMap,lR);function Fl(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function rS(e){return{onFetch:(t,n)=>{var u,d,p,h,v;const r=t.options,i=(p=(d=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:p.direction,o=((h=t.state.data)==null?void 0:h.pages)||[],a=((v=t.state.data)==null?void 0:v.pageParams)||[];let s={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const y=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},f=q0(t.options,t.fetchOptions),m=async(S,C,R)=>{if(g)return Promise.reject();if(C==null&&S.pages.length)return Promise.resolve(S);const T={queryKey:t.queryKey,pageParam:C,direction:R?"backward":"forward",meta:t.options.meta};y(T);const A=await f(T),{maxPages:E}=t.options,k=R?YM:QM;return{pages:k(S.pages,A,E),pageParams:k(S.pageParams,C,E)}};if(i&&o.length){const S=i==="backward",C=S?uD:iS,R={pages:o,pageParams:a},T=C(r,R);s=await m(R,T,S)}else{const S=e??o.length;do{const C=c===0?a[0]??r.initialPageParam:iS(r,s);if(c>0&&C==null)break;s=await m(s,C),c++}while(c<S)}return s};t.options.persister?t.fetchFn=()=>{var g,y;return(y=(g=t.options).persister)==null?void 0:y.call(g,l,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=l}}}function iS(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function uD(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var De,kr,xr,bo,Io,Or,_o,ko,uR,dD=(uR=class{constructor(e={}){me(this,De);me(this,kr);me(this,xr);me(this,bo);me(this,Io);me(this,Or);me(this,_o);me(this,ko);ae(this,De,e.queryCache||new sD),ae(this,kr,e.mutationCache||new lD),ae(this,xr,e.defaultOptions||{}),ae(this,bo,new Map),ae(this,Io,new Map),ae(this,Or,0)}mount(){ml(this,Or)._++,x(this,Or)===1&&(ae(this,_o,U0.subscribe(async e=>{e&&(await this.resumePausedMutations(),x(this,De).onFocus())})),ae(this,ko,ju.subscribe(async e=>{e&&(await this.resumePausedMutations(),x(this,De).onOnline())})))}unmount(){var e,t;ml(this,Or)._--,x(this,Or)===0&&((e=x(this,_o))==null||e.call(this),ae(this,_o,void 0),(t=x(this,ko))==null||t.call(this),ae(this,ko,void 0))}isFetching(e){return x(this,De).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return x(this,kr).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=x(this,De).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=x(this,De).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(Xy(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return x(this,De).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=x(this,De).get(r.queryHash),o=i==null?void 0:i.state.data,a=VM(t,o);if(a!==void 0)return x(this,De).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(e,t,n){return Et.batch(()=>x(this,De).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=x(this,De).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=x(this,De);Et.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=x(this,De),r={type:"active",...e};return Et.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Et.batch(()=>x(this,De).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(vn).catch(vn)}invalidateQueries(e={},t={}){return Et.batch(()=>{if(x(this,De).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Et.batch(()=>x(this,De).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(vn)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(vn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=x(this,De).build(this,t);return n.isStaleByTime(Xy(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vn).catch(vn)}fetchInfiniteQuery(e){return e.behavior=rS(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vn).catch(vn)}ensureInfiniteQueryData(e){return e.behavior=rS(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ju.isOnline()?x(this,kr).resumePausedMutations():Promise.resolve()}getQueryCache(){return x(this,De)}getMutationCache(){return x(this,kr)}getDefaultOptions(){return x(this,xr)}setDefaultOptions(e){ae(this,xr,e)}setQueryDefaults(e,t){x(this,bo).set(Lc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...x(this,bo).values()];let n={};return t.forEach(r=>{Fc(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){x(this,Io).set(Lc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...x(this,Io).values()];let n={};return t.forEach(r=>{Fc(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...x(this,xr).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Mg(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Dg&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...x(this,xr).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){x(this,De).clear(),x(this,kr).clear()}},De=new WeakMap,kr=new WeakMap,xr=new WeakMap,bo=new WeakMap,Io=new WeakMap,Or=new WeakMap,_o=new WeakMap,ko=new WeakMap,uR),pD=w.createContext(void 0),hD=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),P.jsx(pD.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lu(){return Lu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lu.apply(this,arguments)}var Nr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nr||(Nr={}));const oS="popstate";function fD(e){e===void 0&&(e={});function t(r,i){let{pathname:o,search:a,hash:s}=r.location;return rv("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:J0(i)}return gD(t,n,null,e)}function zt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function K0(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vD(){return Math.random().toString(36).substr(2,8)}function sS(e,t){return{usr:e.state,key:e.key,idx:t}}function rv(e,t,n,r){return n===void 0&&(n=null),Lu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yd(t):t,{state:n,key:t&&t.key||r||vD()})}function J0(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function yd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function gD(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s=Nr.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(Lu({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=Nr.Pop;let y=u(),f=y==null?null:y-l;l=y,c&&c({action:s,location:g.location,delta:f})}function p(y,f){s=Nr.Push;let m=rv(g.location,y,f);l=u()+1;let S=sS(m,l),C=g.createHref(m);try{a.pushState(S,"",C)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(C)}o&&c&&c({action:s,location:g.location,delta:1})}function h(y,f){s=Nr.Replace;let m=rv(g.location,y,f);l=u();let S=sS(m,l),C=g.createHref(m);a.replaceState(S,"",C),o&&c&&c({action:s,location:g.location,delta:0})}function v(y){let f=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof y=="string"?y:J0(y);return m=m.replace(/ $/,"%20"),zt(f,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,f)}let g={get action(){return s},get location(){return e(i,a)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(oS,d),c=y,()=>{i.removeEventListener(oS,d),c=null}},createHref(y){return t(i,y)},createURL:v,encodeLocation(y){let f=v(y);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:p,replace:h,go(y){return a.go(y)}};return g}var aS;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(aS||(aS={}));function mD(e,t,n){return n===void 0&&(n="/"),yD(e,t,n,!1)}function yD(e,t,n,r){let i=typeof t=="string"?yd(t):t,o=Y0(i.pathname||"/",n);if(o==null)return null;let a=G0(e);SD(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let l=kD(o);s=ID(a[c],l,r)}return s}function G0(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(zt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=wo([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(zt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),G0(o.children,t,u,l)),!(o.path==null&&!o.index)&&t.push({path:l,score:AD(l,o.index),routesMeta:u})};return e.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of Q0(o.path))i(o,a,c)}),t}function Q0(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=Q0(r.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>e.startsWith("/")&&c===""?"/":c)}function SD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:bD(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CD=/^:[\w-]+$/,wD=3,RD=2,PD=1,ED=10,TD=-2,cS=e=>e==="*";function AD(e,t){let n=e.split("/"),r=n.length;return n.some(cS)&&(r+=TD),t&&(r+=RD),n.filter(i=>!cS(i)).reduce((i,o)=>i+(CD.test(o)?wD:o===""?PD:ED),r)}function bD(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function ID(e,t,n){let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let c=r[s],l=s===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=lS({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),p=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=lS({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:wo([o,d.pathname]),pathnameBase:xD(wo([o,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(o=wo([o,d.pathnameBase]))}return a}function lS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_D(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:p,isOptional:h}=u;if(p==="*"){let g=s[d]||"";a=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const v=s[d];return h&&!v?l[p]=void 0:l[p]=(v||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:e}}function _D(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),K0(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(r.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function kD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return K0(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Y0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}const wo=e=>e.join("/").replace(/\/\/+/g,"/"),xD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function OD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const X0=["post","put","patch","delete"];new Set(X0);const MD=["get",...X0];new Set(MD);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fu.apply(this,arguments)}const DD=w.createContext(null),ND=w.createContext(null),Z0=w.createContext(null),Sd=w.createContext(null),Cd=w.createContext({outlet:null,matches:[],isDataRoute:!1}),eT=w.createContext(null);function Ng(){return w.useContext(Sd)!=null}function tT(){return Ng()||zt(!1),w.useContext(Sd).location}function zD(e,t){return jD(e,t)}function jD(e,t,n,r){Ng()||zt(!1);let{navigator:i}=w.useContext(Z0),{matches:o}=w.useContext(Cd),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=tT(),u;if(t){var d;let y=typeof t=="string"?yd(t):t;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||zt(!1),u=y}else u=l;let p=u.pathname||"/",h=p;if(c!=="/"){let y=c.replace(/^\//,"").split("/");h="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=mD(e,{pathname:h}),g=UD(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},s,y.params),pathname:wo([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:wo([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,r);return t&&g?w.createElement(Sd.Provider,{value:{location:Fu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Nr.Pop}},g):g}function LD(){let e=WD(),t=OD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,null)}const FD=w.createElement(LD,null);class BD extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Cd.Provider,{value:this.props.routeContext},w.createElement(eT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qD(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(DD);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Cd.Provider,{value:t},r)}function UD(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,s=(i=n)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||zt(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:p,errors:h}=n,v=d.route.loader&&p[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||v){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,d,p)=>{let h,v=!1,g=null,y=null;n&&(h=s&&d.route.id?s[d.route.id]:void 0,g=d.route.errorElement||FD,c&&(l<0&&p===0?(v=!0,y=null):l===p&&(v=!0,y=d.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,p+1)),m=()=>{let S;return h?S=g:v?S=y:d.route.Component?S=w.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,w.createElement(qD,{match:d,routeContext:{outlet:u,matches:f,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?w.createElement(BD,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}var iv=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(iv||{});function $D(e){let t=w.useContext(ND);return t||zt(!1),t}function VD(e){let t=w.useContext(Cd);return t||zt(!1),t}function HD(e){let t=VD(),n=t.matches[t.matches.length-1];return n.route.id||zt(!1),n.route.id}function WD(){var e;let t=w.useContext(eT),n=$D(iv.UseRouteError),r=HD(iv.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function ov(e){zt(!1)}function KD(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Nr.Pop,navigator:o,static:a=!1,future:s}=e;Ng()&&zt(!1);let c=t.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:c,navigator:o,static:a,future:Fu({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof r=="string"&&(r=yd(r));let{pathname:u="/",search:d="",hash:p="",state:h=null,key:v="default"}=r,g=w.useMemo(()=>{let y=Y0(u,c);return y==null?null:{location:{pathname:y,search:d,hash:p,state:h,key:v},navigationType:i}},[c,u,d,p,h,v,i]);return g==null?null:w.createElement(Z0.Provider,{value:l},w.createElement(Sd.Provider,{children:n,value:g}))}function JD(e){let{children:t,location:n}=e;return zD(sv(t),n)}new Promise(()=>{});function sv(e,t){t===void 0&&(t=[]);let n=[];return w.Children.forEach(e,(r,i)=>{if(!w.isValidElement(r))return;let o=[...t,i];if(r.type===w.Fragment){n.push.apply(n,sv(r.props.children,o));return}r.type!==ov&&zt(!1),!r.props.index||!r.props.children||zt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=sv(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const GD="6";try{window.__reactRouterVersion=GD}catch{}const QD="startTransition",uS=RR[QD];function YD(e){let{basename:t,children:n,future:r,window:i}=e,o=w.useRef();o.current==null&&(o.current=fD({window:i,v5Compat:!0}));let a=o.current,[s,c]=w.useState({action:a.action,location:a.location}),{v7_startTransition:l}=r||{},u=w.useCallback(d=>{l&&uS?uS(()=>c(d)):c(d)},[c,l]);return w.useLayoutEffect(()=>a.listen(u),[a,u]),w.createElement(KD,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a,future:r})}var dS;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dS||(dS={}));var pS;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(pS||(pS={}));const XD=Pg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),zr=w.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const a=r?Nc:"button";return P.jsx(a,{className:Le(XD({variant:t,size:n,className:e})),ref:o,...i})});zr.displayName="Button";const nT=w.forwardRef(({className:e,...t},n)=>P.jsx("div",{ref:n,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));nT.displayName="Card";const ZD=w.forwardRef(({className:e,...t},n)=>P.jsx("div",{ref:n,className:Le("flex flex-col space-y-1.5 p-6",e),...t}));ZD.displayName="CardHeader";const eN=w.forwardRef(({className:e,...t},n)=>P.jsx("h3",{ref:n,className:Le("text-2xl font-semibold leading-none tracking-tight",e),...t}));eN.displayName="CardTitle";const tN=w.forwardRef(({className:e,...t},n)=>P.jsx("p",{ref:n,className:Le("text-sm text-muted-foreground",e),...t}));tN.displayName="CardDescription";const nN=w.forwardRef(({className:e,...t},n)=>P.jsx("div",{ref:n,className:Le("p-6 pt-0",e),...t}));nN.displayName="CardContent";const rN=w.forwardRef(({className:e,...t},n)=>P.jsx("div",{ref:n,className:Le("flex items-center p-6 pt-0",e),...t}));rN.displayName="CardFooter";function iN(e,t=[]){let n=[];function r(o,a){const s=w.createContext(a),c=n.length;n=[...n,a];function l(d){const{scope:p,children:h,...v}=d,g=(p==null?void 0:p[e][c])||s,y=w.useMemo(()=>v,Object.values(v));return P.jsx(g.Provider,{value:y,children:h})}function u(d,p){const h=(p==null?void 0:p[e][c])||s,v=w.useContext(h);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return l.displayName=o+"Provider",[l,u]}const i=()=>{const o=n.map(a=>w.createContext(a));return function(s){const c=(s==null?void 0:s[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return i.scopeName=e,[r,oN(i,...t)]}function oN(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...s,...d}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var zg="Progress",jg=100,[sN,Mq]=iN(zg),[aN,cN]=sN(zg),rT=w.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:o=lN,...a}=e;(i||i===0)&&!hS(i)&&console.error(uN(`${i}`,"Progress"));const s=hS(i)?i:jg;r!==null&&!fS(r,s)&&console.error(dN(`${r}`,"Progress"));const c=fS(r,s)?r:null,l=Bu(c)?o(c,s):void 0;return P.jsx(aN,{scope:n,value:c,max:s,children:P.jsx(we.div,{"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":Bu(c)?c:void 0,"aria-valuetext":l,role:"progressbar","data-state":sT(c,s),"data-value":c??void 0,"data-max":s,...a,ref:t})})});rT.displayName=zg;var iT="ProgressIndicator",oT=w.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=cN(iT,n);return P.jsx(we.div,{"data-state":sT(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});oT.displayName=iT;function lN(e,t){return`${Math.round(e/t*100)}%`}function sT(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Bu(e){return typeof e=="number"}function hS(e){return Bu(e)&&!isNaN(e)&&e>0}function fS(e,t){return Bu(e)&&!isNaN(e)&&e<=t&&e>=0}function uN(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${jg}\`.`}function dN(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${jg} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var aT=rT,pN=oT;const cT=w.forwardRef(({className:e,value:t,...n},r)=>P.jsx(aT,{ref:r,className:Le("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:P.jsx(pN,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));cT.displayName=aT.displayName;const lT=w.forwardRef(({className:e,...t},n)=>P.jsx("textarea",{className:Le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));lT.displayName="Textarea";function hN(e,t=[]){let n=[];function r(o,a){const s=w.createContext(a),c=n.length;n=[...n,a];function l(d){const{scope:p,children:h,...v}=d,g=(p==null?void 0:p[e][c])||s,y=w.useMemo(()=>v,Object.values(v));return P.jsx(g.Provider,{value:y,children:h})}function u(d,p){const h=(p==null?void 0:p[e][c])||s,v=w.useContext(h);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return l.displayName=o+"Provider",[l,u]}const i=()=>{const o=n.map(a=>w.createContext(a));return function(s){const c=(s==null?void 0:s[e])||o;return w.useMemo(()=>({[`__scope${e}`]:{...s,[e]:c}}),[s,c])}};return i.scopeName=e,[r,fN(i,...t)]}function fN(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=r.reduce((s,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...s,...d}},{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var vN=w.createContext(void 0);function Lg(e){const t=w.useContext(vN);return e||t||"ltr"}var Ah="rovingFocusGroup.onEntryFocus",gN={bubbles:!1,cancelable:!0},wd="RovingFocusGroup",[av,uT,mN]=yg(wd),[yN,dT]=hN(wd,[mN]),[SN,CN]=yN(wd),pT=w.forwardRef((e,t)=>P.jsx(av.Provider,{scope:e.__scopeRovingFocusGroup,children:P.jsx(av.Slot,{scope:e.__scopeRovingFocusGroup,children:P.jsx(wN,{...e,ref:t})})}));pT.displayName=wd;var wN=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,p=w.useRef(null),h=Ue(t,p),v=Lg(o),[g=null,y]=Zc({prop:a,defaultProp:s,onChange:c}),[f,m]=w.useState(!1),S=Rn(l),C=uT(n),R=w.useRef(!1),[T,A]=w.useState(0);return w.useEffect(()=>{const E=p.current;if(E)return E.addEventListener(Ah,S),()=>E.removeEventListener(Ah,S)},[S]),P.jsx(SN,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:g,onItemFocus:w.useCallback(E=>y(E),[y]),onItemShiftTab:w.useCallback(()=>m(!0),[]),onFocusableItemAdd:w.useCallback(()=>A(E=>E+1),[]),onFocusableItemRemove:w.useCallback(()=>A(E=>E-1),[]),children:P.jsx(we.div,{tabIndex:f||T===0?-1:0,"data-orientation":r,...d,ref:h,style:{outline:"none",...e.style},onMouseDown:pe(e.onMouseDown,()=>{R.current=!0}),onFocus:pe(e.onFocus,E=>{const k=!R.current;if(E.target===E.currentTarget&&k&&!f){const _=new CustomEvent(Ah,gN);if(E.currentTarget.dispatchEvent(_),!_.defaultPrevented){const N=C().filter(V=>V.focusable),B=N.find(V=>V.active),$=N.find(V=>V.id===g),L=[B,$,...N].filter(Boolean).map(V=>V.ref.current);vT(L,u)}}R.current=!1}),onBlur:pe(e.onBlur,()=>m(!1))})})}),hT="RovingFocusGroupItem",fT=w.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...a}=e,s=gO(),c=o||s,l=CN(hT,n),u=l.currentTabStopId===c,d=uT(n),{onFocusableItemAdd:p,onFocusableItemRemove:h}=l;return w.useEffect(()=>{if(r)return p(),()=>h()},[r,p,h]),P.jsx(av.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:P.jsx(we.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...a,ref:t,onMouseDown:pe(e.onMouseDown,v=>{r?l.onItemFocus(c):v.preventDefault()}),onFocus:pe(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:pe(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){l.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const g=EN(v,l.orientation,l.dir);if(g!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let f=d().filter(m=>m.focusable).map(m=>m.ref.current);if(g==="last")f.reverse();else if(g==="prev"||g==="next"){g==="prev"&&f.reverse();const m=f.indexOf(v.currentTarget);f=l.loop?TN(f,m+1):f.slice(m+1)}setTimeout(()=>vT(f))}})})})});fT.displayName=hT;var RN={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function PN(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function EN(e,t,n){const r=PN(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return RN[r]}function vT(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function TN(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var AN=pT,bN=fT;function Fg(e){const t=w.useRef({value:e,previous:e});return w.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Bg="Radio",[IN,gT]=Ko(Bg),[_N,kN]=IN(Bg),mT=w.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:o,disabled:a,value:s="on",onCheck:c,form:l,...u}=e,[d,p]=w.useState(null),h=Ue(t,y=>p(y)),v=w.useRef(!1),g=d?l||!!d.closest("form"):!0;return P.jsxs(_N,{scope:n,checked:i,disabled:a,children:[P.jsx(we.button,{type:"button",role:"radio","aria-checked":i,"data-state":CT(i),"data-disabled":a?"":void 0,disabled:a,value:s,...u,ref:h,onClick:pe(e.onClick,y=>{i||c==null||c(),g&&(v.current=y.isPropagationStopped(),v.current||y.stopPropagation())})}),g&&P.jsx(xN,{control:d,bubbles:!v.current,name:r,value:s,checked:i,required:o,disabled:a,form:l,style:{transform:"translateX(-100%)"}})]})});mT.displayName=Bg;var yT="RadioIndicator",ST=w.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,o=kN(yT,n);return P.jsx(Xc,{present:r||o.checked,children:P.jsx(we.span,{"data-state":CT(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t})})});ST.displayName=yT;var xN=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,o=w.useRef(null),a=Fg(n),s=hd(t);return w.useEffect(()=>{const c=o.current,l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"checked").set;if(a!==n&&d){const p=new Event("click",{bubbles:r});d.call(c,n),c.dispatchEvent(p)}},[a,n,r]),P.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...e.style,...s,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function CT(e){return e?"checked":"unchecked"}var ON=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],qg="RadioGroup",[MN,Dq]=Ko(qg,[dT,gT]),wT=dT(),RT=gT(),[DN,NN]=MN(qg),PT=w.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:o,required:a=!1,disabled:s=!1,orientation:c,dir:l,loop:u=!0,onValueChange:d,...p}=e,h=wT(n),v=Lg(l),[g,y]=Zc({prop:o,defaultProp:i,onChange:d});return P.jsx(DN,{scope:n,name:r,required:a,disabled:s,value:g,onValueChange:y,children:P.jsx(AN,{asChild:!0,...h,orientation:c,dir:v,loop:u,children:P.jsx(we.div,{role:"radiogroup","aria-required":a,"aria-orientation":c,"data-disabled":s?"":void 0,dir:v,...p,ref:t})})})});PT.displayName=qg;var ET="RadioGroupItem",TT=w.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,o=NN(ET,n),a=o.disabled||r,s=wT(n),c=RT(n),l=w.useRef(null),u=Ue(t,l),d=o.value===i.value,p=w.useRef(!1);return w.useEffect(()=>{const h=g=>{ON.includes(g.key)&&(p.current=!0)},v=()=>p.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",v)}},[]),P.jsx(bN,{asChild:!0,...s,focusable:!a,active:d,children:P.jsx(mT,{disabled:a,required:o.required,checked:d,...c,...i,name:o.name,ref:u,onCheck:()=>o.onValueChange(i.value),onKeyDown:pe(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:pe(i.onFocus,()=>{var h;p.current&&((h=l.current)==null||h.click())})})})});TT.displayName=ET;var zN="RadioGroupIndicator",AT=w.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=RT(n);return P.jsx(ST,{...i,...r,ref:t})});AT.displayName=zN;var bT=PT,IT=TT,jN=AT;const _T=w.forwardRef(({className:e,...t},n)=>P.jsx(bT,{className:Le("grid gap-2",e),...t,ref:n}));_T.displayName=bT.displayName;const kT=w.forwardRef(({className:e,...t},n)=>P.jsx(IT,{ref:n,className:Le("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:P.jsx(jN,{className:"flex items-center justify-center",children:P.jsx(Xk,{className:"h-2.5 w-2.5 fill-current text-current"})})}));kT.displayName=IT.displayName;var Ug="Checkbox",[LN,Nq]=Ko(Ug),[FN,BN]=LN(Ug),xT=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:o,required:a,disabled:s,value:c="on",onCheckedChange:l,form:u,...d}=e,[p,h]=w.useState(null),v=Ue(t,C=>h(C)),g=w.useRef(!1),y=p?u||!!p.closest("form"):!0,[f=!1,m]=Zc({prop:i,defaultProp:o,onChange:l}),S=w.useRef(f);return w.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const R=()=>m(S.current);return C.addEventListener("reset",R),()=>C.removeEventListener("reset",R)}},[p,m]),P.jsxs(FN,{scope:n,state:f,disabled:s,children:[P.jsx(we.button,{type:"button",role:"checkbox","aria-checked":Wr(f)?"mixed":f,"aria-required":a,"data-state":DT(f),"data-disabled":s?"":void 0,disabled:s,value:c,...d,ref:v,onKeyDown:pe(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:pe(e.onClick,C=>{m(R=>Wr(R)?!0:!R),y&&(g.current=C.isPropagationStopped(),g.current||C.stopPropagation())})}),y&&P.jsx(qN,{control:p,bubbles:!g.current,name:r,value:c,checked:f,required:a,disabled:s,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Wr(o)?!1:o})]})});xT.displayName=Ug;var OT="CheckboxIndicator",MT=w.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,o=BN(OT,n);return P.jsx(Xc,{present:r||Wr(o.state)||o.state===!0,children:P.jsx(we.span,{"data-state":DT(o.state),"data-disabled":o.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});MT.displayName=OT;var qN=e=>{const{control:t,checked:n,bubbles:r=!0,defaultChecked:i,...o}=e,a=w.useRef(null),s=Fg(n),c=hd(t);w.useEffect(()=>{const u=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(s!==n&&h){const v=new Event("click",{bubbles:r});u.indeterminate=Wr(n),h.call(u,Wr(n)?!1:n),u.dispatchEvent(v)}},[s,n,r]);const l=w.useRef(Wr(n)?!1:n);return P.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??l.current,...o,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Wr(e){return e==="indeterminate"}function DT(e){return Wr(e)?"indeterminate":e?"checked":"unchecked"}var NT=xT,UN=MT;const zT=w.forwardRef(({className:e,...t},n)=>P.jsx(NT,{ref:n,className:Le("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:P.jsx(UN,{className:Le("flex items-center justify-center text-current"),children:P.jsx(Qk,{className:"h-4 w-4"})})}));zT.displayName=NT.displayName;var $N="Label",jT=w.forwardRef((e,t)=>P.jsx(we.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));jT.displayName=$N;var LT=jT;const VN=Pg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),cv=w.forwardRef(({className:e,...t},n)=>P.jsx(LT,{ref:n,className:Le(VN(),e),...t}));cv.displayName=LT.displayName;function FT(e,[t,n]){return Math.min(n,Math.max(t,e))}var BT=["PageUp","PageDown"],qT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],UT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Yo="Slider",[lv,HN,WN]=yg(Yo),[$T,zq]=Ko(Yo,[WN]),[KN,Rd]=$T(Yo),VT=w.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:o=1,orientation:a="horizontal",disabled:s=!1,minStepsBetweenThumbs:c=0,defaultValue:l=[r],value:u,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:h=!1,form:v,...g}=e,y=w.useRef(new Set),f=w.useRef(0),S=a==="horizontal"?JN:GN,[C=[],R]=Zc({prop:u,defaultProp:l,onChange:N=>{var $;($=[...y.current][f.current])==null||$.focus(),d(N)}}),T=w.useRef(C);function A(N){const B=ez(C,N);_(N,B)}function E(N){_(N,f.current)}function k(){const N=T.current[f.current];C[f.current]!==N&&p(C)}function _(N,B,{commit:$}={commit:!1}){const j=iz(o),L=oz(Math.round((N-r)/o)*o+r,j),V=FT(L,[r,i]);R((Y=[])=>{const b=XN(Y,V,B);if(rz(b,c*o)){f.current=b.indexOf(V);const D=String(b)!==String(Y);return D&&$&&p(b),D?b:Y}else return Y})}return P.jsx(KN,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:i,valueIndexToChangeRef:f,thumbs:y.current,values:C,orientation:a,form:v,children:P.jsx(lv.Provider,{scope:e.__scopeSlider,children:P.jsx(lv.Slot,{scope:e.__scopeSlider,children:P.jsx(S,{"aria-disabled":s,"data-disabled":s?"":void 0,...g,ref:t,onPointerDown:pe(g.onPointerDown,()=>{s||(T.current=C)}),min:r,max:i,inverted:h,onSlideStart:s?void 0:A,onSlideMove:s?void 0:E,onSlideEnd:s?void 0:k,onHomeKeyDown:()=>!s&&_(r,0,{commit:!0}),onEndKeyDown:()=>!s&&_(i,C.length-1,{commit:!0}),onStepKeyDown:({event:N,direction:B})=>{if(!s){const L=BT.includes(N.key)||N.shiftKey&&qT.includes(N.key)?10:1,V=f.current,Y=C[V],b=o*L*B;_(Y+b,V,{commit:!0})}}})})})})});VT.displayName=Yo;var[HT,WT]=$T(Yo,{startEdge:"left",endEdge:"right",size:"width",direction:1}),JN=w.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:o,onSlideStart:a,onSlideMove:s,onSlideEnd:c,onStepKeyDown:l,...u}=e,[d,p]=w.useState(null),h=Ue(t,S=>p(S)),v=w.useRef(),g=Lg(i),y=g==="ltr",f=y&&!o||!y&&o;function m(S){const C=v.current||d.getBoundingClientRect(),R=[0,C.width],A=$g(R,f?[n,r]:[r,n]);return v.current=C,A(S-C.left)}return P.jsx(HT,{scope:e.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:P.jsx(KT,{dir:g,"data-orientation":"horizontal",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const C=m(S.clientX);a==null||a(C)},onSlideMove:S=>{const C=m(S.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,c==null||c()},onStepKeyDown:S=>{const R=UT[f?"from-left":"from-right"].includes(S.key);l==null||l({event:S,direction:R?-1:1})}})})}),GN=w.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:s,onStepKeyDown:c,...l}=e,u=w.useRef(null),d=Ue(t,u),p=w.useRef(),h=!i;function v(g){const y=p.current||u.current.getBoundingClientRect(),f=[0,y.height],S=$g(f,h?[r,n]:[n,r]);return p.current=y,S(g-y.top)}return P.jsx(HT,{scope:e.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:P.jsx(KT,{"data-orientation":"vertical",...l,ref:d,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=v(g.clientY);o==null||o(y)},onSlideMove:g=>{const y=v(g.clientY);a==null||a(y)},onSlideEnd:()=>{p.current=void 0,s==null||s()},onStepKeyDown:g=>{const f=UT[h?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:f?-1:1})}})})}),KT=w.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:s,onStepKeyDown:c,...l}=e,u=Rd(Yo,n);return P.jsx(we.span,{...l,ref:t,onKeyDown:pe(e.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(s(d),d.preventDefault()):BT.concat(qT).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:pe(e.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(p)?p.focus():r(d)}),onPointerMove:pe(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:pe(e.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),o(d))})})}),JT="SliderTrack",GT=w.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=Rd(JT,n);return P.jsx(we.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});GT.displayName=JT;var uv="SliderRange",QT=w.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=Rd(uv,n),o=WT(uv,n),a=w.useRef(null),s=Ue(t,a),c=i.values.length,l=i.values.map(p=>XT(p,i.min,i.max)),u=c>1?Math.min(...l):0,d=100-Math.max(...l);return P.jsx(we.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:s,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:d+"%"}})});QT.displayName=uv;var dv="SliderThumb",YT=w.forwardRef((e,t)=>{const n=HN(e.__scopeSlider),[r,i]=w.useState(null),o=Ue(t,s=>i(s)),a=w.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return P.jsx(QN,{...e,ref:o,index:a})}),QN=w.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...o}=e,a=Rd(dv,n),s=WT(dv,n),[c,l]=w.useState(null),u=Ue(t,m=>l(m)),d=c?a.form||!!c.closest("form"):!0,p=hd(c),h=a.values[r],v=h===void 0?0:XT(h,a.min,a.max),g=ZN(r,a.values.length),y=p==null?void 0:p[s.size],f=y?tz(y,v,s.direction):0;return w.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),P.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${f}px)`},children:[P.jsx(lv.ItemSlot,{scope:e.__scopeSlider,children:P.jsx(we.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":h,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:u,style:h===void 0?{display:"none"}:e.style,onFocus:pe(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),d&&P.jsx(YN,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:h},r)]})});YT.displayName=dv;var YN=e=>{const{value:t,...n}=e,r=w.useRef(null),i=Fg(t);return w.useEffect(()=>{const o=r.current,a=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(a,"value").set;if(i!==t&&c){const l=new Event("input",{bubbles:!0});c.call(o,t),o.dispatchEvent(l)}},[i,t]),P.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:t})};function XN(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,o)=>i-o)}function XT(e,t,n){const o=100/(n-t)*(e-t);return FT(o,[0,100])}function ZN(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function ez(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function tz(e,t,n){const r=e/2,o=$g([0,50],[0,r]);return(r-o(t)*n)*n}function nz(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function rz(e,t){if(t>0){const n=nz(e);return Math.min(...n)>=t}return!0}function $g(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function iz(e){return(String(e).split(".")[1]||"").length}function oz(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var ZT=VT,sz=GT,az=QT,cz=YT;const e1=w.forwardRef(({className:e,...t},n)=>P.jsxs(ZT,{ref:n,className:Le("relative flex w-full touch-none select-none items-center",e),...t,children:[P.jsx(sz,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:P.jsx(az,{className:"absolute h-full bg-primary"})}),P.jsx(cz,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));e1.displayName=ZT.displayName;const lz=({question:e,answer:t,onAnswerChange:n,isListening:r,onStartRecording:i,onStopRecording:o,voiceEnabled:a,isSpeaking:s,onStopSpeaking:c,isWaitingToRecord:l,language:u})=>{const[d,p]=w.useState(null),[h,v]=w.useState(!1);w.useRef(null),w.useRef([]);const g=(A,E)=>u==="en"?A:E,y=async()=>{s||(p(null),v(!1),i())},f=()=>{v(!0),o(),setTimeout(()=>{v(!1)},1e3)},m=A=>{n(A[0].toString())},S=(A,E)=>{const k=t?t.split(",").filter(Boolean):[];if(E){if(!k.includes(A)){const _=[...k,A];n(_.join(","))}}else{const _=k.filter(N=>N!==A);n(_.join(","))}},C=A=>t?t.split(",").filter(Boolean).includes(A):!1,R=()=>a?P.jsxs("div",{className:"flex flex-col items-center mt-4",children:[P.jsxs(zr,{variant:r?"destructive":"outline",size:"lg",onClick:r?f:y,disabled:h||s||l,className:`flex items-center gap-2 transition-all duration-200 w-full sm:w-auto justify-center ${r?"animate-pulse bg-red-500 hover:bg-red-600":""}`,children:[r?P.jsx(Zk,{size:20}):P.jsx(ex,{size:20}),h?g("Processing...","កំពុងដំណើរការ..."):s||l?g("Please wait...","សូមរង់ចាំ..."):r?g("Tap to Stop","ចុចដើម្បីបញ្ឈប់"):g("Tap to Record","ចុចដើម្បីថត")]}),r&&P.jsx("div",{className:"mt-4 text-center",children:P.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-700 rounded-full animate-pulse",children:[P.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),g("Recording... Tap to stop","កំពុងថត... ចុចដើម្បីបញ្ឈប់")]})}),d&&P.jsxs("div",{className:"mt-2 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:[P.jsx("p",{className:"font-medium",children:g("Recording Error","កំហុសការថត")}),P.jsx("p",{children:d})]})]}):null,T=()=>{var A,E;switch(e.type){case"text":return P.jsxs("div",{className:"space-y-4",children:[P.jsx(lT,{placeholder:g("Type your answer here or use voice recording...","វាយបញ្ចូលចម្លើយរបស់អ្នកនៅទីនេះឬប្រើការថតសំឡេង..."),value:t,onChange:_=>n(_.target.value),className:"min-h-[120px] text-lg"}),R()]});case"single-select":return P.jsxs("div",{className:"space-y-4",children:[P.jsx(_T,{value:t,onValueChange:n,className:"space-y-3",children:(A=e.options)==null?void 0:A.map(_=>P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsx(kT,{value:_.name,id:`option-${_.value}`}),P.jsx(cv,{htmlFor:`option-${_.value}`,className:"text-lg cursor-pointer flex-1 py-2",children:_.name})]},_.value))}),P.jsxs("div",{className:"text-center",children:[P.jsx("p",{className:"text-sm text-gray-600 mb-2",children:g("Or say your choice aloud:","ឬនិយាយជម្រើសរបស់អ្នកឮ:")}),R()]})]});case"multi-select":return P.jsxs("div",{className:"space-y-4",children:[P.jsx("div",{className:"space-y-3",children:(E=e.options)==null?void 0:E.map(_=>P.jsxs("div",{className:"flex items-center space-x-3",children:[P.jsx(zT,{id:`multi-option-${_.value}`,checked:C(_.name),onCheckedChange:N=>S(_.name,!!N)}),P.jsx(cv,{htmlFor:`multi-option-${_.value}`,className:"text-lg cursor-pointer flex-1 py-2",children:_.name})]},_.value))}),P.jsxs("div",{className:"text-center",children:[P.jsx("p",{className:"text-sm text-gray-600 mb-2",children:g('Or say your choices separated by "and":','ឬនិយាយជម្រើសរបស់អ្នកដោយបំបែកដោយ "និង":')}),R()]})]});case"rating":const k=t?parseInt(t):5;return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"px-4",children:[P.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[P.jsx("span",{children:g("1 - Not likely","1 - មិនទំនង")}),P.jsx("span",{children:g("10 - Very likely","10 - ទំនងខ្លាំង")})]}),P.jsx(e1,{value:[k],onValueChange:m,max:10,min:1,step:1,className:"w-full"}),P.jsx("div",{className:"text-center mt-4",children:P.jsx("span",{className:"text-2xl font-bold text-blue-600",children:k})})]}),P.jsxs("div",{className:"text-center",children:[P.jsx("p",{className:"text-sm text-gray-600 mb-2",children:g("Or say a number from 1 to 10:","ឬនិយាយលេខពី 1 ដល់ 10:")}),R()]})]});default:return null}};return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"text-center",children:[P.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.question}),e.required&&P.jsx("p",{className:"text-sm text-red-600",children:g("* Required","* ត្រូវការ")})]}),T(),r&&P.jsx("div",{className:"text-center",children:P.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-red-100 text-red-700 rounded-full",children:[P.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),g("Listening... Speak now","កំពុងស្តាប់... និយាយឥឡូវ")]})})]})};function t1(e,t){return function(){return e.apply(t,arguments)}}const{toString:uz}=Object.prototype,{getPrototypeOf:Vg}=Object,{iterator:Pd,toStringTag:n1}=Symbol,Ed=(e=>t=>{const n=uz.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tn=e=>(e=e.toLowerCase(),t=>Ed(t)===e),Td=e=>t=>typeof t===e,{isArray:Xo}=Array,Bc=Td("undefined");function dz(e){return e!==null&&!Bc(e)&&e.constructor!==null&&!Bc(e.constructor)&&Dt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const r1=Tn("ArrayBuffer");function pz(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&r1(e.buffer),t}const hz=Td("string"),Dt=Td("function"),i1=Td("number"),Ad=e=>e!==null&&typeof e=="object",fz=e=>e===!0||e===!1,iu=e=>{if(Ed(e)!=="object")return!1;const t=Vg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(n1 in e)&&!(Pd in e)},vz=Tn("Date"),gz=Tn("File"),mz=Tn("Blob"),yz=Tn("FileList"),Sz=e=>Ad(e)&&Dt(e.pipe),Cz=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Dt(e.append)&&((t=Ed(e))==="formdata"||t==="object"&&Dt(e.toString)&&e.toString()==="[object FormData]"))},wz=Tn("URLSearchParams"),[Rz,Pz,Ez,Tz]=["ReadableStream","Request","Response","Headers"].map(Tn),Az=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function tl(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Xo(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let s;for(r=0;r<a;r++)s=o[r],t.call(null,e[s],s,e)}}function o1(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const ki=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,s1=e=>!Bc(e)&&e!==ki;function pv(){const{caseless:e}=s1(this)&&this||{},t={},n=(r,i)=>{const o=e&&o1(t,i)||i;iu(t[o])&&iu(r)?t[o]=pv(t[o],r):iu(r)?t[o]=pv({},r):Xo(r)?t[o]=r.slice():t[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&tl(arguments[r],n);return t}const bz=(e,t,n,{allOwnKeys:r}={})=>(tl(t,(i,o)=>{n&&Dt(i)?e[o]=t1(i,n):e[o]=i},{allOwnKeys:r}),e),Iz=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),_z=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},kz=(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],(!r||r(a,e,t))&&!s[a]&&(t[a]=e[a],s[a]=!0);e=n!==!1&&Vg(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},xz=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Oz=e=>{if(!e)return null;if(Xo(e))return e;let t=e.length;if(!i1(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Mz=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Vg(Uint8Array)),Dz=(e,t)=>{const r=(e&&e[Pd]).call(e);let i;for(;(i=r.next())&&!i.done;){const o=i.value;t.call(e,o[0],o[1])}},Nz=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},zz=Tn("HTMLFormElement"),jz=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),vS=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Lz=Tn("RegExp"),a1=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};tl(n,(i,o)=>{let a;(a=t(i,o,e))!==!1&&(r[o]=a||i)}),Object.defineProperties(e,r)},Fz=e=>{a1(e,(t,n)=>{if(Dt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Dt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Bz=(e,t)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Xo(e)?r(e):r(String(e).split(t)),n},qz=()=>{},Uz=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function $z(e){return!!(e&&Dt(e.append)&&e[n1]==="FormData"&&e[Pd])}const Vz=e=>{const t=new Array(10),n=(r,i)=>{if(Ad(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const o=Xo(r)?[]:{};return tl(r,(a,s)=>{const c=n(a,i+1);!Bc(c)&&(o[s]=c)}),t[i]=void 0,o}}return r};return n(e,0)},Hz=Tn("AsyncFunction"),Wz=e=>e&&(Ad(e)||Dt(e))&&Dt(e.then)&&Dt(e.catch),c1=((e,t)=>e?setImmediate:t?((n,r)=>(ki.addEventListener("message",({source:i,data:o})=>{i===ki&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),ki.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Dt(ki.postMessage)),Kz=typeof queueMicrotask<"u"?queueMicrotask.bind(ki):typeof process<"u"&&process.nextTick||c1,Jz=e=>e!=null&&Dt(e[Pd]),I={isArray:Xo,isArrayBuffer:r1,isBuffer:dz,isFormData:Cz,isArrayBufferView:pz,isString:hz,isNumber:i1,isBoolean:fz,isObject:Ad,isPlainObject:iu,isReadableStream:Rz,isRequest:Pz,isResponse:Ez,isHeaders:Tz,isUndefined:Bc,isDate:vz,isFile:gz,isBlob:mz,isRegExp:Lz,isFunction:Dt,isStream:Sz,isURLSearchParams:wz,isTypedArray:Mz,isFileList:yz,forEach:tl,merge:pv,extend:bz,trim:Az,stripBOM:Iz,inherits:_z,toFlatObject:kz,kindOf:Ed,kindOfTest:Tn,endsWith:xz,toArray:Oz,forEachEntry:Dz,matchAll:Nz,isHTMLForm:zz,hasOwnProperty:vS,hasOwnProp:vS,reduceDescriptors:a1,freezeMethods:Fz,toObjectSet:Bz,toCamelCase:jz,noop:qz,toFiniteNumber:Uz,findKey:o1,global:ki,isContextDefined:s1,isSpecCompliantForm:$z,toJSONObject:Vz,isAsyncFn:Hz,isThenable:Wz,setImmediate:c1,asap:Kz,isIterable:Jz};function ie(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}I.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const l1=ie.prototype,u1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{u1[e]={value:e}});Object.defineProperties(ie,u1);Object.defineProperty(l1,"isAxiosError",{value:!0});ie.from=(e,t,n,r,i,o)=>{const a=Object.create(l1);return I.toFlatObject(e,a,function(c){return c!==Error.prototype},s=>s!=="isAxiosError"),ie.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Gz=null;function hv(e){return I.isPlainObject(e)||I.isArray(e)}function d1(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function gS(e,t,n){return e?e.concat(t).map(function(i,o){return i=d1(i),!n&&o?"["+i+"]":i}).join(n?".":""):t}function Qz(e){return I.isArray(e)&&!e.some(hv)}const Yz=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function bd(e,t,n){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=I.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,y){return!I.isUndefined(y[g])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function l(v){if(v===null)return"";if(I.isDate(v))return v.toISOString();if(I.isBoolean(v))return v.toString();if(!c&&I.isBlob(v))throw new ie("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(v)||I.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,g,y){let f=v;if(v&&!y&&typeof v=="object"){if(I.endsWith(g,"{}"))g=r?g:g.slice(0,-2),v=JSON.stringify(v);else if(I.isArray(v)&&Qz(v)||(I.isFileList(v)||I.endsWith(g,"[]"))&&(f=I.toArray(v)))return g=d1(g),f.forEach(function(S,C){!(I.isUndefined(S)||S===null)&&t.append(a===!0?gS([g],C,o):a===null?g:g+"[]",l(S))}),!1}return hv(v)?!0:(t.append(gS(y,g,o),l(v)),!1)}const d=[],p=Object.assign(Yz,{defaultVisitor:u,convertValue:l,isVisitable:hv});function h(v,g){if(!I.isUndefined(v)){if(d.indexOf(v)!==-1)throw Error("Circular reference detected in "+g.join("."));d.push(v),I.forEach(v,function(f,m){(!(I.isUndefined(f)||f===null)&&i.call(t,f,I.isString(m)?m.trim():m,g,p))===!0&&h(f,g?g.concat(m):[m])}),d.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return h(e),t}function mS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Hg(e,t){this._pairs=[],e&&bd(e,this,t)}const p1=Hg.prototype;p1.append=function(t,n){this._pairs.push([t,n])};p1.toString=function(t){const n=t?function(r){return t.call(this,r,mS)}:mS;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Xz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function h1(e,t,n){if(!t)return e;const r=n&&n.encode||Xz;I.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(t,n):o=I.isURLSearchParams(t)?t.toString():new Hg(t,n).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class yS{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(r){r!==null&&t(r)})}}const f1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zz=typeof URLSearchParams<"u"?URLSearchParams:Hg,ej=typeof FormData<"u"?FormData:null,tj=typeof Blob<"u"?Blob:null,nj={isBrowser:!0,classes:{URLSearchParams:Zz,FormData:ej,Blob:tj},protocols:["http","https","file","blob","url","data"]},Wg=typeof window<"u"&&typeof document<"u",fv=typeof navigator=="object"&&navigator||void 0,rj=Wg&&(!fv||["ReactNative","NativeScript","NS"].indexOf(fv.product)<0),ij=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oj=Wg&&window.location.href||"http://localhost",sj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Wg,hasStandardBrowserEnv:rj,hasStandardBrowserWebWorkerEnv:ij,navigator:fv,origin:oj},Symbol.toStringTag,{value:"Module"})),St={...sj,...nj};function aj(e,t){return bd(e,new St.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return St.isNode&&I.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function cj(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function lj(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}function v1(e){function t(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const s=Number.isFinite(+a),c=o>=n.length;return a=!a&&I.isArray(i)?i.length:a,c?(I.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!s):((!i[a]||!I.isObject(i[a]))&&(i[a]=[]),t(n,r,i[a],o)&&I.isArray(i[a])&&(i[a]=lj(i[a])),!s)}if(I.isFormData(e)&&I.isFunction(e.entries)){const n={};return I.forEachEntry(e,(r,i)=>{t(cj(r),i,n,0)}),n}return null}function uj(e,t,n){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(0,JSON.stringify)(e)}const nl={transitional:f1,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=I.isObject(t);if(o&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return i?JSON.stringify(v1(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)||I.isReadableStream(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return aj(t,this.formSerializer).toString();if((s=I.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return bd(s?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),uj(t)):t}],transformResponse:[function(t){const n=this.transitional||nl.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(I.isResponse(t)||I.isReadableStream(t))return t;if(t&&I.isString(t)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(s){if(a)throw s.name==="SyntaxError"?ie.from(s,ie.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:St.classes.FormData,Blob:St.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],e=>{nl.headers[e]={}});const dj=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pj=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||t[n]&&dj[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},SS=Symbol("internals");function ms(e){return e&&String(e).trim().toLowerCase()}function ou(e){return e===!1||e==null?e:I.isArray(e)?e.map(ou):String(e)}function hj(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const fj=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function bh(e,t,n,r,i){if(I.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!I.isString(t)){if(I.isString(r))return t.indexOf(r)!==-1;if(I.isRegExp(r))return r.test(t)}}function vj(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function gj(e,t){const n=I.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,o,a){return this[r].call(this,t,i,o,a)},configurable:!0})})}class Nt{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function o(s,c,l){const u=ms(c);if(!u)throw new Error("header name must be a non-empty string");const d=I.findKey(i,u);(!d||i[d]===void 0||l===!0||l===void 0&&i[d]!==!1)&&(i[d||c]=ou(s))}const a=(s,c)=>I.forEach(s,(l,u)=>o(l,u,c));if(I.isPlainObject(t)||t instanceof this.constructor)a(t,n);else if(I.isString(t)&&(t=t.trim())&&!fj(t))a(pj(t),n);else if(I.isObject(t)&&I.isIterable(t)){let s={},c,l;for(const u of t){if(!I.isArray(u))throw TypeError("Object iterator must return a key-value pair");s[l=u[0]]=(c=s[l])?I.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}a(s,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=ms(t),t){const r=I.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return hj(i);if(I.isFunction(n))return n.call(this,i,r);if(I.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ms(t),t){const r=I.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||bh(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function o(a){if(a=ms(a),a){const s=I.findKey(r,a);s&&(!n||bh(r,r[s],s,n))&&(delete r[s],i=!0)}}return I.isArray(t)?t.forEach(o):o(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!t||bh(this,this[o],o,t,!0))&&(delete this[o],i=!0)}return i}normalize(t){const n=this,r={};return I.forEach(this,(i,o)=>{const a=I.findKey(r,o);if(a){n[a]=ou(i),delete n[o];return}const s=t?vj(o):String(o).trim();s!==o&&delete n[o],n[s]=ou(i),r[s]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return I.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&I.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[SS]=this[SS]={accessors:{}}).accessors,i=this.prototype;function o(a){const s=ms(a);r[s]||(gj(i,a),r[s]=!0)}return I.isArray(t)?t.forEach(o):o(t),this}}Nt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(Nt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});I.freezeMethods(Nt);function Ih(e,t){const n=this||nl,r=t||n,i=Nt.from(r.headers);let o=r.data;return I.forEach(e,function(s){o=s.call(n,o,i.normalize(),t?t.status:void 0)}),i.normalize(),o}function g1(e){return!!(e&&e.__CANCEL__)}function Zo(e,t,n){ie.call(this,e??"canceled",ie.ERR_CANCELED,t,n),this.name="CanceledError"}I.inherits(Zo,ie,{__CANCEL__:!0});function m1(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ie("Request failed with status code "+n.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function mj(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function yj(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,o=0,a;return t=t!==void 0?t:1e3,function(c){const l=Date.now(),u=r[o];a||(a=l),n[i]=c,r[i]=l;let d=o,p=0;for(;d!==i;)p+=n[d++],d=d%e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-a<t)return;const h=u&&l-u;return h?Math.round(p*1e3/h):void 0}}function Sj(e,t){let n=0,r=1e3/t,i,o;const a=(l,u=Date.now())=>{n=u,i=null,o&&(clearTimeout(o),o=null),e.apply(null,l)};return[(...l)=>{const u=Date.now(),d=u-n;d>=r?a(l,u):(i=l,o||(o=setTimeout(()=>{o=null,a(i)},r-d)))},()=>i&&a(i)]}const qu=(e,t,n=3)=>{let r=0;const i=yj(50,250);return Sj(o=>{const a=o.loaded,s=o.lengthComputable?o.total:void 0,c=a-r,l=i(c),u=a<=s;r=a;const d={loaded:a,total:s,progress:s?a/s:void 0,bytes:c,rate:l||void 0,estimated:l&&s&&u?(s-a)/l:void 0,event:o,lengthComputable:s!=null,[t?"download":"upload"]:!0};e(d)},n)},CS=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},wS=e=>(...t)=>I.asap(()=>e(...t)),Cj=St.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,St.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(St.origin),St.navigator&&/(msie|trident)/i.test(St.navigator.userAgent)):()=>!0,wj=St.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];I.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),I.isString(r)&&a.push("path="+r),I.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Rj(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Pj(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function y1(e,t,n){let r=!Rj(t);return e&&(r||n==!1)?Pj(e,t):t}const RS=e=>e instanceof Nt?{...e}:e;function Vi(e,t){t=t||{};const n={};function r(l,u,d,p){return I.isPlainObject(l)&&I.isPlainObject(u)?I.merge.call({caseless:p},l,u):I.isPlainObject(u)?I.merge({},u):I.isArray(u)?u.slice():u}function i(l,u,d,p){if(I.isUndefined(u)){if(!I.isUndefined(l))return r(void 0,l,d,p)}else return r(l,u,d,p)}function o(l,u){if(!I.isUndefined(u))return r(void 0,u)}function a(l,u){if(I.isUndefined(u)){if(!I.isUndefined(l))return r(void 0,l)}else return r(void 0,u)}function s(l,u,d){if(d in t)return r(l,u);if(d in e)return r(void 0,l)}const c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(l,u,d)=>i(RS(l),RS(u),d,!0)};return I.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=c[u]||i,p=d(e[u],t[u],u);I.isUndefined(p)&&d!==s||(n[u]=p)}),n}const S1=e=>{const t=Vi({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:s}=t;t.headers=a=Nt.from(a),t.url=h1(y1(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&a.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):"")));let c;if(I.isFormData(n)){if(St.hasStandardBrowserEnv||St.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[l,...u]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];a.setContentType([l||"multipart/form-data",...u].join("; "))}}if(St.hasStandardBrowserEnv&&(r&&I.isFunction(r)&&(r=r(t)),r||r!==!1&&Cj(t.url))){const l=i&&o&&wj.read(o);l&&a.set(i,l)}return t},Ej=typeof XMLHttpRequest<"u",Tj=Ej&&function(e){return new Promise(function(n,r){const i=S1(e);let o=i.data;const a=Nt.from(i.headers).normalize();let{responseType:s,onUploadProgress:c,onDownloadProgress:l}=i,u,d,p,h,v;function g(){h&&h(),v&&v(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(i.method.toUpperCase(),i.url,!0),y.timeout=i.timeout;function f(){if(!y)return;const S=Nt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),R={data:!s||s==="text"||s==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:S,config:e,request:y};m1(function(A){n(A),g()},function(A){r(A),g()},R),y=null}"onloadend"in y?y.onloadend=f:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(f)},y.onabort=function(){y&&(r(new ie("Request aborted",ie.ECONNABORTED,e,y)),y=null)},y.onerror=function(){r(new ie("Network Error",ie.ERR_NETWORK,e,y)),y=null},y.ontimeout=function(){let C=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const R=i.transitional||f1;i.timeoutErrorMessage&&(C=i.timeoutErrorMessage),r(new ie(C,R.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,e,y)),y=null},o===void 0&&a.setContentType(null),"setRequestHeader"in y&&I.forEach(a.toJSON(),function(C,R){y.setRequestHeader(R,C)}),I.isUndefined(i.withCredentials)||(y.withCredentials=!!i.withCredentials),s&&s!=="json"&&(y.responseType=i.responseType),l&&([p,v]=qu(l,!0),y.addEventListener("progress",p)),c&&y.upload&&([d,h]=qu(c),y.upload.addEventListener("progress",d),y.upload.addEventListener("loadend",h)),(i.cancelToken||i.signal)&&(u=S=>{y&&(r(!S||S.type?new Zo(null,e,y):S),y.abort(),y=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const m=mj(i.url);if(m&&St.protocols.indexOf(m)===-1){r(new ie("Unsupported protocol "+m+":",ie.ERR_BAD_REQUEST,e));return}y.send(o||null)})},Aj=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,i;const o=function(l){if(!i){i=!0,s();const u=l instanceof Error?l:this.reason;r.abort(u instanceof ie?u:new Zo(u instanceof Error?u.message:u))}};let a=t&&setTimeout(()=>{a=null,o(new ie(`timeout ${t} of ms exceeded`,ie.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(l=>{l.unsubscribe?l.unsubscribe(o):l.removeEventListener("abort",o)}),e=null)};e.forEach(l=>l.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>I.asap(s),c}},bj=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Ij=async function*(e,t){for await(const n of _j(e))yield*bj(n,t)},_j=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},PS=(e,t,n,r)=>{const i=Ij(e,t);let o=0,a,s=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:l,value:u}=await i.next();if(l){s(),c.close();return}let d=u.byteLength;if(n){let p=o+=d;n(p)}c.enqueue(new Uint8Array(u))}catch(l){throw s(l),l}},cancel(c){return s(c),i.return()}},{highWaterMark:2})},Id=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",C1=Id&&typeof ReadableStream=="function",kj=Id&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),w1=(e,...t)=>{try{return!!e(...t)}catch{return!1}},xj=C1&&w1(()=>{let e=!1;const t=new Request(St.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ES=64*1024,vv=C1&&w1(()=>I.isReadableStream(new Response("").body)),Uu={stream:vv&&(e=>e.body)};Id&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Uu[t]&&(Uu[t]=I.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new ie(`Response type '${t}' is not supported`,ie.ERR_NOT_SUPPORT,r)})})})(new Response);const Oj=async e=>{if(e==null)return 0;if(I.isBlob(e))return e.size;if(I.isSpecCompliantForm(e))return(await new Request(St.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(I.isArrayBufferView(e)||I.isArrayBuffer(e))return e.byteLength;if(I.isURLSearchParams(e)&&(e=e+""),I.isString(e))return(await kj(e)).byteLength},Mj=async(e,t)=>{const n=I.toFiniteNumber(e.getContentLength());return n??Oj(t)},Dj=Id&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:p}=S1(e);l=l?(l+"").toLowerCase():"text";let h=Aj([i,o&&o.toAbortSignal()],a),v;const g=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let y;try{if(c&&xj&&n!=="get"&&n!=="head"&&(y=await Mj(u,r))!==0){let R=new Request(t,{method:"POST",body:r,duplex:"half"}),T;if(I.isFormData(r)&&(T=R.headers.get("content-type"))&&u.setContentType(T),R.body){const[A,E]=CS(y,qu(wS(c)));r=PS(R.body,ES,A,E)}}I.isString(d)||(d=d?"include":"omit");const f="credentials"in Request.prototype;v=new Request(t,{...p,signal:h,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:f?d:void 0});let m=await fetch(v,p);const S=vv&&(l==="stream"||l==="response");if(vv&&(s||S&&g)){const R={};["status","statusText","headers"].forEach(k=>{R[k]=m[k]});const T=I.toFiniteNumber(m.headers.get("content-length")),[A,E]=s&&CS(T,qu(wS(s),!0))||[];m=new Response(PS(m.body,ES,A,()=>{E&&E(),g&&g()}),R)}l=l||"text";let C=await Uu[I.findKey(Uu,l)||"text"](m,e);return!S&&g&&g(),await new Promise((R,T)=>{m1(R,T,{data:C,headers:Nt.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:v})})}catch(f){throw g&&g(),f&&f.name==="TypeError"&&/Load failed|fetch/i.test(f.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,e,v),{cause:f.cause||f}):ie.from(f,f&&f.code,e,v)}}),gv={http:Gz,xhr:Tj,fetch:Dj};I.forEach(gv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const TS=e=>`- ${e}`,Nj=e=>I.isFunction(e)||e===null||e===!1,R1={getAdapter:e=>{e=I.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){n=e[o];let a;if(r=n,!Nj(n)&&(r=gv[(a=String(n)).toLowerCase()],r===void 0))throw new ie(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+o]=r}if(!r){const o=Object.entries(i).map(([s,c])=>`adapter ${s} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=t?o.length>1?`since :
`+o.map(TS).join(`
`):" "+TS(o[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:gv};function _h(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Zo(null,e)}function AS(e){return _h(e),e.headers=Nt.from(e.headers),e.data=Ih.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),R1.getAdapter(e.adapter||nl.adapter)(e).then(function(r){return _h(e),r.data=Ih.call(e,e.transformResponse,r),r.headers=Nt.from(r.headers),r},function(r){return g1(r)||(_h(e),r&&r.response&&(r.response.data=Ih.call(e,e.transformResponse,r.response),r.response.headers=Nt.from(r.response.headers))),Promise.reject(r)})}const P1="1.10.0",_d={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_d[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const bS={};_d.transitional=function(t,n,r){function i(o,a){return"[Axios v"+P1+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,s)=>{if(t===!1)throw new ie(i(a," has been removed"+(n?" in "+n:"")),ie.ERR_DEPRECATED);return n&&!bS[a]&&(bS[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,a,s):!0}};_d.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function zj(e,t,n){if(typeof e!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const s=e[o],c=s===void 0||a(s,o,e);if(c!==!0)throw new ie("option "+o+" must be "+c,ie.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ie("Unknown option "+o,ie.ERR_BAD_OPTION)}}const su={assertOptions:zj,validators:_d},On=su.validators;class ji{constructor(t){this.defaults=t||{},this.interceptors={request:new yS,response:new yS}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Vi(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&su.assertOptions(r,{silentJSONParsing:On.transitional(On.boolean),forcedJSONParsing:On.transitional(On.boolean),clarifyTimeoutError:On.transitional(On.boolean)},!1),i!=null&&(I.isFunction(i)?n.paramsSerializer={serialize:i}:su.assertOptions(i,{encode:On.function,serialize:On.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),su.assertOptions(n,{baseUrl:On.spelling("baseURL"),withXsrfToken:On.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&I.merge(o.common,o[n.method]);o&&I.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),n.headers=Nt.concat(a,o);const s=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(c=c&&g.synchronous,s.unshift(g.fulfilled,g.rejected))});const l=[];this.interceptors.response.forEach(function(g){l.push(g.fulfilled,g.rejected)});let u,d=0,p;if(!c){const v=[AS.bind(this),void 0];for(v.unshift.apply(v,s),v.push.apply(v,l),p=v.length,u=Promise.resolve(n);d<p;)u=u.then(v[d++],v[d++]);return u}p=s.length;let h=n;for(d=0;d<p;){const v=s[d++],g=s[d++];try{h=v(h)}catch(y){g.call(this,y);break}}try{u=AS.call(this,h)}catch(v){return Promise.reject(v)}for(d=0,p=l.length;d<p;)u=u.then(l[d++],l[d++]);return u}getUri(t){t=Vi(this.defaults,t);const n=y1(t.baseURL,t.url,t.allowAbsoluteUrls);return h1(n,t.params,t.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(t){ji.prototype[t]=function(n,r){return this.request(Vi(r||{},{method:t,url:n,data:(r||{}).data}))}});I.forEach(["post","put","patch"],function(t){function n(r){return function(o,a,s){return this.request(Vi(s||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}ji.prototype[t]=n(),ji.prototype[t+"Form"]=n(!0)});class Kg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(s=>{r.subscribe(s),o=s}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},t(function(o,a,s){r.reason||(r.reason=new Zo(o,a,s),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Kg(function(i){t=i}),cancel:t}}}function jj(e){return function(n){return e.apply(null,n)}}function Lj(e){return I.isObject(e)&&e.isAxiosError===!0}const mv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mv).forEach(([e,t])=>{mv[t]=e});function E1(e){const t=new ji(e),n=t1(ji.prototype.request,t);return I.extend(n,ji.prototype,t,{allOwnKeys:!0}),I.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return E1(Vi(e,i))},n}const Be=E1(nl);Be.Axios=ji;Be.CanceledError=Zo;Be.CancelToken=Kg;Be.isCancel=g1;Be.VERSION=P1;Be.toFormData=bd;Be.AxiosError=ie;Be.Cancel=Be.CanceledError;Be.all=function(t){return Promise.all(t)};Be.spread=jj;Be.isAxiosError=Lj;Be.mergeConfig=Vi;Be.AxiosHeaders=Nt;Be.formToJSON=e=>v1(I.isHTMLForm(e)?new FormData(e):e);Be.getAdapter=R1.getAdapter;Be.HttpStatusCode=mv;Be.default=Be;class Fj{constructor(t){Ie(this,"config");Ie(this,"audioElement",null);this.config=t,this.setupAudioElement()}setupAudioElement(){typeof window>"u"||this.audioElement||(this.audioElement=new Audio,this.audioElement.preload="auto")}async speak(t,n){try{console.log("[AzureTTS] Starting speech synthesis"),console.log("[AzureTTS] Language:",n),console.log("[AzureTTS] Text:",t),this.stopSpeaking();const r=`https://${this.config.region}.tts.speech.microsoft.com/cognitiveservices/v1`,i=n==="km"?this.config.voiceName:"en-US-JennyNeural",o={"Ocp-Apim-Subscription-Key":this.config.subscriptionKey,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":"audio-16khz-32kbitrate-mono-mp3"},a=`
        <speak version='1.0' xml:lang='${n==="km"?"km-KH":"en-US"}'>
          <voice name='${i}'>${t}</voice>
        </speak>`;console.log("[AzureTTS] Sending request to Azure TTS");const s=await Be.post(r,a,{headers:o,responseType:"blob"});console.log("[AzureTTS] Got response from Azure TTS");const c=new Blob([s.data],{type:"audio/mpeg"}),l=URL.createObjectURL(c);return this.audioElement||this.setupAudioElement(),new Promise((u,d)=>{this.audioElement?(this.audioElement.src=l,this.audioElement.onended=()=>{URL.revokeObjectURL(l),u()},this.audioElement.onerror=p=>{console.error("[AzureTTS] Error playing audio:",p),URL.revokeObjectURL(l),d(p)},this.audioElement.play().catch(p=>{console.error("[AzureTTS] Playback error:",p),URL.revokeObjectURL(l),d(p)})):(URL.revokeObjectURL(l),d(new Error("Audio element not available")))})}catch(r){throw console.error("[AzureTTS] Error during speech synthesis:",r),r}}stopSpeaking(){if(this.audioElement)try{this.audioElement.pause(),this.audioElement.currentTime=0}catch(t){console.warn("[AzureTTS] Error stopping audio:",t)}}cleanup(){this.stopSpeaking(),this.audioElement&&(this.audioElement.src="",this.audioElement=null)}}class Bj{constructor(t){Ie(this,"config");Ie(this,"mediaRecorder",null);Ie(this,"audioChunks",[]);Ie(this,"isRecording",!1);Ie(this,"stream",null);Ie(this,"recordingTimeout",null);Ie(this,"audioContext",null);Ie(this,"analyser",null);Ie(this,"microphone",null);Ie(this,"silenceTimer",null);Ie(this,"hasSpeech",!1);this.config=t}async startListening(){return new Promise(async(t,n)=>{try{console.log("[AzureSTT] Starting speech recognition..."),console.log("[AzureSTT] Language:",this.config.language),this.cleanup(),this.stream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:16e3,channelCount:1}}),await this.setupAudioAnalysis();const r=["audio/webm;codecs=opus","audio/webm","audio/mp4","audio/wav"];let i=null;for(const o of r)if(MediaRecorder.isTypeSupported(o)){i=o;break}if(!i)throw new Error("No supported audio format found");console.log("[AzureSTT] Using MIME type:",i),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:i}),this.audioChunks=[],this.isRecording=!0,this.hasSpeech=!1,this.mediaRecorder.ondataavailable=o=>{o.data.size>0&&this.hasSpeech&&(this.audioChunks.push(o.data),console.log("[AzureSTT] Audio chunk received (speech detected):",o.data.size,"bytes"))},this.mediaRecorder.onstop=async()=>{if(this.audioChunks.length>0)try{const o=new Blob(this.audioChunks,{type:i});if(console.log("[AzureSTT] Final audio blob size:",o.size,"bytes"),o.size<1e3){n(new Error("Audio too short, please speak longer"));return}const a=await this.transcribeAudio(o,i);t(a)}catch(o){n(o)}else n(new Error("No speech detected. Please try speaking again."))},this.mediaRecorder.start(1e3),console.log("[AzureSTT] Recording started - waiting for speech..."),this.recordingTimeout=setTimeout(()=>{this.isRecording&&(console.log("[AzureSTT] Recording timeout reached"),this.stopRecording())},1e4)}catch(r){console.error("[AzureSTT] Error starting recording:",r),n(r)}})}async setupAudioAnalysis(){try{this.audioContext=new AudioContext,this.analyser=this.audioContext.createAnalyser(),this.microphone=this.audioContext.createMediaStreamSource(this.stream),this.analyser.fftSize=256,this.analyser.smoothingTimeConstant=.8,this.microphone.connect(this.analyser),this.monitorAudioLevel()}catch(t){console.error("[AzureSTT] Error setting up audio analysis:",t)}}monitorAudioLevel(){if(!this.analyser)return;const t=new Uint8Array(this.analyser.frequencyBinCount),n=()=>{if(!this.isRecording)return;this.analyser.getByteFrequencyData(t),t.reduce((o,a)=>o+a)/t.length>30&&(this.hasSpeech||(console.log("[AzureSTT] Speech detected! Starting to record..."),this.hasSpeech=!0),this.silenceTimer&&clearTimeout(this.silenceTimer),this.silenceTimer=setTimeout(()=>{this.isRecording&&this.hasSpeech&&(console.log("[AzureSTT] Silence detected, stopping recording"),this.stopRecording())},2e3)),requestAnimationFrame(n)};n()}stopRecording(){this.recordingTimeout&&(clearTimeout(this.recordingTimeout),this.recordingTimeout=null),this.silenceTimer&&(clearTimeout(this.silenceTimer),this.silenceTimer=null),this.mediaRecorder&&this.isRecording&&(this.isRecording=!1,this.mediaRecorder.stop(),console.log("[AzureSTT] Recording stopped"))}async transcribeAudio(t,n){var r;try{console.log("[AzureSTT] Transcribing audio..."),console.log("[AzureSTT] Audio blob size:",t.size,"bytes"),console.log("[AzureSTT] MIME type:",n);const i=await this.convertToWav(t),o=`https://${this.config.region}.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1`;console.log("[AzureSTT] Sending to Azure with WAV format"),console.log("[AzureSTT] Language:",this.config.language);const a=await Be.post(o,i,{headers:{"Ocp-Apim-Subscription-Key":this.config.subscriptionKey,"Content-Type":"audio/wav",Accept:"application/json"},params:{language:this.config.language,format:"simple"},timeout:3e4});if(console.log("[AzureSTT] Full Azure response:",a.data),a.data.RecognitionStatus==="Success"){let s=a.data.DisplayText||"";if(console.log("[AzureSTT] Raw transcript from Azure:",s),s=s.trim(),s.includes("1 លោក")||s.length<3)throw console.warn("[AzureSTT] Suspicious transcript received:",s),console.warn("[AzureSTT] This might indicate an issue with the audio or API call"),new Error("Azure returned suspicious result");return s}else throw a.data.RecognitionStatus==="NoMatch"?new Error("No speech detected. Please try speaking again."):new Error(`Transcription failed: ${a.data.RecognitionStatus}`)}catch(i){throw console.error("[AzureSTT] Transcription error:",i),console.error("[AzureSTT] Error details:",((r=i.response)==null?void 0:r.data)||i.message),i}}async convertToWav(t){try{const n=await t.arrayBuffer();return(t.type.includes("webm")||t.type.includes("mp4"))&&console.log("[AzureSTT] Using audio as-is, Azure will handle conversion"),n}catch(n){throw console.error("[AzureSTT] Error converting audio:",n),n}}cleanup(){this.stopRecording(),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.audioChunks=[],this.isRecording=!1,this.hasSpeech=!1,this.analyser=null,this.microphone=null}setLanguage(t){this.config.language=t,console.log("[AzureSTT] Language set to:",t)}}var wr={},kh={},kd={},xh={},Ne={},es={},un={},T1={},xd={},Od={};Object.defineProperty(Od,"__esModule",{value:!0});Od.default=Uj;let Bl;const qj=new Uint8Array(16);function Uj(){if(!Bl&&(Bl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bl(qj)}var si={},Ji={},Md={};Object.defineProperty(Md,"__esModule",{value:!0});Md.default=void 0;var $j=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Md.default=$j;Object.defineProperty(Ji,"__esModule",{value:!0});Ji.default=void 0;var Vj=Hj(Md);function Hj(e){return e&&e.__esModule?e:{default:e}}function Wj(e){return typeof e=="string"&&Vj.default.test(e)}var Kj=Wj;Ji.default=Kj;Object.defineProperty(si,"__esModule",{value:!0});si.default=void 0;si.unsafeStringify=A1;var Jj=Gj(Ji);function Gj(e){return e&&e.__esModule?e:{default:e}}const et=[];for(let e=0;e<256;++e)et.push((e+256).toString(16).slice(1));function A1(e,t=0){return et[e[t+0]]+et[e[t+1]]+et[e[t+2]]+et[e[t+3]]+"-"+et[e[t+4]]+et[e[t+5]]+"-"+et[e[t+6]]+et[e[t+7]]+"-"+et[e[t+8]]+et[e[t+9]]+"-"+et[e[t+10]]+et[e[t+11]]+et[e[t+12]]+et[e[t+13]]+et[e[t+14]]+et[e[t+15]]}function Qj(e,t=0){const n=A1(e,t);if(!(0,Jj.default)(n))throw TypeError("Stringified UUID is invalid");return n}var Yj=Qj;si.default=Yj;Object.defineProperty(xd,"__esModule",{value:!0});xd.default=void 0;var Xj=eL(Od),Zj=si;function eL(e){return e&&e.__esModule?e:{default:e}}let IS,Oh,Mh=0,Dh=0;function tL(e,t,n){let r=t&&n||0;const i=t||new Array(16);e=e||{};let o=e.node||IS,a=e.clockseq!==void 0?e.clockseq:Oh;if(o==null||a==null){const p=e.random||(e.rng||Xj.default)();o==null&&(o=IS=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),a==null&&(a=Oh=(p[6]<<8|p[7])&16383)}let s=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Dh+1;const l=s-Mh+(c-Dh)/1e4;if(l<0&&e.clockseq===void 0&&(a=a+1&16383),(l<0||s>Mh)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Mh=s,Dh=c,Oh=a,s+=122192928e5;const u=((s&268435455)*1e4+c)%4294967296;i[r++]=u>>>24&255,i[r++]=u>>>16&255,i[r++]=u>>>8&255,i[r++]=u&255;const d=s/4294967296*1e4&268435455;i[r++]=d>>>8&255,i[r++]=d&255,i[r++]=d>>>24&15|16,i[r++]=d>>>16&255,i[r++]=a>>>8|128,i[r++]=a&255;for(let p=0;p<6;++p)i[r+p]=o[p];return t||(0,Zj.unsafeStringify)(i)}var nL=tL;xd.default=nL;var Dd={},ti={},rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.default=void 0;var rL=iL(Ji);function iL(e){return e&&e.__esModule?e:{default:e}}function oL(e){if(!(0,rL.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}var sL=oL;rl.default=sL;Object.defineProperty(ti,"__esModule",{value:!0});ti.URL=ti.DNS=void 0;ti.default=dL;var aL=si,cL=lL(rl);function lL(e){return e&&e.__esModule?e:{default:e}}function uL(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}const b1="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ti.DNS=b1;const I1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ti.URL=I1;function dL(e,t,n){function r(i,o,a,s){var c;if(typeof i=="string"&&(i=uL(i)),typeof o=="string"&&(o=(0,cL.default)(o)),((c=o)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+i.length);if(l.set(o),l.set(i,o.length),l=n(l),l[6]=l[6]&15|t,l[8]=l[8]&63|128,a){s=s||0;for(let u=0;u<16;++u)a[s+u]=l[u];return a}return(0,aL.unsafeStringify)(l)}try{r.name=e}catch{}return r.DNS=b1,r.URL=I1,r}var Nd={};Object.defineProperty(Nd,"__esModule",{value:!0});Nd.default=void 0;function pL(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return hL(fL(vL(e),e.length*8))}function hL(e){const t=[],n=e.length*32,r="0123456789abcdef";for(let i=0;i<n;i+=8){const o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(o&15),16);t.push(a)}return t}function _1(e){return(e+64>>>9<<4)+14+1}function fL(e,t){e[t>>5]|=128<<t%32,e[_1(t)-1]=t;let n=1732584193,r=-271733879,i=-1732584194,o=271733878;for(let a=0;a<e.length;a+=16){const s=n,c=r,l=i,u=o;n=dt(n,r,i,o,e[a],7,-680876936),o=dt(o,n,r,i,e[a+1],12,-389564586),i=dt(i,o,n,r,e[a+2],17,606105819),r=dt(r,i,o,n,e[a+3],22,-1044525330),n=dt(n,r,i,o,e[a+4],7,-176418897),o=dt(o,n,r,i,e[a+5],12,1200080426),i=dt(i,o,n,r,e[a+6],17,-1473231341),r=dt(r,i,o,n,e[a+7],22,-45705983),n=dt(n,r,i,o,e[a+8],7,1770035416),o=dt(o,n,r,i,e[a+9],12,-1958414417),i=dt(i,o,n,r,e[a+10],17,-42063),r=dt(r,i,o,n,e[a+11],22,-1990404162),n=dt(n,r,i,o,e[a+12],7,1804603682),o=dt(o,n,r,i,e[a+13],12,-40341101),i=dt(i,o,n,r,e[a+14],17,-1502002290),r=dt(r,i,o,n,e[a+15],22,1236535329),n=pt(n,r,i,o,e[a+1],5,-165796510),o=pt(o,n,r,i,e[a+6],9,-1069501632),i=pt(i,o,n,r,e[a+11],14,643717713),r=pt(r,i,o,n,e[a],20,-373897302),n=pt(n,r,i,o,e[a+5],5,-701558691),o=pt(o,n,r,i,e[a+10],9,38016083),i=pt(i,o,n,r,e[a+15],14,-660478335),r=pt(r,i,o,n,e[a+4],20,-405537848),n=pt(n,r,i,o,e[a+9],5,568446438),o=pt(o,n,r,i,e[a+14],9,-1019803690),i=pt(i,o,n,r,e[a+3],14,-187363961),r=pt(r,i,o,n,e[a+8],20,1163531501),n=pt(n,r,i,o,e[a+13],5,-1444681467),o=pt(o,n,r,i,e[a+2],9,-51403784),i=pt(i,o,n,r,e[a+7],14,1735328473),r=pt(r,i,o,n,e[a+12],20,-1926607734),n=ht(n,r,i,o,e[a+5],4,-378558),o=ht(o,n,r,i,e[a+8],11,-2022574463),i=ht(i,o,n,r,e[a+11],16,1839030562),r=ht(r,i,o,n,e[a+14],23,-35309556),n=ht(n,r,i,o,e[a+1],4,-1530992060),o=ht(o,n,r,i,e[a+4],11,1272893353),i=ht(i,o,n,r,e[a+7],16,-155497632),r=ht(r,i,o,n,e[a+10],23,-1094730640),n=ht(n,r,i,o,e[a+13],4,681279174),o=ht(o,n,r,i,e[a],11,-358537222),i=ht(i,o,n,r,e[a+3],16,-722521979),r=ht(r,i,o,n,e[a+6],23,76029189),n=ht(n,r,i,o,e[a+9],4,-640364487),o=ht(o,n,r,i,e[a+12],11,-421815835),i=ht(i,o,n,r,e[a+15],16,530742520),r=ht(r,i,o,n,e[a+2],23,-995338651),n=ft(n,r,i,o,e[a],6,-198630844),o=ft(o,n,r,i,e[a+7],10,1126891415),i=ft(i,o,n,r,e[a+14],15,-1416354905),r=ft(r,i,o,n,e[a+5],21,-57434055),n=ft(n,r,i,o,e[a+12],6,1700485571),o=ft(o,n,r,i,e[a+3],10,-1894986606),i=ft(i,o,n,r,e[a+10],15,-1051523),r=ft(r,i,o,n,e[a+1],21,-2054922799),n=ft(n,r,i,o,e[a+8],6,1873313359),o=ft(o,n,r,i,e[a+15],10,-30611744),i=ft(i,o,n,r,e[a+6],15,-1560198380),r=ft(r,i,o,n,e[a+13],21,1309151649),n=ft(n,r,i,o,e[a+4],6,-145523070),o=ft(o,n,r,i,e[a+11],10,-1120210379),i=ft(i,o,n,r,e[a+2],15,718787259),r=ft(r,i,o,n,e[a+9],21,-343485551),n=jr(n,s),r=jr(r,c),i=jr(i,l),o=jr(o,u)}return[n,r,i,o]}function vL(e){if(e.length===0)return[];const t=e.length*8,n=new Uint32Array(_1(t));for(let r=0;r<t;r+=8)n[r>>5]|=(e[r/8]&255)<<r%32;return n}function jr(e,t){const n=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(n>>16)<<16|n&65535}function gL(e,t){return e<<t|e>>>32-t}function zd(e,t,n,r,i,o){return jr(gL(jr(jr(t,e),jr(r,o)),i),n)}function dt(e,t,n,r,i,o,a){return zd(t&n|~t&r,e,t,i,o,a)}function pt(e,t,n,r,i,o,a){return zd(t&r|n&~r,e,t,i,o,a)}function ht(e,t,n,r,i,o,a){return zd(t^n^r,e,t,i,o,a)}function ft(e,t,n,r,i,o,a){return zd(n^(t|~r),e,t,i,o,a)}var mL=pL;Nd.default=mL;Object.defineProperty(Dd,"__esModule",{value:!0});Dd.default=void 0;var yL=k1(ti),SL=k1(Nd);function k1(e){return e&&e.__esModule?e:{default:e}}const CL=(0,yL.default)("v3",48,SL.default);var wL=CL;Dd.default=wL;var jd={},Ld={};Object.defineProperty(Ld,"__esModule",{value:!0});Ld.default=void 0;const RL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var PL={randomUUID:RL};Ld.default=PL;Object.defineProperty(jd,"__esModule",{value:!0});jd.default=void 0;var _S=x1(Ld),EL=x1(Od),TL=si;function x1(e){return e&&e.__esModule?e:{default:e}}function AL(e,t,n){if(_S.default.randomUUID&&!t&&!e)return _S.default.randomUUID();e=e||{};const r=e.random||(e.rng||EL.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let i=0;i<16;++i)t[n+i]=r[i];return t}return(0,TL.unsafeStringify)(r)}var bL=AL;jd.default=bL;var Fd={},Bd={};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.default=void 0;function IL(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function Nh(e,t){return e<<t|e>>>32-t}function _L(e){const t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=[];for(let s=0;s<a.length;++s)e.push(a.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,i=Math.ceil(r/16),o=new Array(i);for(let a=0;a<i;++a){const s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=e[a*64+c*4]<<24|e[a*64+c*4+1]<<16|e[a*64+c*4+2]<<8|e[a*64+c*4+3];o[a]=s}o[i-1][14]=(e.length-1)*8/Math.pow(2,32),o[i-1][14]=Math.floor(o[i-1][14]),o[i-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<i;++a){const s=new Uint32Array(80);for(let h=0;h<16;++h)s[h]=o[a][h];for(let h=16;h<80;++h)s[h]=Nh(s[h-3]^s[h-8]^s[h-14]^s[h-16],1);let c=n[0],l=n[1],u=n[2],d=n[3],p=n[4];for(let h=0;h<80;++h){const v=Math.floor(h/20),g=Nh(c,5)+IL(v,l,u,d)+p+t[v]+s[h]>>>0;p=d,d=u,u=Nh(l,30)>>>0,l=c,c=g}n[0]=n[0]+c>>>0,n[1]=n[1]+l>>>0,n[2]=n[2]+u>>>0,n[3]=n[3]+d>>>0,n[4]=n[4]+p>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var kL=_L;Bd.default=kL;Object.defineProperty(Fd,"__esModule",{value:!0});Fd.default=void 0;var xL=O1(ti),OL=O1(Bd);function O1(e){return e&&e.__esModule?e:{default:e}}const ML=(0,xL.default)("v5",80,OL.default);var DL=ML;Fd.default=DL;var qd={};Object.defineProperty(qd,"__esModule",{value:!0});qd.default=void 0;var NL="00000000-0000-0000-0000-000000000000";qd.default=NL;var Ud={};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.default=void 0;var zL=jL(Ji);function jL(e){return e&&e.__esModule?e:{default:e}}function LL(e){if(!(0,zL.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var FL=LL;Ud.default=FL;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=u(xd),n=u(Dd),r=u(jd),i=u(Fd),o=u(qd),a=u(Ud),s=u(Ji),c=u(si),l=u(rl);function u(d){return d&&d.__esModule?d:{default:d}}})(T1);Object.defineProperty(un,"__esModule",{value:!0});un.createNoDashGuid=un.createGuid=void 0;const BL=T1,M1=()=>(0,BL.v4)();un.createGuid=M1;const qL=()=>M1().replace(new RegExp("-","g"),"").toUpperCase();un.createNoDashGuid=qL;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=un;(function(r){r[r.Debug=0]="Debug",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error",r[r.None=4]="None"})(e.EventType||(e.EventType={}));class n{constructor(i,o){this.privName=i,this.privEventId=(0,t.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=o,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=n})(es);Object.defineProperty(Ne,"__esModule",{value:!0});Ne.AudioStreamNodeErrorEvent=Ne.AudioStreamNodeDetachedEvent=Ne.AudioStreamNodeAttachedEvent=Ne.AudioStreamNodeAttachingEvent=Ne.AudioStreamNodeEvent=Ne.AudioSourceErrorEvent=Ne.AudioSourceOffEvent=Ne.AudioSourceReadyEvent=Ne.AudioSourceInitializingEvent=Ne.AudioSourceEvent=void 0;const yv=es;class ts extends yv.PlatformEvent{constructor(t,n,r=yv.EventType.Info){super(t,r),this.privAudioSourceId=n}get audioSourceId(){return this.privAudioSourceId}}Ne.AudioSourceEvent=ts;class UL extends ts{constructor(t){super("AudioSourceInitializingEvent",t)}}Ne.AudioSourceInitializingEvent=UL;class $L extends ts{constructor(t){super("AudioSourceReadyEvent",t)}}Ne.AudioSourceReadyEvent=$L;class VL extends ts{constructor(t){super("AudioSourceOffEvent",t)}}Ne.AudioSourceOffEvent=VL;class HL extends ts{constructor(t,n){super("AudioSourceErrorEvent",t,yv.EventType.Error),this.privError=n}get error(){return this.privError}}Ne.AudioSourceErrorEvent=HL;class il extends ts{constructor(t,n,r){super(t,n),this.privAudioNodeId=r}get audioNodeId(){return this.privAudioNodeId}}Ne.AudioStreamNodeEvent=il;class WL extends il{constructor(t,n){super("AudioStreamNodeAttachingEvent",t,n)}}Ne.AudioStreamNodeAttachingEvent=WL;class KL extends il{constructor(t,n){super("AudioStreamNodeAttachedEvent",t,n)}}Ne.AudioStreamNodeAttachedEvent=KL;class JL extends il{constructor(t,n){super("AudioStreamNodeDetachedEvent",t,n)}}Ne.AudioStreamNodeDetachedEvent=JL;class GL extends il{constructor(t,n,r){super("AudioStreamNodeErrorEvent",t,n),this.privError=r}get error(){return this.privError}}Ne.AudioStreamNodeErrorEvent=GL;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.ConnectionRedirectEvent=ze.ConnectionMessageSentEvent=ze.ConnectionMessageReceivedEvent=ze.ConnectionEstablishErrorEvent=ze.ConnectionErrorEvent=ze.ConnectionClosedEvent=ze.ConnectionEstablishedEvent=ze.ConnectionStartEvent=ze.ConnectionEvent=ze.ServiceEvent=void 0;const ni=es;class QL extends ni.PlatformEvent{constructor(t,n,r=ni.EventType.Info){super(t,r),this.privJsonResult=n}get jsonString(){return this.privJsonResult}}ze.ServiceEvent=QL;class ur extends ni.PlatformEvent{constructor(t,n,r=ni.EventType.Info){super(t,r),this.privConnectionId=n}get connectionId(){return this.privConnectionId}}ze.ConnectionEvent=ur;class YL extends ur{constructor(t,n,r){super("ConnectionStartEvent",t),this.privUri=n,this.privHeaders=r}get uri(){return this.privUri}get headers(){return this.privHeaders}}ze.ConnectionStartEvent=YL;class XL extends ur{constructor(t){super("ConnectionEstablishedEvent",t)}}ze.ConnectionEstablishedEvent=XL;class ZL extends ur{constructor(t,n,r){super("ConnectionClosedEvent",t,ni.EventType.Debug),this.privReason=r,this.privStatusCode=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ze.ConnectionClosedEvent=ZL;class e2 extends ur{constructor(t,n,r){super("ConnectionErrorEvent",t,ni.EventType.Debug),this.privMessage=n,this.privType=r}get message(){return this.privMessage}get type(){return this.privType}}ze.ConnectionErrorEvent=e2;class t2 extends ur{constructor(t,n,r){super("ConnectionEstablishErrorEvent",t,ni.EventType.Error),this.privStatusCode=n,this.privReason=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}ze.ConnectionEstablishErrorEvent=t2;class n2 extends ur{constructor(t,n,r){super("ConnectionMessageReceivedEvent",t),this.privNetworkReceivedTime=n,this.privMessage=r}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}ze.ConnectionMessageReceivedEvent=n2;class r2 extends ur{constructor(t,n,r){super("ConnectionMessageSentEvent",t),this.privNetworkSentTime=n,this.privMessage=r}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}ze.ConnectionMessageSentEvent=r2;class i2 extends ur{constructor(t,n,r,i){super("ConnectionRedirectEvent",t,ni.EventType.Info),this.privRedirectUrl=n,this.privOriginalUrl=r,this.privContext=i}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}ze.ConnectionRedirectEvent=i2;var Jg={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.ObjectDisposedError=it.InvalidOperationError=it.ArgumentNullError=void 0;class o2 extends Error{constructor(t){super(t),this.name="ArgumentNull",this.message=t}}it.ArgumentNullError=o2;class s2 extends Error{constructor(t){super(t),this.name="InvalidOperation",this.message=t}}it.InvalidOperationError=s2;class a2 extends Error{constructor(t,n){super(n),this.name=t+"ObjectDisposed",this.message=n}}it.ObjectDisposedError=a2;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=it,n=un;var r;(function(o){o[o.Text=0]="Text",o[o.Binary=1]="Binary"})(r=e.MessageType||(e.MessageType={}));class i{constructor(a,s,c,l){if(this.privBody=null,a===r.Text&&s&&typeof s!="string")throw new t.InvalidOperationError("Payload must be a string");if(a===r.Binary&&s&&!(s instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=s,this.privHeaders=c||{},this.privId=l||(0,n.createNoDashGuid)(),this.messageType){case r.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===r.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===r.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=i})(Jg);var $d={};Object.defineProperty($d,"__esModule",{value:!0});$d.ConnectionOpenResponse=void 0;class c2{constructor(t,n){this.privStatusCode=t,this.privReason=n}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}$d.ConnectionOpenResponse=c2;var Vd={};Object.defineProperty(Vd,"__esModule",{value:!0});Vd.DeferralMap=void 0;class l2{constructor(){this.privMap={}}add(t,n){this.privMap[t]=n}getId(t){return this.privMap[t]}complete(t,n){try{this.privMap[t].resolve(n)}catch(r){this.privMap[t].reject(r)}finally{this.privMap[t]=void 0}}}Vd.DeferralMap=l2;var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.SendingAgentContextMessageEvent=Hi.DialogEvent=void 0;const kS=es;class D1 extends kS.PlatformEvent{constructor(t,n=kS.EventType.Info){super(t,n)}}Hi.DialogEvent=D1;class u2 extends D1{constructor(t){super("SendingAgentContextMessageEvent"),this.privAgentConfig=t}get agentConfig(){return this.privAgentConfig}}Hi.SendingAgentContextMessageEvent=u2;var Hd={},ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.EventSource=void 0;const d2=it,p2=un;class h2{constructor(t){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=t}onEvent(t){if(this.isDisposed())throw new d2.ObjectDisposedError("EventSource");if(this.metadata)for(const n in this.metadata)n&&t.metadata&&(t.metadata[n]||(t.metadata[n]=this.metadata[n]));for(const n in this.privEventListeners)n&&this.privEventListeners[n]&&this.privEventListeners[n](t)}attach(t){const n=(0,p2.createNoDashGuid)();return this.privEventListeners[n]=t,{detach:()=>(delete this.privEventListeners[n],Promise.resolve())}}attachListener(t){return this.attach(n=>t.onEvent(n))}attachConsoleListener(t){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(n=>t.onEvent(n)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}ol.EventSource=h2;Object.defineProperty(Hd,"__esModule",{value:!0});Hd.Events=void 0;const f2=it,v2=ol;class qc{static setEventSource(t){if(!t)throw new f2.ArgumentNullError("eventSource");qc.privInstance=t}static get instance(){return qc.privInstance}}Hd.Events=qc;qc.privInstance=new v2.EventSource;var N1={};Object.defineProperty(N1,"__esModule",{value:!0});var z1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))})(z1);var j1={};Object.defineProperty(j1,"__esModule",{value:!0});var L1={};Object.defineProperty(L1,"__esModule",{value:!0});var F1={};Object.defineProperty(F1,"__esModule",{value:!0});var B1={};Object.defineProperty(B1,"__esModule",{value:!0});var q1={};Object.defineProperty(q1,"__esModule",{value:!0});var U1={};Object.defineProperty(U1,"__esModule",{value:!0});var $1={};Object.defineProperty($1,"__esModule",{value:!0});var V1={};Object.defineProperty(V1,"__esModule",{value:!0});var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.List=void 0;const g2=it;class Er{constructor(t){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],t)for(const n of t)this.privList.push(n)}get(t){return this.throwIfDisposed(),this.privList[t]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(t){this.throwIfDisposed(),this.insertAt(this.privList.length,t)}insertAt(t,n){this.throwIfDisposed(),t===0?this.privList.unshift(n):t===this.privList.length?this.privList.push(n):this.privList.splice(t,0,n),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(t){return this.throwIfDisposed(),this.remove(t,1)[0]}remove(t,n){this.throwIfDisposed();const r=this.privList.splice(t,n);return this.triggerSubscriptions(this.privRemoveSubscriptions),r}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[n]=t,{detach:()=>(delete this.privAddSubscriptions[n],Promise.resolve())}}onRemoved(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[n]=t,{detach:()=>(delete this.privRemoveSubscriptions[n],Promise.resolve())}}onDisposed(t){this.throwIfDisposed();const n=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[n]=t,{detach:()=>(delete this.privDisposedSubscriptions[n],Promise.resolve())}}join(t){return this.throwIfDisposed(),this.privList.join(t)}toArray(){const t=Array();return this.privList.forEach(n=>{t.push(n)}),t}any(t){return this.throwIfDisposed(),t?this.where(t).length()>0:this.length()>0}all(t){return this.throwIfDisposed(),this.where(t).length()===this.length()}forEach(t){this.throwIfDisposed();for(let n=0;n<this.length();n++)t(this.privList[n],n)}select(t){this.throwIfDisposed();const n=[];for(let r=0;r<this.privList.length;r++)n.push(t(this.privList[r],r));return new Er(n)}where(t){this.throwIfDisposed();const n=new Er;for(let r=0;r<this.privList.length;r++)t(this.privList[r],r)&&n.add(this.privList[r]);return n}orderBy(t){this.throwIfDisposed();const r=this.toArray().sort(t);return new Er(r)}orderByDesc(t){return this.throwIfDisposed(),this.orderBy((n,r)=>t(r,n))}clone(){return this.throwIfDisposed(),new Er(this.toArray())}concat(t){return this.throwIfDisposed(),new Er(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new Er(this.privList.concat(t))}isDisposed(){return this.privList==null}dispose(t){this.isDisposed()||(this.privDisposeReason=t,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new g2.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(t){if(t)for(const n in t)n&&t[n]()}}sl.List=Er;var Gg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(s){s[s.None=0]="None",s[s.Resolved=1]="Resolved",s[s.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class n{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=l)},l=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=l)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=n;class r{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,l)=>{this.privOnSetResult=c,this.privOnSetError=l}}}e.PromiseResultEventSource=r;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,l)=>{this.privResolve=c,this.privReject=l})}get promise(){return this.privPromise}}e.Deferred=i;class o{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new r,this.privPromiseResult=new n(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(c);for(let l=0;l<this.privSuccessHandlers.length;l++)this.executeSuccessCallback(c,this.privSuccessHandlers[l],this.privErrorHandlers[l]);this.detachHandlers()}reject(c){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(c);for(const l of this.privErrorHandlers)this.executeErrorCallback(c,l);this.detachHandlers()}on(c,l){c==null&&(c=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(l)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,l):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,l),this.detachHandlers())}executeSuccessCallback(c,l,u){try{l(c)}catch(d){this.executeErrorCallback(`'Unhandled callback error: ${d}'`,u)}}executeErrorCallback(c,l){if(l)try{l(c)}catch(u){throw new Error(`'Unhandled callback error: ${u}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=o;function a(s,c,l){s.then(u=>{try{c&&c(u)}catch(d){if(l)try{if(d instanceof Error){const p=d;l(p.name+": "+p.message)}else l(d)}catch{}}},u=>{if(l)try{if(u instanceof Error){const d=u;l(d.name+": "+d.message)}else l(u)}catch{}})}e.marshalPromiseToCallbacks=a})(Gg);var al={};Object.defineProperty(al,"__esModule",{value:!0});al.Queue=void 0;const zh=it,jh=sl,xS=Gg;var mc;(function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"})(mc||(mc={}));class m2{constructor(t){this.privPromiseStore=new jh.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=t||new jh.List,this.privDetachables=[],this.privSubscribers=new jh.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(t){this.throwIfDispose(),this.enqueueFromPromise(new Promise(n=>n(t)))}enqueueFromPromise(t){this.throwIfDispose(),t.then(n=>{this.privList.add(n)},()=>{})}dequeue(){this.throwIfDispose();const t=new xS.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:mc.Dequeue}),this.drain()),t.promise}peek(){this.throwIfDispose();const t=new xS.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:mc.Peek}),this.drain()),t.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(t,n){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=n,this.privIsDisposing=!0;const r=this.privSubscribers;if(r){for(;r.length()>0;)r.removeFirst().deferral.resolve(void 0);this.privSubscribers===r&&(this.privSubscribers=r)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&t){const i=[];return this.privPromiseStore.toArray().forEach(o=>{i.push(o)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(o=>{t(o)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(t){await this.drainAndDispose(null,t)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const t=this.privSubscribers,n=this.privList;if(t&&n){for(;n.length()>0&&t.length()>0&&!this.privIsDisposing;){const r=t.removeFirst();if(r.type===mc.Peek)r.deferral.resolve(n.first());else{const i=n.removeFirst();r.deferral.resolve(i)}}this.privSubscribers===t&&(this.privSubscribers=t),this.privList===n&&(this.privList=n)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new zh.InvalidOperationError(this.privDisposeReason):new zh.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new zh.InvalidOperationError("Queue disposing")}}al.Queue=m2;var Wd={};Object.defineProperty(Wd,"__esModule",{value:!0});Wd.RawWebsocketMessage=void 0;const ql=Jg,ys=it,y2=un;class S2{constructor(t,n,r){if(this.privPayload=null,!n)throw new ys.ArgumentNullError("payload");if(t===ql.MessageType.Binary&&Object.getPrototypeOf(n).constructor.name!=="ArrayBuffer")throw new ys.InvalidOperationError("Payload must be ArrayBuffer");if(t===ql.MessageType.Text&&typeof n!="string")throw new ys.InvalidOperationError("Payload must be a string");this.privMessageType=t,this.privPayload=n,this.privId=r||(0,y2.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===ql.MessageType.Binary)throw new ys.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===ql.MessageType.Text)throw new ys.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Wd.RawWebsocketMessage=S2;var Kd={};Object.defineProperty(Kd,"__esModule",{value:!0});Kd.RiffPcmEncoder=void 0;class C2{constructor(t,n){this.privActualSampleRate=t,this.privDesiredSampleRate=n}encode(t){const n=this.downSampleAudioFrame(t,this.privActualSampleRate,this.privDesiredSampleRate);if(!n)return null;const r=n.length*2,i=new ArrayBuffer(r),o=new DataView(i);return this.floatTo16BitPCM(o,0,n),i}setString(t,n,r){for(let i=0;i<r.length;i++)t.setUint8(n+i,r.charCodeAt(i))}floatTo16BitPCM(t,n,r){for(let i=0;i<r.length;i++,n+=2){const o=Math.max(-1,Math.min(1,r[i]));t.setInt16(n,o<0?o*32768:o*32767,!0)}}downSampleAudioFrame(t,n,r){if(!t)return null;if(r===n||r>n)return t;const i=n/r,o=Math.round(t.length/i),a=new Float32Array(o);let s=0,c=0;for(;c<o;){const l=Math.round((c+1)*i);let u=0,d=0;for(;s<l&&s<t.length;)u+=t[s++],d++;a[c++]=u/d}return a}}Kd.RiffPcmEncoder=C2;var Jd={};Object.defineProperty(Jd,"__esModule",{value:!0});Jd.Stream=void 0;const OS=it,w2=un,MS=al;class R2{constructor(t){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=t||(0,w2.createNoDashGuid)(),this.privReaderQueue=new MS.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(t){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(t)}catch{}}read(){if(this.privIsReadEnded)throw new OS.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async t=>((t===void 0||t.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),t))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new MS.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new OS.InvalidOperationError("Stream closed")}}Jd.Stream=R2;var Gd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))})(Gd);var Ss={},DS;function P2(){if(DS)return Ss;DS=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.ChunkedArrayBufferStream=void 0;const e=Q();let t=class extends e.Stream{constructor(r,i){super(i),this.privTargetChunkSize=Math.round(r),this.privNextBufferReadyBytes=0}writeStreamChunk(r){if(r.isEnd||this.privNextBufferReadyBytes===0&&r.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(r);return}let i=0;for(;i<r.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=r.timeReceived);const o=Math.min(r.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),s=new Uint8Array(r.buffer.slice(i,o+i));a.set(s,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=o,i+=o,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return Ss.ChunkedArrayBufferStream=t,Ss}var H1={};Object.defineProperty(H1,"__esModule",{value:!0});var Qd={};Object.defineProperty(Qd,"__esModule",{value:!0});Qd.Timeout=void 0;class gt{static load(){const t=new Map([[0,()=>{}]]),n=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),o=new Worker(i);return o.addEventListener("message",({data:c})=>{if(gt.isCallNotification(c)){const{params:{timerId:l}}=c,u=t.get(l);if(typeof u=="number"){const d=n.get(u);if(d===void 0||d!==l)throw new Error("The timer is in an undefined state.")}else if(typeof u<"u")u(),t.delete(l);else throw new Error("The timer is in an undefined state.")}else if(gt.isClearResponse(c)){const{id:l}=c,u=n.get(l);if(u===void 0)throw new Error("The timer is in an undefined state.");n.delete(l),t.delete(u)}else{const{error:{message:l}}=c;throw new Error(l)}}),{clearTimeout:c=>{const l=Math.random();n.set(l,c),t.set(c,l),o.postMessage({id:l,method:"clear",params:{timerId:c}})},setTimeout:(c,l)=>{const u=Math.random();return t.set(u,c),o.postMessage({id:null,method:"set",params:{delay:l,now:performance.now(),timerId:u}}),u}}}static loadWorkerTimers(){return()=>(gt.workerTimers!==null||(gt.workerTimers=gt.load()),gt.workerTimers)}static isCallNotification(t){return t.method!==void 0&&t.method==="call"}static isClearResponse(t){return t.error===null&&typeof t.id=="number"}}Qd.Timeout=gt;gt.workerTimers=null;gt.clearTimeout=e=>gt.timers().clearTimeout(e);gt.setTimeout=(e,t)=>gt.timers().setTimeout(e,t);gt.timers=gt.loadWorkerTimers();var de={};Object.defineProperty(de,"__esModule",{value:!0});de.OCSPCacheUpdateErrorEvent=de.OCSPResponseRetrievedEvent=de.OCSPCacheFetchErrorEvent=de.OCSPVerificationFailedEvent=de.OCSPCacheHitEvent=de.OCSPCacheEntryNeedsRefreshEvent=de.OCSPCacheEntryExpiredEvent=de.OCSPWSUpgradeStartedEvent=de.OCSPStapleReceivedEvent=de.OCSPCacheUpdateCompleteEvent=de.OCSPDiskCacheStoreEvent=de.OCSPMemoryCacheStoreEvent=de.OCSPCacheUpdateNeededEvent=de.OCSPDiskCacheHitEvent=de.OCSPCacheMissEvent=de.OCSPMemoryCacheHitEvent=de.OCSPEvent=void 0;const st=es;class at extends st.PlatformEvent{constructor(t,n,r){super(t,n),this.privSignature=r}}de.OCSPEvent=at;class E2 extends at{constructor(t){super("OCSPMemoryCacheHitEvent",st.EventType.Debug,t)}}de.OCSPMemoryCacheHitEvent=E2;class T2 extends at{constructor(t){super("OCSPCacheMissEvent",st.EventType.Debug,t)}}de.OCSPCacheMissEvent=T2;class A2 extends at{constructor(t){super("OCSPDiskCacheHitEvent",st.EventType.Debug,t)}}de.OCSPDiskCacheHitEvent=A2;class b2 extends at{constructor(t){super("OCSPCacheUpdateNeededEvent",st.EventType.Debug,t)}}de.OCSPCacheUpdateNeededEvent=b2;class I2 extends at{constructor(t){super("OCSPMemoryCacheStoreEvent",st.EventType.Debug,t)}}de.OCSPMemoryCacheStoreEvent=I2;class _2 extends at{constructor(t){super("OCSPDiskCacheStoreEvent",st.EventType.Debug,t)}}de.OCSPDiskCacheStoreEvent=_2;class k2 extends at{constructor(t){super("OCSPCacheUpdateCompleteEvent",st.EventType.Debug,t)}}de.OCSPCacheUpdateCompleteEvent=k2;class x2 extends at{constructor(){super("OCSPStapleReceivedEvent",st.EventType.Debug,"")}}de.OCSPStapleReceivedEvent=x2;class O2 extends at{constructor(t){super("OCSPWSUpgradeStartedEvent",st.EventType.Debug,t)}}de.OCSPWSUpgradeStartedEvent=O2;class M2 extends at{constructor(t,n){super("OCSPCacheEntryExpiredEvent",st.EventType.Debug,t),this.privExpireTime=n}}de.OCSPCacheEntryExpiredEvent=M2;class D2 extends at{constructor(t,n,r){super("OCSPCacheEntryNeedsRefreshEvent",st.EventType.Debug,t),this.privExpireTime=r,this.privStartTime=n}}de.OCSPCacheEntryNeedsRefreshEvent=D2;class N2 extends at{constructor(t,n,r){super("OCSPCacheHitEvent",st.EventType.Debug,t),this.privExpireTime=r,this.privExpireTimeString=new Date(r).toLocaleDateString(),this.privStartTime=n,this.privStartTimeString=new Date(n).toLocaleTimeString()}}de.OCSPCacheHitEvent=N2;class z2 extends at{constructor(t,n){super("OCSPVerificationFailedEvent",st.EventType.Debug,t),this.privError=n}}de.OCSPVerificationFailedEvent=z2;class j2 extends at{constructor(t,n){super("OCSPCacheFetchErrorEvent",st.EventType.Debug,t),this.privError=n}}de.OCSPCacheFetchErrorEvent=j2;class L2 extends at{constructor(t){super("OCSPResponseRetrievedEvent",st.EventType.Debug,t)}}de.OCSPResponseRetrievedEvent=L2;class F2 extends at{constructor(t,n){super("OCSPCacheUpdateErrorEvent",st.EventType.Debug,t),this.privError=n}}de.OCSPCacheUpdateErrorEvent=F2;var Cs={},NS;function B2(){if(NS)return Cs;NS=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.BackgroundEvent=void 0;const e=Q();class t extends e.PlatformEvent{constructor(r){super("BackgroundEvent",e.EventType.Error),this.privError=r}get error(){return this.privError}}return Cs.BackgroundEvent=t,Cs}var zS;function Q(){return zS||(zS=1,function(e){var t=le&&le.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=le&&le.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,n(Ne,e),n(ze,e),n(Jg,e),n($d,e),n(Vd,e),n(Hi,e),n(it,e),n(Hd,e),n(ol,e),n(un,e),n(N1,e),n(z1,e),n(j1,e),n(L1,e),n(F1,e),n(B1,e),n(q1,e),n(U1,e),n($1,e),n(V1,e),n(sl,e),n(es,e),n(Gg,e),n(al,e),n(Wd,e),n(Kd,e),n(Jd,e);var r=Gd;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return r.TranslationStatus}}),n(P2(),e),n(H1,e),n(Qd,e),n(de,e),n(B2(),e)}(xh)),xh}var Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.HeaderNames=void 0;class An{}Ge.HeaderNames=An;An.AuthKey="Ocp-Apim-Subscription-Key";An.Authorization="Authorization";An.SpIDAuthKey="Apim-Subscription-Id";An.ConnectionId="X-ConnectionId";An.ContentType="Content-Type";An.CustomCommandsAppId="X-CommandsAppId";An.Path="Path";An.RequestId="X-RequestId";An.RequestStreamId="X-StreamId";An.RequestTimestamp="X-Timestamp";var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.AuthInfo=void 0;class q2{constructor(t,n){this.privHeaderName=t,this.privToken=n}get headerName(){return this.privHeaderName}get token(){return this.privToken}}ns.AuthInfo=q2;Object.defineProperty(kd,"__esModule",{value:!0});kd.CognitiveSubscriptionKeyAuthentication=void 0;const U2=Q(),$2=Ge,V2=ns;class H2{constructor(t){if(!t)throw new U2.ArgumentNullError("subscriptionKey");this.privAuthInfo=new V2.AuthInfo($2.HeaderNames.AuthKey,t)}fetch(t){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(t){return Promise.resolve(this.privAuthInfo)}}kd.CognitiveSubscriptionKeyAuthentication=H2;var Yd={};Object.defineProperty(Yd,"__esModule",{value:!0});Yd.CognitiveTokenAuthentication=void 0;const jS=Q(),LS=ns,FS=Ge;class Uc{constructor(t,n){if(!t)throw new jS.ArgumentNullError("fetchCallback");if(!n)throw new jS.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=n}fetch(t){return this.privFetchCallback(t).then(n=>new LS.AuthInfo(FS.HeaderNames.Authorization,n===void 0?void 0:Uc.privTokenPrefix+n))}fetchOnExpiry(t){return this.privFetchOnExpiryCallback(t).then(n=>new LS.AuthInfo(FS.HeaderNames.Authorization,n===void 0?void 0:Uc.privTokenPrefix+n))}}Yd.CognitiveTokenAuthentication=Uc;Uc.privTokenPrefix="Bearer ";var W1={};Object.defineProperty(W1,"__esModule",{value:!0});var K1={};Object.defineProperty(K1,"__esModule",{value:!0});var ws={},Lh={},Xd={};const W2={},K2=Object.freeze(Object.defineProperty({__proto__:null,default:W2},Symbol.toStringTag,{value:"Module"})),Gi=Ab(K2);var Qg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=Q();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})})(Qg);var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.Contracts=void 0;class Tr{static throwIfNullOrUndefined(t,n){if(t==null)throw new Error("throwIfNullOrUndefined:"+n)}static throwIfNull(t,n){if(t===null)throw new Error("throwIfNull:"+n)}static throwIfNullOrWhitespace(t,n){if(Tr.throwIfNullOrUndefined(t,n),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)}static throwIfNullOrTooLong(t,n,r){if(Tr.throwIfNullOrUndefined(t,n),(""+t).length>r)throw new Error("throwIfNullOrTooLong:"+n+" (more than "+r.toString()+" characters)")}static throwIfNullOrTooShort(t,n,r){if(Tr.throwIfNullOrUndefined(t,n),(""+t).length<r)throw new Error("throwIfNullOrTooShort:"+n+" (less than "+r.toString()+" characters)")}static throwIfDisposed(t){if(t)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(t,n){if(Tr.throwIfNullOrUndefined(t,n),t.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(const r of t)Tr.throwIfNullOrWhitespace(r,n)}static throwIfFileDoesNotExist(t,n){Tr.throwIfNullOrWhitespace(t,n)}static throwIfNotUndefined(t,n){if(t!==void 0)throw new Error("throwIfNotUndefined:"+n)}}Z.Contracts=Tr;var J2=le&&le.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),G2=le&&le.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Q2=le&&le.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&J2(t,e,n);return G2(t,e),t};Object.defineProperty(Xd,"__esModule",{value:!0});Xd.ConsoleLoggingListener=void 0;const BS=Q2(Gi),Rs=Qg,Y2=Z;class X2{constructor(t=Rs.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=t}set logPath(t){Y2.Contracts.throwIfNullOrUndefined(BS.openSync,`
File System access not available`),this.privLogPath=t}set enableConsoleOutput(t){this.privEnableConsoleOutput=t}onEvent(t){if(t.eventType>=this.privLogLevelFilter){const n=this.toString(t);if(this.logCallback&&this.logCallback(n),this.privLogPath&&BS.writeFileSync(this.privLogPath,n+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(t.eventType){case Rs.LogLevel.Debug:console.debug(n);break;case Rs.LogLevel.Info:console.info(n);break;case Rs.LogLevel.Warning:console.warn(n);break;case Rs.LogLevel.Error:console.error(n);break;default:console.log(n);break}}}toString(t){const n=[`${t.eventTime}`,`${t.name}`],r=t;for(const i in r)if(i&&t.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const o=r[i];let a="<NULL>";o!=null&&(typeof o=="number"||typeof o=="string"?a=o.toString():a=JSON.stringify(o)),n.push(`${i}: ${a}`)}return n.join(" | ")}}Xd.ConsoleLoggingListener=X2;var J1={};Object.defineProperty(J1,"__esModule",{value:!0});var Fh={},ai={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class n{static getDefaultInputFormat(){return r.getDefaultInputFormat()}static getWaveFormat(o,a,s,c){return new r(o,a,s,c)}static getWaveFormatPCM(o,a,s){return new r(o,a,s)}}e.AudioStreamFormat=n;class r extends n{constructor(o=16e3,a=16,s=1,c=t.PCM){super();let l=!0;switch(c){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:l=!1}if(this.bitsPerSample=a,this.samplesPerSec=o,this.channels=s,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),l){this.privHeader=new ArrayBuffer(44);const u=new DataView(this.privHeader);this.setString(u,0,"RIFF"),u.setUint32(4,0,!0),this.setString(u,8,"WAVEfmt "),u.setUint32(16,16,!0),u.setUint16(20,this.formatTag,!0),u.setUint16(22,this.channels,!0),u.setUint32(24,this.samplesPerSec,!0),u.setUint32(28,this.avgBytesPerSec,!0),u.setUint16(32,this.channels*(this.bitsPerSample/8),!0),u.setUint16(34,this.bitsPerSample,!0),this.setString(u,36,"data"),u.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new r}static getAudioContext(o){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return o!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:o}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(o,a,s){for(let c=0;c<s.length;c++)o.setUint8(a+c,s.charCodeAt(c))}}e.AudioStreamFormatImpl=r})(ai);var qS;function Z2(){return qS||(qS=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=W(),n=Q(),r=ai;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,s,c,l){this.privRecorder=a,this.deviceId=s,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||(0,n.createNoDashGuid)(),this.privEvents=new n.EventSource,this.privMediaStream=l||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new n.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const l=c;this.privInitializeDeferral.reject(l.name+": "+l.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let s=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(s=(c,l,u)=>{a.mediaDevices.getUserMedia(c).then(l).catch(u)}),s){const c=()=>{this.onEvent(new n.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):s({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},l=>{this.privMediaStream=l,this.onEvent(new n.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},l=>{const u=`Error occurred during microphone initialization: ${l}`;this.privInitializeDeferral.reject(u),this.onEvent(new n.AudioSourceErrorEvent(this.privId,u))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(l=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${l}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new n.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new n.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(s=>(this.onEvent(new n.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(s.readEnded(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>s.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new n.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const s=this.privStreams[a];s&&s.close()}this.onEvent(new n.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(a,s){if(a===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(s);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const s=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(s===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new n.Deferred;return navigator.mediaDevices.enumerateDevices().then(l=>{for(const u of l)if(u.deviceId===s){this.privMicrophoneLabel=u.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const s=new n.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=s;try{this.privRecorder.record(this.privContext,this.privMediaStream,s)}catch(l){throw this.onEvent(new n.AudioStreamNodeErrorEvent(this.privId,a,l)),l}return s}onEvent(a){this.privEvents.onEvent(a),n.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=r.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=i,i.AUDIOFORMAT=r.AudioStreamFormat.getDefaultInputFormat()}(Fh)),Fh}var Ps={},US;function eF(){if(US)return Ps;US=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.FileAudioSource=void 0;const e=W(),t=Q(),n=ai;let r=class{constructor(o,a,s){this.privStreams={},this.privHeaderEnd=44,this.privId=s||(0,t.createNoDashGuid)(),this.privEvents=new t.EventSource,this.privSource=o,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=o.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const o=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(o,"")),Promise.reject(o)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(o){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,o));const a=await this.upload(o);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,o)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)),await this.turnOff()},id:()=>o,read:()=>a.read()})}detach(o){o&&this.privStreams[o]&&(this.privStreams[o].close(),delete this.privStreams[o],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,o)))}turnOff(){for(const o in this.privStreams)if(o){const a=this.privStreams[o];a&&!a.isClosed&&a.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(o=>Promise.resolve({bitspersample:o.bitsPerSample,channelcount:o.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:o.samplesPerSec,type:e.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),s=new t.Deferred,c=l=>{const u=new DataView(l),d=f=>String.fromCharCode(u.getUint8(f),u.getUint8(f+1),u.getUint8(f+2),u.getUint8(f+3));if(d(0)!=="RIFF"){s.reject("Invalid WAV header in file, RIFF was not found");return}if(d(8)!=="WAVE"||d(12)!=="fmt "){s.reject("Invalid WAV header in file, WAVEfmt was not found");return}const p=u.getInt32(16,!0),h=u.getUint16(22,!0),v=u.getUint32(24,!0),g=u.getUint16(34,!0);let y=36+Math.max(p-16,0);for(;d(y)!=="data";y+=2)if(y>4288){s.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=y+8,s.resolve(n.AudioStreamFormat.getWaveFormatPCM(v,g,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const l=new FileReader;l.onload=u=>{const d=u.target.result;c(d)},l.readAsArrayBuffer(a)}else{const l=a;c(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength))}return s.promise}async upload(o){const a=s=>{const c=`Error occurred while processing '${this.privFilename}'. ${s}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,o,c)),new Error(c)};try{await this.turnOn();const s=await this.privAudioFormatPromise,c=new t.ChunkedArrayBufferStream(s.avgBytesPerSec/10,o);this.privStreams[o]=c;const l=this.privSource.slice(this.privHeaderEnd),u=d=>{c.isClosed||(c.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&l instanceof Blob){const d=new FileReader;d.onerror=p=>a(p.toString()),d.onload=p=>{const h=p.target.result;u(h)},d.readAsArrayBuffer(l)}else{const d=l;u(d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength))}return c}catch(s){a(s)}}onEvent(o){this.privEvents.onEvent(o),t.Events.instance.onEvent(o)}};return Ps.FileAudioSource=r,Ps}var Zd={};Object.defineProperty(Zd,"__esModule",{value:!0});Zd.PcmRecorder=void 0;const tF=Q();class nF{constructor(t){this.privStopInputOnRelease=t}record(t,n,r){const o=new tF.RiffPcmEncoder(t.sampleRate,16e3),a=t.createMediaStreamSource(n),s=()=>{const l=(()=>{let u=0;try{return t.createScriptProcessor(u,1,1)}catch{u=2048;let p=t.sampleRate;for(;u<16384&&p>=32e3;)u<<=1,p>>=1;return t.createScriptProcessor(u,1,1)}})();l.onaudioprocess=u=>{const d=u.inputBuffer.getChannelData(0);if(r&&!r.isClosed){const p=o.encode(d);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},a.connect(l),l.connect(t.destination),this.privMediaResources={scriptProcessorNode:l,source:a,stream:n}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(t.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const l=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,u=new Blob([l],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(u)}t.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const l=new AudioWorkletNode(t,"speech-processor");l.port.onmessage=u=>{const d=u.data;if(r&&!r.isClosed){const p=o.encode(d);p&&r.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}},a.connect(l),l.connect(t.destination),this.privMediaResources={scriptProcessorNode:l,source:a,stream:n}}).catch(()=>{s()})}else try{s()}catch(l){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${l}`)}}releaseMediaResources(t){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(t.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(n=>n.stop()),this.privMediaResources.source=null))}setWorkletUrl(t){this.privSpeechProcessorScript=t}}Zd.PcmRecorder=nF;var ep={},cl={},rF=le&&le.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),iF=le&&le.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),G1=le&&le.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&rF(t,e,n);return iF(t,e),t},Yg=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cl,"__esModule",{value:!0});cl.WebsocketMessageAdapter=void 0;const oF=G1(Gi),sF=G1(Gi),aF=Yg(Gi),cF=Yg(Gi),lF=Yg(Gi),uF=Ge,te=Q();class $c{constructor(t,n,r,i,o,a){if(!t)throw new te.ArgumentNullError("uri");if(!r)throw new te.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new te.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=te.ConnectionState.None,this.privUri=t,this.privHeaders=o,this.privEnableCompression=a,this.privHeaders[uF.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===te.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new te.Deferred,this.privCertificateValidatedDeferral=new te.Deferred,this.privConnectionState=te.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!$c.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let n=new URL(this.privUri).protocol;(n==null?void 0:n.toLocaleLowerCase())==="wss:"?n="https:":(n==null?void 0:n.toLocaleLowerCase())==="ws:"&&(n="http:");const r={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:n.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),r.agent=this.getAgent(),r.agent.protocol=n,this.privWebsocketClient=new lF.default(this.privUri,r),this.privWebsocketClient.on("redirect",i=>{const o=new te.ConnectionRedirectEvent(this.privConnectionId,i,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${i}'`);te.Events.instance.onEvent(o)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new te.Queue,this.privDisconnectDeferral=new te.Deferred,this.privSendMessageQueue=new te.Queue,this.processSendQueue().catch(t=>{te.Events.instance.onEvent(new te.BackgroundEvent(t))})}catch(t){return this.privConnectionEstablishDeferral.resolve(new te.ConnectionOpenResponse(500,t)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new te.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=te.ConnectionState.Connected,this.onEvent(new te.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new te.ConnectionOpenResponse(200,""))},t=>{this.privConnectionEstablishDeferral.reject(t)})},this.privWebsocketClient.onerror=t=>{this.onEvent(new te.ConnectionErrorEvent(this.privConnectionId,t.message,t.type)),this.privLastErrorReceived=t.message},this.privWebsocketClient.onclose=t=>{this.privConnectionState===te.ConnectionState.Connecting?(this.privConnectionState=te.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new te.ConnectionOpenResponse(t.code,t.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=te.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new te.ConnectionClosedEvent(this.privConnectionId,t.code,t.reason))),this.onClose(t.code,t.reason).catch(n=>{te.Events.instance.onEvent(new te.BackgroundEvent(n))})},this.privWebsocketClient.onmessage=t=>{const n=new Date().toISOString();if(this.privConnectionState===te.ConnectionState.Connected){const r=new te.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(r.promise),t.data instanceof ArrayBuffer){const i=new te.RawWebsocketMessage(te.MessageType.Binary,t.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new te.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid binary message format. Error: ${o}`)})}else{const i=new te.RawWebsocketMessage(te.MessageType.Text,t.data);this.privMessageFormatter.toConnectionMessage(i).then(o=>{this.onEvent(new te.ConnectionMessageReceivedEvent(this.privConnectionId,n,o)),r.resolve(o)},o=>{r.reject(`Invalid text message format. Error: ${o}`)})}}},this.privConnectionEstablishDeferral.promise}send(t){if(this.privConnectionState!==te.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${te.ConnectionState[this.privConnectionState]} state`);const n=new te.Deferred,r=new te.Deferred;return this.privSendMessageQueue.enqueueFromPromise(r.promise),this.privMessageFormatter.fromConnectionMessage(t).then(i=>{r.resolve({Message:t,RawWebsocketMessage:i,sendStatusDeferral:n})},i=>{r.reject(`Error formatting the message. ${i}`)}),n.promise}read(){return this.privConnectionState!==te.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(t){if(this.privWebsocketClient)this.privConnectionState!==te.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,t||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(t){try{if(!t)return Promise.resolve();if(this.onEvent(new te.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),t.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(t.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+t.Message.id+" "+new Error().stack);return Promise.resolve()}catch(n){return Promise.reject(`websocket send error: ${n}`)}}async onClose(t,n){const r=`Connection closed. ${t}: ${n}`;this.privConnectionState=te.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},r),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(r)},r)}async processSendQueue(){for(;;){const n=await this.privSendMessageQueue.dequeue();if(!n)return;try{await this.sendRawMessage(n),n.sendStatusDeferral.resolve()}catch(r){n.sendStatusDeferral.reject(r)}}}onEvent(t){this.privConnectionEvents.onEvent(t),te.Events.instance.onEvent(t)}getAgent(){const t=new aF.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(t.proxyInfo=this.proxyInfo),t}static GetProxyAgent(t){const n={host:t.HostName,port:t.Port};return t.UserName?n.headers={"Proxy-Authentication":"Basic "+new Buffer(`${t.UserName}:${t.Password===void 0?"":t.Password}`).toString("base64")}:n.headers={},n.headers.requestOCSP="true",new cF.default(n)}createConnection(t,n){let r;if(n={...n,requestOCSP:!0,servername:n.host},this.proxyInfo){const o=$c.GetProxyAgent(this.proxyInfo);r=new Promise((a,s)=>{o.callback(t,n,(c,l)=>{c?s(c):a(l)})})}else n.secureEndpoint?r=Promise.resolve(sF.connect(n)):r=Promise.resolve(oF.connect(n));return r}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}cl.WebsocketMessageAdapter=$c;$c.forceNpmWebSocket=!1;Object.defineProperty(ep,"__esModule",{value:!0});ep.WebsocketConnection=void 0;const Bh=Q(),dF=cl;class pF{constructor(t,n,r,i,o,a=!1,s){if(this.privIsDisposed=!1,!t)throw new Bh.ArgumentNullError("uri");if(!i)throw new Bh.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",l=0;if(n){for(const u in n)if(u){c+=l===0&&t.indexOf("?")===-1?"?":"&";const d=encodeURIComponent(u);c+=d;let p=n[u];p&&(p=encodeURIComponent(p),c+=`=${p}`),l++}}if(r){for(const u in r)if(u){c+=l===0&&t.indexOf("?")===-1?"?":"&";const d=encodeURIComponent(r[u]);c+=`${u}=${d}`,l++}}this.privUri=t+c,this.privId=s||(0,Bh.createNoDashGuid)(),this.privConnectionMessageAdapter=new dF.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,o,r,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(t){return this.privConnectionMessageAdapter.send(t)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}ep.WebsocketConnection=pF;var tp={};Object.defineProperty(tp,"__esModule",{value:!0});tp.ReplayableAudioNode=void 0;class hF{constructor(t,n){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=t,this.privBytesPerSecond=n}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const t=this.privReplayOffset-this.privBufferStartOffset;let n=Math.round(t*this.privBytesPerSecond*1e-7);n%2!==0&&n++;let r=0;for(;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){const i=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(t=>(t&&t.buffer&&this.privBuffers&&(this.privBuffers.push(new fF(t,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=t.buffer.byteLength),t))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(t){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=t;const n=t-this.privBufferStartOffset;let r=Math.round(n*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&r>=this.privBuffers[i].chunk.buffer.byteLength;)r-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(t-r/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(t){if(t<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const n of this.privBuffers){const r=n.byteOffset/this.privBytesPerSecond*1e7,i=r+n.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(t>=r&&t<=i)return n.chunk.timeReceived}return 0}}tp.ReplayableAudioNode=hF;class fF{constructor(t,n,r){this.chunk=t,this.serial=n,this.byteOffset=r}}var Es={},qh={},Wn={},ll={},vF=le&&le.__createBinding||(Object.create?function(e,t,n,r){r===void 0&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]}),gF=le&&le.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mF=le&&le.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&vF(t,e,n);return gF(t,e),t};Object.defineProperty(ll,"__esModule",{value:!0});ll.AudioFileWriter=void 0;const Ts=mF(Gi),Uh=Z;class yF{constructor(t){Uh.Contracts.throwIfNullOrUndefined(Ts.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=Ts.openSync(t,"w")}set format(t){Uh.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=t;let n=0;this.privAudioFormat.hasHeader&&(n=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=Ts.createWriteStream("",{fd:this.privFd,start:n,autoClose:!1}))}write(t){Uh.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(t.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),Ts.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),Ts.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}ll.AudioFileWriter=yF;var Bt={},$S;function Q1(){if($S)return Bt;$S=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.PullAudioInputStreamImpl=Bt.PullAudioInputStream=Bt.PushAudioInputStreamImpl=Bt.PushAudioInputStream=Bt.AudioInputStream=void 0;const e=W(),t=Q(),n=un,r=O(),i=ai;let o=class{constructor(){}static createPushStream(d){return a.create(d)}static createPullStream(d,p){return c.create(d,p)}};Bt.AudioInputStream=o;class a extends o{static create(d){return new s(d)}}Bt.PushAudioInputStream=a;class s extends a{constructor(d){super(),d===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=d,this.privEvents=new t.EventSource,this.privId=(0,n.createNoDashGuid)(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(d){this.privStream.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(d){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,d)),await this.turnOn();const p=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,d)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,d)),this.turnOff()),id:()=>d,read:()=>p.read()}}detach(d){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,d))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(d){this.privEvents.onEvent(d),t.Events.instance.onEvent(d)}toBuffer(d){const p=Buffer.alloc(d.byteLength),h=new Uint8Array(d);for(let v=0;v<p.length;++v)p[v]=h[v];return p}}Bt.PushAudioInputStreamImpl=s;class c extends o{constructor(){super()}static create(d,p){return new l(d,p)}}Bt.PullAudioInputStream=c;class l extends c{constructor(d,p){super(),p===void 0?this.privFormat=r.AudioStreamFormat.getDefaultInputFormat():this.privFormat=p,this.privEvents=new t.EventSource,this.privId=(0,n.createNoDashGuid)(),this.privCallback=d,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(d){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,d)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,d)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,d)),this.turnOff()),id:()=>d,read:()=>{let p=0,h;for(;p<this.privBufferSize;){const v=new ArrayBuffer(this.privBufferSize-p),g=this.privCallback.read(v);if(h===void 0?h=v:new Int8Array(h).set(new Int8Array(v),p),g===0)break;p+=g}return Promise.resolve({buffer:h.slice(0,p),isEnd:this.privIsClosed||p===0,timeReceived:Date.now()})}}}detach(d){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,d))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(d){this.privEvents.onEvent(d),t.Events.instance.onEvent(d)}}return Bt.PullAudioInputStreamImpl=l,Bt}var nt={},ci={},Xg={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))})(Xg);Object.defineProperty(ci,"__esModule",{value:!0});ci.AudioOutputFormatImpl=void 0;const ce=Xg,re=ai;class X extends re.AudioStreamFormatImpl{constructor(t,n,r,i,o,a,s,c,l){super(r,a,n,t),this.formatTag=t,this.avgBytesPerSec=i,this.blockAlign=o,this.priAudioFormatString=s,this.priRequestAudioFormatString=c,this.priHasHeader=l}static fromSpeechSynthesisOutputFormat(t){return t===void 0?X.getDefaultOutputFormat():X.fromSpeechSynthesisOutputFormatString(X.SpeechSynthesisOutputFormatToString[t])}static fromSpeechSynthesisOutputFormatString(t){switch(t){case"raw-8khz-8bit-mono-mulaw":return new X(re.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,t,!1);case"riff-16khz-16kbps-mono-siren":return new X(re.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new X(re.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,t,!1);case"audio-16khz-32kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,16e3,4096,2,16,t,t,!1);case"audio-16khz-128kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,16e3,16384,2,16,t,t,!1);case"audio-16khz-64kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,16e3,8192,2,16,t,t,!1);case"audio-24khz-48kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,24e3,6144,2,16,t,t,!1);case"audio-24khz-96kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,24e3,12288,2,16,t,t,!1);case"audio-24khz-160kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,24e3,20480,2,16,t,t,!1);case"raw-16khz-16bit-mono-truesilk":return new X(re.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,t,t,!1);case"riff-8khz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new X(re.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,16e3,32e3,2,16,t,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new X(re.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,t,t,!1);case"ogg-24khz-16bit-mono-opus":return new X(re.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,t,t,!1);case"raw-48khz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,48e3,12288,2,16,t,t,!1);case"audio-48khz-192kbitrate-mono-mp3":return new X(re.AudioFormatTag.MP3,1,48e3,24576,2,16,t,t,!1);case"ogg-48khz-16bit-mono-opus":return new X(re.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,t,t,!1);case"webm-16khz-16bit-mono-opus":return new X(re.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,t,t,!1);case"webm-24khz-16bit-mono-opus":return new X(re.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,t,t,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new X(re.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new X(re.AudioFormatTag.OPUS,1,16e3,4e3,2,16,t,t,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new X(re.AudioFormatTag.OPUS,1,24e3,6e3,2,16,t,t,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new X(re.AudioFormatTag.OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-24khz-16bit-mono-flac":return new X(re.AudioFormatTag.FLAC,1,24e3,24e3,2,16,t,t,!1);case"audio-48khz-16bit-mono-flac":return new X(re.AudioFormatTag.FLAC,1,48e3,3e4,2,16,t,t,!1);case"raw-24khz-16bit-mono-truesilk":return new X(re.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,t,t,!1);case"raw-8khz-8bit-mono-alaw":return new X(re.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,t,!1);case"riff-8khz-8bit-mono-alaw":return new X(re.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,22050,44100,2,16,t,t,!1);case"riff-22050hz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,22050,44100,2,16,t,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,44100,88200,2,16,t,t,!1);case"riff-44100hz-16bit-mono-pcm":return new X(re.AudioFormatTag.PCM,1,44100,88200,2,16,t,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new X(re.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,t,t,!1);case"g722-16khz-64kbps":return new X(re.AudioFormatTag.G722,1,16e3,8e3,2,16,t,t,!1);case"riff-16khz-16bit-mono-pcm":default:return new X(re.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return X.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(t){if(this.priHasHeader){const n=new DataView(this.privHeader);n.setUint32(4,t+this.privHeader.byteLength-8,!0),n.setUint32(40,t,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(t){if(!this.hasHeader)return t;this.updateHeader(t.byteLength);const n=new Uint8Array(t.byteLength+this.header.byteLength);return n.set(new Uint8Array(this.header),0),n.set(new Uint8Array(t),this.header.byteLength),n.buffer}}ci.AudioOutputFormatImpl=X;X.SpeechSynthesisOutputFormatToString={[ce.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[ce.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[ce.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[ce.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[ce.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[ce.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[ce.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[ce.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[ce.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[ce.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[ce.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[ce.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[ce.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[ce.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[ce.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[ce.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[ce.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[ce.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[ce.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[ce.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[ce.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"};Object.defineProperty(nt,"__esModule",{value:!0});nt.PushAudioOutputStreamImpl=nt.PushAudioOutputStream=nt.PullAudioOutputStreamImpl=nt.PullAudioOutputStream=nt.AudioOutputStream=void 0;const Sv=Q(),SF=Z,CF=ci;class Zg{constructor(){}static createPullStream(){return em.create()}}nt.AudioOutputStream=Zg;class em extends Zg{static create(){return new Y1}}nt.PullAudioOutputStream=em;class Y1 extends em{constructor(){super(),this.privId=(0,Sv.createNoDashGuid)(),this.privStream=new Sv.Stream}set format(t){t==null&&(this.privFormat=CF.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=t}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(t){const n=new Int8Array(t);let r=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>t.byteLength)return n.set(this.privLastChunkView.slice(0,t.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(t.byteLength),Promise.resolve(t.byteLength);n.set(this.privLastChunkView),r=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;r<t.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let o;i.buffer.byteLength>t.byteLength-r?(o=i.buffer.slice(0,t.byteLength-r),this.privLastChunkView=new Int8Array(i.buffer.slice(t.byteLength-r))):o=i.buffer,n.set(new Int8Array(o),r),r+=o.byteLength}else this.privStream.readEnded()}return r}write(t){SF.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:t,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}nt.PullAudioOutputStreamImpl=Y1;class X1 extends Zg{constructor(){super()}static create(t){return new Z1(t)}}nt.PushAudioOutputStream=X1;class Z1 extends X1{constructor(t){super(),this.privId=(0,Sv.createNoDashGuid)(),this.privCallback=t}set format(t){}write(t){this.privCallback.write&&this.privCallback.write(t)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}nt.PushAudioOutputStreamImpl=Z1;var VS;function tA(){if(VS)return Wn;VS=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.AudioOutputConfigImpl=Wn.AudioConfigImpl=Wn.AudioConfig=void 0;const e=Qe(),t=Z,n=O(),r=ll,i=Q1(),o=nt;let a=class eA{static fromDefaultMicrophoneInput(){const u=new e.PcmRecorder(!0);return new s(new e.MicAudioSource(u))}static fromMicrophoneInput(u){const d=new e.PcmRecorder(!0);return new s(new e.MicAudioSource(d,u))}static fromWavFileInput(u,d="unnamedBuffer.wav"){return new s(new e.FileAudioSource(u,d))}static fromStreamInput(u){if(u instanceof n.PullAudioInputStreamCallback)return new s(new i.PullAudioInputStreamImpl(u));if(u instanceof n.AudioInputStream)return new s(u);if(typeof MediaStream<"u"&&u instanceof MediaStream){const d=new e.PcmRecorder(!1);return new s(new e.MicAudioSource(d,null,null,u))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new n.SpeakerAudioDestination)}static fromSpeakerOutput(u){if(u===void 0)return eA.fromDefaultSpeakerOutput();if(u instanceof n.SpeakerAudioDestination)return new c(u);throw new Error("Not Supported Type")}static fromAudioFileOutput(u){return new c(new r.AudioFileWriter(u))}static fromStreamOutput(u){if(u instanceof n.PushAudioOutputStreamCallback)return new c(new o.PushAudioOutputStreamImpl(u));if(u instanceof n.PushAudioOutputStream)return new c(u);if(u instanceof n.PullAudioOutputStream)return new c(u);throw new Error("Not Supported Type")}};Wn.AudioConfig=a;class s extends a{constructor(u){super(),this.privSource=u}get format(){return this.privSource.format}close(u,d){this.privSource.turnOff().then(()=>{u&&u()},p=>{d&&d(p)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(u){return this.privSource.attach(u)}detach(u){return this.privSource.detach(u)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(u,d){if(t.Contracts.throwIfNull(d,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(u,d);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(u,d){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(u,d);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Wn.AudioConfigImpl=s;class c extends a{constructor(u){super(),this.privDestination=u}set format(u){this.privDestination.format=u}write(u){this.privDestination.write(u)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Wn.AudioOutputConfigImpl=c,Wn}var nA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))})(nA);var np={};Object.defineProperty(np,"__esModule",{value:!0});np.PullAudioInputStreamCallback=void 0;class wF{}np.PullAudioInputStreamCallback=wF;var rp={};Object.defineProperty(rp,"__esModule",{value:!0});rp.PushAudioOutputStreamCallback=void 0;class RF{}rp.PushAudioOutputStreamCallback=RF;var ip={};Object.defineProperty(ip,"__esModule",{value:!0});ip.KeywordRecognitionModel=void 0;const HS=Z;class PF{constructor(){this.privDisposed=!1}static fromFile(t){throw HS.Contracts.throwIfFileDoesNotExist(t,"fileName"),new Error("Not yet implemented.")}static fromStream(t){throw HS.Contracts.throwIfNull(t,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}ip.KeywordRecognitionModel=PF;var op={};Object.defineProperty(op,"__esModule",{value:!0});op.SessionEventArgs=void 0;class EF{constructor(t){this.privSessionId=t}get sessionId(){return this.privSessionId}}op.SessionEventArgs=EF;var As={},WS;function TF(){if(WS)return As;WS=1,Object.defineProperty(As,"__esModule",{value:!0}),As.RecognitionEventArgs=void 0;const e=O();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privOffset=r}get offset(){return this.privOffset}};return As.RecognitionEventArgs=t,As}var rA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))})(rA);var bs={},KS;function AF(){if(KS)return bs;KS=1,Object.defineProperty(bs,"__esModule",{value:!0}),bs.IntentRecognitionEventArgs=void 0;const e=O();let t=class extends e.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return bs.IntentRecognitionEventArgs=t,bs}var sp={};Object.defineProperty(sp,"__esModule",{value:!0});sp.RecognitionResult=void 0;class bF{constructor(t,n,r,i,o,a,s,c,l,u){this.privResultId=t,this.privReason=n,this.privText=r,this.privDuration=i,this.privOffset=o,this.privLanguage=a,this.privLanguageDetectionConfidence=s,this.privErrorDetails=c,this.privJson=l,this.privProperties=u}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}sp.RecognitionResult=bF;var Is={},JS;function IF(){if(JS)return Is;JS=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.SpeechRecognitionResult=void 0;const e=O();let t=class extends e.RecognitionResult{constructor(r,i,o,a,s,c,l,u,d,p,h){super(r,i,o,a,s,c,l,d,p,h),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return Is.SpeechRecognitionResult=t,Is}var _s={},GS;function _F(){if(GS)return _s;GS=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.IntentRecognitionResult=void 0;const e=O();let t=class extends e.SpeechRecognitionResult{constructor(r,i,o,a,s,c,l,u,d,p,h){super(i,o,a,s,c,l,u,void 0,d,p,h),this.privIntentId=r}get intentId(){return this.privIntentId}};return _s.IntentRecognitionResult=t,_s}var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0});Bo.LanguageUnderstandingModelImpl=Bo.LanguageUnderstandingModel=void 0;const Xi=Z;class iA{constructor(){}static fromEndpoint(t){Xi.Contracts.throwIfNull(t,"uri"),Xi.Contracts.throwIfNullOrWhitespace(t.hostname,"uri");const n=new au,r=t.host.indexOf(".");if(r===-1)throw new Error("Could not determine region from endpoint");n.region=t.host.substr(0,r);const i=t.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(n.appId=t.pathname.substr(i),n.subscriptionKey=t.searchParams.get("subscription-key"),n.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return n}static fromAppId(t){Xi.Contracts.throwIfNullOrWhitespace(t,"appId");const n=new au;return n.appId=t,n}static fromSubscription(t,n,r){Xi.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey"),Xi.Contracts.throwIfNullOrWhitespace(n,"appId"),Xi.Contracts.throwIfNullOrWhitespace(r,"region");const i=new au;return i.appId=n,i.region=r,i.subscriptionKey=t,i}}Bo.LanguageUnderstandingModel=iA;class au extends iA{}Bo.LanguageUnderstandingModelImpl=au;var Kn={},QS;function kF(){if(QS)return Kn;QS=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.MeetingTranscriptionEventArgs=Kn.ConversationTranscriptionEventArgs=Kn.SpeechRecognitionEventArgs=void 0;const e=O();let t=class extends e.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}};Kn.SpeechRecognitionEventArgs=t;class n extends e.RecognitionEventArgs{constructor(o,a,s){super(a,s),this.privResult=o}get result(){return this.privResult}}Kn.ConversationTranscriptionEventArgs=n;class r extends t{}return Kn.MeetingTranscriptionEventArgs=r,Kn}var ks={},xs={},YS;function ul(){if(YS)return xs;YS=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.CancellationEventArgsBase=void 0;const e=O();let t=class extends e.RecognitionEventArgs{constructor(r,i,o,a,s){super(a,s),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return xs.CancellationEventArgsBase=t,xs}var XS;function xF(){if(XS)return ks;XS=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.SpeechRecognitionCanceledEventArgs=void 0;const e=ul();let t=class extends e.CancellationEventArgsBase{};return ks.SpeechRecognitionCanceledEventArgs=t,ks}var Os={},ZS;function OF(){if(ZS)return Os;ZS=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.TranslationRecognitionEventArgs=void 0;const e=O();let t=class extends e.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return Os.TranslationRecognitionEventArgs=t,Os}var Ms={},eC;function MF(){if(eC)return Ms;eC=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.TranslationSynthesisEventArgs=void 0;const e=O();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privResult=r}get result(){return this.privResult}};return Ms.TranslationSynthesisEventArgs=t,Ms}var Ds={},tC;function sA(){if(tC)return Ds;tC=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.TranslationRecognitionResult=void 0;const e=O();let t=class oA extends e.SpeechRecognitionResult{constructor(r,i,o,a,s,c,l,u,d,p,h){super(i,o,a,s,c,l,u,void 0,d,p,h),this.privTranslations=r}static fromSpeechRecognitionResult(r){return new oA(void 0,r.resultId,r.reason,r.text,r.duration,r.offset,r.language,r.languageDetectionConfidence,r.errorDetails,r.json,r.properties)}get translations(){return this.privTranslations}};return Ds.TranslationRecognitionResult=t,Ds}var ap={};Object.defineProperty(ap,"__esModule",{value:!0});ap.TranslationSynthesisResult=void 0;class DF{constructor(t,n){this.privReason=t,this.privAudio=n}get audio(){return this.privAudio}get reason(){return this.privReason}}ap.TranslationSynthesisResult=DF;var aA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))})(aA);var ui={},nC;function NF(){if(nC)return ui;nC=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.SpeechConfigImpl=ui.SpeechConfig=void 0;const e=W(),t=Z,n=O();let r=class{constructor(){}static fromSubscription(a,s){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,s),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,s){t.Contracts.throwIfNull(a,"endpoint");const c=typeof s=="string"&&s.trim().length>0,l=typeof s=="object"&&s!==null&&typeof s.getToken=="function";if(s!==void 0&&!c&&!l)throw new Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");const u=typeof s=="object"?new i(s):new i;return u.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),typeof s=="string"&&s.trim().length>0&&u.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),u}static fromHost(a,s){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),c.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),s!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}static fromAuthorizationToken(a,s){t.Contracts.throwIfNull(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c.setProperty(n.PropertyId.SpeechServiceConnection_IntentRegion,s),c.authorizationToken=a,c}close(){}};ui.SpeechConfig=r;class i extends r{constructor(a){super(),this.privProperties=new n.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=n.OutputFormat.Simple,this.privTokenCredential=a}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return n.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}get tokenCredential(){return this.privTokenCredential}setProperty(a,s){t.Contracts.throwIfNull(s,"value"),this.privProperties.setProperty(a,s)}getProperty(a,s){return this.privProperties.getProperty(a,s)}setProxy(a,s,c,l){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],l)}setServiceProperty(a,s){const c=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const a=new i(this.tokenCredential);return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return ui.SpeechConfigImpl=i,ui}var di={},rC;function zF(){if(rC)return di;rC=1,Object.defineProperty(di,"__esModule",{value:!0}),di.SpeechTranslationConfigImpl=di.SpeechTranslationConfig=void 0;const e=W(),t=Z,n=O();let r=class extends n.SpeechConfig{constructor(){super()}static fromSubscription(a,s){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(a,s){t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(s,"region");const c=new i;return c.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromHost(a,s){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(n.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),s!==void 0&&c.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),c}static fromEndpoint(a,s){t.Contracts.throwIfNull(a,"endpoint");const c=typeof s=="string"&&s.trim().length>0,l=typeof s=="object"&&s!==null&&typeof s.getToken=="function";if(s!==void 0&&!c&&!l)throw new Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");const u=typeof s=="object"?new i(s):new i;return u.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,a.href),typeof s=="string"&&s.trim().length>0&&u.setProperty(n.PropertyId.SpeechServiceConnection_Key,s),u}};di.SpeechTranslationConfig=r;class i extends r{constructor(a){super(),this.privSpeechProperties=new n.PropertyCollection,this.outputFormat=n.OutputFormat.Simple,this.privTokenCredential=a}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return n.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,n.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value");const s=this.targetLanguages;s.includes(a)||(s.push(a),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,s.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(a,s,c,l){this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPort],s),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_ProxyPassword],l)}getProperty(a,s){return this.privSpeechProperties.getProperty(a,s)}setProperty(a,s){this.privSpeechProperties.setProperty(a,s)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,s){const c=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=s,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_ProfanityOption,n.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return n.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(n.PropertyId.SpeechServiceConnection_SynthOutputFormat,n.SpeechSynthesisOutputFormat[a])}}return di.SpeechTranslationConfigImpl=i,di}var Ns={},iC;function lA(){if(iC)return Ns;iC=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.PropertyCollection=void 0;const e=O();let t=class cA{constructor(){this.privKeys=[],this.privValues=[]}getProperty(r,i){let o;typeof r=="string"?o=r:o=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(r,i){let o;typeof r=="string"?o=r:o=e.PropertyId[r];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===o){this.privValues[a]=i;return}this.privKeys.push(o),this.privValues.push(i)}clone(){const r=new cA;for(let i=0;i<this.privKeys.length;i++)r.privKeys.push(this.privKeys[i]),r.privValues.push(this.privValues[i]);return r}mergeTo(r){this.privKeys.forEach(i=>{if(r.getProperty(i,void 0)===void 0){const o=this.getProperty(i);r.setProperty(i,o)}})}get keys(){return this.privKeys}};return Ns.PropertyCollection=t,Ns}var cp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",t[t.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=17]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=26]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",t[t.SpeechServiceConnection_EnableAudioLogging=36]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=37]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=38]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=39]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=40]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=41]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=42]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=43]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=44]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=45]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=46]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=47]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=48]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=49]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=50]="Conversation_ApplicationId",t[t.Conversation_DialogType=51]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=52]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=53]="Conversation_From_Id",t[t.Conversation_Conversation_Id=54]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=55]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=56]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=57]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=58]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=59]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=60]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=61]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=62]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=63]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=64]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=65]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=66]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=67]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=68]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=69]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=70]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=71]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=72]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))})(cp);var zs={},oC;function jF(){if(oC)return zs;oC=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.Recognizer=void 0;const e=W(),t=Q(),n=Z,r=O();let i=class uA{constructor(a,s,c,l){this.audioConfig=a!==void 0?a:r.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=s.clone(),this.privConnectionFactory=c,this.tokenCredential=l,this.implCommonRecognizerSetup()}close(a,s){n.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),a,s)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){e.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",s="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,s=navigator.userAgent,c=navigator.appVersion);const l=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,s,c))));this.privReco=this.createServiceRecognizer(uA.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,l)}async recognizeOnceAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed);const s=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,s.resolve,s.reject);const c=await s.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){n.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(a,s){const c=a.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0);return c&&c!==""?new e.CognitiveSubscriptionKeyAuthentication(c):s?new e.CognitiveTokenAuthentication(async()=>{try{const l=await s.getToken("https://cognitiveservices.azure.com/.default");return(l==null?void 0:l.token)??""}catch(l){throw l}},async()=>{try{const l=await s.getToken("https://cognitiveservices.azure.com/.default");return(l==null?void 0:l.token)??""}catch(l){throw l}}):new e.CognitiveTokenAuthentication(()=>{const l=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)},()=>{const l=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(l)})}};return zs.Recognizer=i,zs}var js={},Yt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionMode=void 0,function(t){t.Interactive="Interactive",t.Dictation="Dictation",t.Conversation="Conversation",t.None="None"}(e.RecognitionMode||(e.RecognitionMode={}))})(Yt);var sC;function LF(){if(sC)return js;sC=1,Object.defineProperty(js,"__esModule",{value:!0}),js.SpeechRecognizer=void 0;const e=W(),t=Yt,n=Q(),r=Z,i=O();let o=class dA extends i.Recognizer{constructor(s,c){const l=s;r.Contracts.throwIfNull(l,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(l.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,l.properties,new e.SpeechConnectionFactory,s.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(s,c,l){const u=s;return c.properties.mergeTo(u.properties),new dA(s,l)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),s,c)}startContinuousRecognitionAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(e.ForceDictationPropertyName,void 0)===void 0?t.RecognitionMode.Conversation:t.RecognitionMode.Dictation),s,c)}stopContinuousRecognitionAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}startKeywordRecognitionAsync(s,c,l){r.Contracts.throwIfNull(s,"model"),l&&l("Not yet implemented.")}stopKeywordRecognitionAsync(s){s&&s()}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,l,u){const d=l;return new e.SpeechServiceRecognizer(s,c,d,u,this)}};return js.SpeechRecognizer=o,js}var Ls={},aC;function FF(){if(aC)return Ls;aC=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.IntentRecognizer=void 0;const e=W(),t=Yt,n=Q(),r=Z,i=O();let o=class extends i.Recognizer{constructor(s,c){r.Contracts.throwIfNullOrUndefined(s,"speechConfig");const l=s;r.Contracts.throwIfNullOrUndefined(l,"speechConfig"),super(c,l.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=l.properties,r.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}recognizeOnceAsync(s,c){if(r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const l=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=l.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(l.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),s,c)}startContinuousRecognitionAsync(s,c){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const l=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=l.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(l.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),s,c)}stopContinuousRecognitionAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}startKeywordRecognitionAsync(s,c,l){r.Contracts.throwIfNull(s,"model"),l&&l("Not yet implemented.")}stopKeywordRecognitionAsync(s,c){if(s)try{s()}catch(l){c&&c(l)}}addIntent(s,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(c,"intentId"),r.Contracts.throwIfNullOrWhitespace(s,"simplePhrase"),this.privAddedIntents.push([c,s])}addIntentWithLanguageModel(s,c,l){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),r.Contracts.throwIfNullOrWhitespace(s,"intentId"),r.Contracts.throwIfNull(c,"model");const u=c;r.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privAddedLmIntents[s]=new e.AddedLmIntent(u,l)}addAllIntents(s,c){r.Contracts.throwIfNull(s,"model");const l=s;r.Contracts.throwIfNullOrWhitespace(l.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(l,c)}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,l,u){const d=l;return new e.IntentServiceRecognizer(s,c,d,u,this)}async dispose(s){this.privDisposedIntentRecognizer||s&&(this.privDisposedIntentRecognizer=!0,await super.dispose(s))}buildSpeechContext(){let s,c,l;const u=[];this.privUmbrellaIntent!==void 0&&(s=this.privUmbrellaIntent.modelImpl.appId,c=this.privUmbrellaIntent.modelImpl.region,l=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const d of Object.keys(this.privAddedLmIntents)){const p=this.privAddedLmIntents[d];if(s===void 0)s=p.modelImpl.appId;else if(s!==p.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(c===void 0)c=p.modelImpl.region;else if(c!==p.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(l===void 0)l=p.modelImpl.subscriptionKey;else if(l!==p.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const h="luis/"+s+"-PRODUCTION#"+d;u.push(h)}return{Intent:{id:s,key:l===void 0?this.privProperties.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key]):l,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?u:["luis/"+s+"-PRODUCTION"]}}};return Ls.IntentRecognizer=o,Ls}var pA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))})(pA);var Fs={},Bs={},pi={},cC;function hA(){if(cC)return pi;cC=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.ConnectionMessageImpl=pi.ConnectionMessage=void 0;const e=Ge,t=Q(),n=lA(),r=cp;let i=class{};pi.ConnectionMessage=i;class o{constructor(s){this.privConnectionMessage=s,this.privProperties=new n.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(r.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(s=>s.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return pi.ConnectionMessageImpl=o,pi}var lC;function fA(){if(lC)return Bs;lC=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.Connection=void 0;const e=W(),t=Q(),n=hA(),r=Z,i=O();let o=class Cv{static fromRecognizer(s){const c=s.internalData,l=new Cv;return l.privInternalData=c,l.setupEvents(),l}static fromSynthesizer(s){const c=s.internalData,l=new Cv;return l.privInternalData=c,l.setupEvents(),l}openConnection(s,c){(0,t.marshalPromiseToCallbacks)(this.privInternalData.connect(),s,c)}closeConnection(s,c){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,t.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),s,c)}setMessageProperty(s,c,l){if(r.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(s.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const u=this.privInternalData.speechContext.getContext();u[c]=l}}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(s.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,l)}}sendMessageAsync(s,c,l,u){(0,t.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(s,c),l,u)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(s=>{s.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(s.connectionId)):s.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(s.message))):s.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new n.ConnectionMessageImpl(s.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(s=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(s.jsonString,s.name))})}};return Bs.Connection=o,Bs}var uC;function BF(){if(uC)return Fs;uC=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.TranslationRecognizer=void 0;const e=W(),t=Yt,n=Q(),r=fA(),i=Z,o=O();let a=class vA extends o.Recognizer{constructor(c,l,u){const d=c;i.Contracts.throwIfNull(d,"speechConfig"),super(l,d.properties,u||new e.TranslationConnectionFactory,c.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages),o.PropertyId[o.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage),o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(c,l,u){const d=c;return l.properties.mergeTo(d.properties),l.properties.getProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===e.AutoDetectSourceLanguagesOpenRangeOptionName&&d.properties.setProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new vA(c,u)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(o.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){this.properties.setProperty(o.PropertyId.SpeechServiceAuthorization_Token,c)}recognizeOnceAsync(c,l){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,n.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),c,l)}startContinuousRecognitionAsync(c,l){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),c,l)}stopContinuousRecognitionAsync(c,l){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,l)}removeTargetLanguage(c){if(i.Contracts.throwIfNullOrUndefined(c,"language to be removed"),this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const l=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u=l.indexOf(c);u>-1&&(l.splice(u,1),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,l.join(",")),this.updateLanguages(l))}}addTargetLanguage(c){i.Contracts.throwIfNullOrUndefined(c,"language to be added");let l=[];this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(l=this.properties.getProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),l.includes(c)||(l.push(c),this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,l.join(",")))):(this.properties.setProperty(o.PropertyId.SpeechServiceConnection_TranslationToLanguages,c),l=[c]),this.updateLanguages(l)}close(c,l){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),c,l)}onConnection(){}async dispose(c){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,c&&(await this.implRecognizerStop(),await super.dispose(c)))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,l,u,d){const p=u;return new e.TranslationServiceRecognizer(c,l,p,d,this)}updateLanguages(c){const l=r.Connection.fromRecognizer(this);l&&(l.setMessageProperty("speech.context","translationcontext",{to:c}),l.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:c})))}};return Fs.TranslationRecognizer=a,Fs}var qs={},dC;function qF(){if(dC)return qs;dC=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.Translations=void 0;const e=O();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(r,i){return this.privMap.getProperty(r,i)}set(r,i){this.privMap.setProperty(r,i)}};return qs.Translations=t,qs}var gA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))})(gA);var Us={},pC;function UF(){if(pC)return Us;pC=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.NoMatchDetails=void 0;const e=W(),t=O();let n=class mA{constructor(i){this.privReason=i}static fromResult(i){const o=e.SimpleSpeechPhrase.fromJSON(i.json,0);let a=t.NoMatchReason.NotRecognized;switch(o.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:a=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:a=t.NoMatchReason.InitialSilenceTimeout;break;default:a=t.NoMatchReason.NotRecognized;break}return new mA(a)}get reason(){return this.privReason}};return Us.NoMatchDetails=n,Us}var lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.TranslationRecognitionCanceledEventArgs=void 0;class $F{constructor(t,n,r,i,o){this.privCancelReason=n,this.privErrorDetails=r,this.privResult=o,this.privSessionId=t,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}lp.TranslationRecognitionCanceledEventArgs=$F;var $s={},hC;function VF(){if(hC)return $s;hC=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.IntentRecognitionCanceledEventArgs=void 0;const e=O();let t=class extends e.IntentRecognitionEventArgs{constructor(r,i,o,a,s,c){super(a,s,c),this.privReason=r,this.privErrorDetails=i,this.privErrorCode=o}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return $s.IntentRecognitionCanceledEventArgs=t,$s}var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.CancellationDetailsBase=void 0;class HF{constructor(t,n,r){this.privReason=t,this.privErrorDetails=n,this.privErrorCode=r}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}dl.CancellationDetailsBase=HF;var Vs={},fC;function WF(){if(fC)return Vs;fC=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.CancellationDetails=void 0;const e=W(),t=dl,n=O();let r=class yA extends t.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){let a=n.CancellationReason.Error,s=n.CancellationErrorCode.NoError;if(o instanceof n.RecognitionResult&&o.json){const c=e.SimpleSpeechPhrase.fromJSON(o.json,0);a=e.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return o.properties&&(s=n.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new yA(a,o.errorDetails||e.EnumTranslation.implTranslateErrorDetails(s),s)}};return Vs.CancellationDetails=r,Vs}var SA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))})(SA);var Hs={},vC;function KF(){if(vC)return Hs;vC=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.ConnectionEventArgs=void 0;const e=O();let t=class extends e.SessionEventArgs{};return Hs.ConnectionEventArgs=t,Hs}var Ws={},gC;function JF(){if(gC)return Ws;gC=1,Object.defineProperty(Ws,"__esModule",{value:!0}),Ws.ServiceEventArgs=void 0;const e=O();let t=class extends e.SessionEventArgs{constructor(r,i,o){super(o),this.privJsonResult=r,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return Ws.ServiceEventArgs=t,Ws}var up={};Object.defineProperty(up,"__esModule",{value:!0});up.PhraseListGrammar=void 0;class tm{constructor(t){this.privGrammerBuilder=t.dynamicGrammar}static fromRecognizer(t){const n=t.internalData;return new tm(n)}addPhrase(t){this.privGrammerBuilder.addPhrase(t)}addPhrases(t){this.privGrammerBuilder.addPhrase(t)}clear(){this.privGrammerBuilder.clearPhrases()}}up.PhraseListGrammar=tm;var hi={},mC;function nm(){if(mC)return hi;mC=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.DialogServiceConfigImpl=hi.DialogServiceConfig=void 0;const e=Z,t=O();let n=class{constructor(){}set applicationId(o){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};hi.DialogServiceConfig=n;class r extends n{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.privSpeechConfig.speechRecognitionLanguage=o}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(o){this.privSpeechConfig.outputFormat=o}setProperty(o,a){this.privSpeechConfig.setProperty(o,a)}getProperty(o,a){return this.privSpeechConfig.getProperty(o)}setProxy(o,a,s,c){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,o),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),s&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,s),c&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(o,a,s){this.privSpeechConfig.setServiceProperty(o,a)}close(){}}return hi.DialogServiceConfigImpl=r,hi}var Ks={},yC;function GF(){if(yC)return Ks;yC=1,Object.defineProperty(Ks,"__esModule",{value:!0}),Ks.BotFrameworkConfig=void 0;const e=Z,t=nm(),n=O();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"subscription"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c}static fromAuthorizationToken(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,a),s&&c.setProperty(n.PropertyId.Conversation_ApplicationId,s),c}static fromHost(o,a,s){e.Contracts.throwIfNullOrUndefined(o,"host");const c=o instanceof URL?o:new URL(`wss://${o}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const l=new t.DialogServiceConfigImpl;return l.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),l.setProperty(n.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&l.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),l}static fromEndpoint(o,a){e.Contracts.throwIfNull(o,"endpoint");const s=new t.DialogServiceConfigImpl;return s.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),s.setProperty(n.PropertyId.SpeechServiceConnection_Endpoint,o.toString()),a!==void 0&&s.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),s}};return Ks.BotFrameworkConfig=r,Ks}var Js={},SC;function QF(){if(SC)return Js;SC=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.CustomCommandsConfig=void 0;const e=Z,t=nm(),n=O();let r=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"subscription"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c.setProperty(n.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}static fromAuthorizationToken(o,a,s){e.Contracts.throwIfNullOrWhitespace(o,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(s,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(n.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(n.PropertyId.Conversation_ApplicationId,o),c.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(n.PropertyId.SpeechServiceConnection_Region,s),c}set applicationId(o){e.Contracts.throwIfNullOrWhitespace(o,"value"),this.setProperty(n.PropertyId.Conversation_ApplicationId,o)}get applicationId(){return this.getProperty(n.PropertyId.Conversation_ApplicationId)}};return Js.CustomCommandsConfig=r,Js}var Gs={},Qs={},Ys={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.QueryParameterNames=void 0;class ke{}bn.QueryParameterNames=ke;ke.BotId="botid";ke.CustomSpeechDeploymentId="cid";ke.CustomVoiceDeploymentId="deploymentId";ke.EnableAudioLogging="storeAudio";ke.EnableLanguageId="lidEnabled";ke.EnableWordLevelTimestamps="wordLevelTimestamps";ke.EndSilenceTimeoutMs="endSilenceTimeoutMs";ke.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";ke.SegmentationMaximumTimeMs="segmentationMaximumTimeMs";ke.SegmentationStrategy="segmentationStrategy";ke.Format="format";ke.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";ke.Language="language";ke.Profanity="profanity";ke.RequestBotStatusMessages="enableBotMessageStatus";ke.StableIntermediateThreshold="stableIntermediateThreshold";ke.StableTranslation="stableTranslation";ke.TestHooks="testhooks";ke.Postprocessing="postprocessing";ke.CtsMeetingId="meetingId";ke.CtsDeviceId="deviceId";ke.CtsIsParticipant="isParticipant";ke.EnableAvatar="enableTalkingAvatar";var CC;function In(){if(CC)return Ys;CC=1,Object.defineProperty(Ys,"__esModule",{value:!0}),Ys.ConnectionFactoryBase=void 0;const e=W(),t=Q(),n=O(),r=bn;let i=class{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,s,c){new Map([[n.PropertyId.Speech_SegmentationSilenceTimeoutMs,r.QueryParameterNames.SegmentationSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_EnableAudioLogging,r.QueryParameterNames.EnableAudioLogging],[n.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,r.QueryParameterNames.EndSilenceTimeoutMs],[n.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,r.QueryParameterNames.InitialSilenceTimeoutMs],[n.PropertyId.SpeechServiceResponse_PostProcessingOption,r.QueryParameterNames.Postprocessing],[n.PropertyId.SpeechServiceResponse_ProfanityOption,r.QueryParameterNames.Profanity],[n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,r.QueryParameterNames.EnableWordLevelTimestamps],[n.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,r.QueryParameterNames.StableIntermediateThreshold]]).forEach((d,p)=>{this.setUrlParameter(p,d,a,s,c)});const u=JSON.parse(a.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(u).forEach(d=>{s[d]=u[d]})}setUrlParameter(a,s,c,l,u){const d=c.parameters.getProperty(a,void 0);d&&(!u||u.search(s)===-1)&&(l[s]=d.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(a){let s;if(typeof window<"u"&&typeof window.fetch<"u"){const c=new URL(a);c.protocol="https:",c.port="443",c.searchParams.append("GenerateRedirectResponse","true");const u=c.toString();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",u,void 0,"ConnectionFactoryBase: redirectUrl request"));const d=await fetch(u);if(d.status!==200)return a;s=await d.text()}else s=a;t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",s,a,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(s.trim()).toString()}catch{return a}}};return Ys.ConnectionFactoryBase=i,Ys}var wC;function YF(){if(wC)return Qs;wC=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.DialogConnectionFactory=void 0;const e=Qe(),t=W(),n=O(),r=In(),i=W(),o=Ge,a=bn;class s extends r.ConnectionFactoryBase{create(l,u,d){const p=l.parameters.getProperty(n.PropertyId.Conversation_ApplicationId,""),h=l.parameters.getProperty(n.PropertyId.Conversation_DialogType),v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),g=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),y=l.parameters.getProperty(n.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),f={};f[o.HeaderNames.ConnectionId]=d,f[a.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase(),f[a.QueryParameterNames.Language]=g,f[a.QueryParameterNames.RequestBotStatusMessages]=y,p&&(f[a.QueryParameterNames.BotId]=p,h===n.DialogServiceConfig.DialogTypes.CustomCommands&&(f[o.HeaderNames.CustomCommandsAppId]=p));const m=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",S=h===n.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===n.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};u.token!=null&&u.token!==""&&(C[u.headerName]=u.token);let R=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,"");if(!R){const A=r.ConnectionFactoryBase.getHostSuffix(v),E=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,`wss://${v}.${s.BaseUrl}${A}`);R=`${E.endsWith("/")?E:E+"/"}${m}${s.ApiKey}/${S}`}this.setCommonUrlParams(l,f,R);const T=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(R,f,C,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),T,d))}}return Qs.DialogConnectionFactory=s,s.ApiKey="api",s.BaseUrl="convai.speech",Qs}var RC;function XF(){if(RC)return Gs;RC=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.DialogServiceConnector=void 0;const e=YF(),t=W(),n=Yt,r=Q(),i=Z,o=O(),a=cp;let s=class extends o.Recognizer{constructor(l,u){const d=l;i.Contracts.throwIfNull(l,"dialogConfig"),super(u,d.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=d.properties.clone();const p=this.buildAgentConfig();this.privReco.agentConfig.set(p)}connect(l,u){(0,r.marshalPromiseToCallbacks)(this.privReco.connect(),l,u)}disconnect(l,u){(0,r.marshalPromiseToCallbacks)(this.privReco.disconnect(),l,u)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(l){i.Contracts.throwIfNullOrWhitespace(l,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,l)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(l){this.properties.setProperty(a.PropertyId.Conversation_Speech_Activity_Template,l)}listenOnceAsync(l,u){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const p=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const h=new r.Deferred;await this.privReco.recognize(n.RecognitionMode.Conversation,h.resolve,h.reject);const v=await h.promise;return await this.implRecognizerStop(),v})();p.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,r.marshalPromiseToCallbacks)(p.finally(()=>{this.isTurnComplete=!0}),l,u)}}sendActivityAsync(l,u,d){(0,r.marshalPromiseToCallbacks)(this.privReco.sendMessage(l),u,d)}close(l,u){i.Contracts.throwIfDisposed(this.privIsDisposed),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),l,u)}async dispose(l){this.privIsDisposed||l&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(l))}createRecognizerConfig(l){return new t.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,u,d,p){const h=d;return new t.DialogServiceAdapter(l,u,h,p,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Gs.DialogServiceConnector=s,Gs}var dp={};Object.defineProperty(dp,"__esModule",{value:!0});dp.ActivityReceivedEventArgs=void 0;class ZF{constructor(t,n){this.privActivity=t,this.privAudioStream=n}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}dp.ActivityReceivedEventArgs=ZF;var pp={},hp={};Object.defineProperty(hp,"__esModule",{value:!0});hp.TurnStatusResponsePayload=void 0;class rm{constructor(t){this.privMessageStatusResponse=JSON.parse(t)}static fromJSON(t){return new rm(t)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}hp.TurnStatusResponsePayload=rm;Object.defineProperty(pp,"__esModule",{value:!0});pp.TurnStatusReceivedEventArgs=void 0;const eB=hp;class tB{constructor(t){this.privTurnStatus=eB.TurnStatusResponsePayload.fromJSON(t)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}pp.TurnStatusReceivedEventArgs=tB;var CA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))})(CA);var wA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))})(wA);var Xs={},PC;function nB(){if(PC)return Xs;PC=1,Object.defineProperty(Xs,"__esModule",{value:!0}),Xs.BaseAudioPlayer=void 0;const e=it,t=O(),n=ai;let r=class{constructor(o){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,o===void 0&&(o=t.AudioStreamFormat.getDefaultInputFormat()),this.init(o)}playAudioSample(o,a,s){try{this.ensureInitializedContext();const c=this.formatAudioData(o),l=new Float32Array(this.samples.length+c.length);l.set(this.samples,0),l.set(c,this.samples.length),this.samples=l,a&&a()}catch(c){s&&s(c)}}stopAudio(o,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{o&&o()},s=>{a&&a(s)}),this.audioContext=null)}init(o){this.audioFormat=o,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const o=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},o)}}createAudioContext(){this.audioContext=n.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(o){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(o),128);case 16:return this.formatArrayBuffer(new Int16Array(o),32768);case 32:return this.formatArrayBuffer(new Int32Array(o),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(o,a){const s=new Float32Array(o.length);for(let c=0;c<o.length;c++)s[c]=o[c]/a;return s}updateAudioBuffer(){if(this.samples.length===0)return;const o=this.audioFormat.channels,a=this.audioContext.createBufferSource(),s=this.samples.length/o,c=this.audioContext.createBuffer(o,s,this.audioFormat.samplesPerSec);for(let l=0;l<o;l++){let u=l;const d=c.getChannelData(l);for(let p=0;p<this.samples.length;p++,u+=o)d[p]=this.samples[u]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(o){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),s=this.audioContext.destination;await this.audioContext.decodeAudioData(o,c=>{a.buffer=c,a.connect(s),a.start(0)})}};return Xs.BaseAudioPlayer=r,Xs}var fp={};Object.defineProperty(fp,"__esModule",{value:!0});fp.ConnectionMessageEventArgs=void 0;class rB{constructor(t){this.privConnectionMessage=t}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}fp.ConnectionMessageEventArgs=rB;var vp={};Object.defineProperty(vp,"__esModule",{value:!0});vp.VoiceProfile=void 0;class iB{constructor(t,n){this.privId=t,this.privProfileType=n}get profileId(){return this.privId}get profileType(){return this.privProfileType}}vp.VoiceProfile=iB;var fi={},EC;function oB(){if(EC)return fi;EC=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.VoiceProfileEnrollmentCancellationDetails=fi.VoiceProfileEnrollmentResult=void 0;const e=W(),t=O();let n=class wv{constructor(o,a,s){this.privReason=o,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=s,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new wv(c,null,null);l.privDetails=this.getIdentificationDetails(s),a.push(l)}return a}static FromVerificationProfileList(o){const a=[];for(const s of o.value){const c=s.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:s.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,l=new wv(c,null,null);l.privDetails=this.getVerificationDetails(s),a.push(l)}return a}static getIdentificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount||0,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.identificationProfileId,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(o){return{audioLength:o.audioLength?parseFloat(o.audioLength):0,audioSpeechLength:o.audioSpeechLength?parseFloat(o.audioSpeechLength):0,enrollmentStatus:o.enrollmentStatus,enrollmentsCount:o.enrollmentsCount,enrollmentsLength:o.enrollmentsLength?parseFloat(o.enrollmentsLength):0,enrollmentsSpeechLength:o.enrollmentsSpeechLength?parseFloat(o.enrollmentsSpeechLength):0,profileId:o.profileId||o.verificationProfileId,remainingEnrollmentsCount:o.remainingEnrollments||o.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:o.remainingEnrollmentsSpeechLength?parseFloat(o.remainingEnrollmentsSpeechLength):0}}};fi.VoiceProfileEnrollmentResult=n;class r extends t.CancellationDetailsBase{constructor(o,a,s){super(o,a,s)}static fromResult(o){const a=t.CancellationReason.Error;let s=t.CancellationErrorCode.NoError;return o.properties&&(s=t.CancellationErrorCode[o.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new r(a,o.errorDetails,s)}}return fi.VoiceProfileEnrollmentCancellationDetails=r,fi}var vi={},TC;function sB(){if(TC)return vi;TC=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.VoiceProfileCancellationDetails=vi.VoiceProfileResult=void 0;const e=W(),t=Z,n=O();let r=class{constructor(a,s){this.privReason=a,this.privProperties=new n.PropertyCollection,a===n.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(s,"statusText"),this.privErrorDetails=s,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};vi.VoiceProfileResult=r;class i extends n.CancellationDetailsBase{constructor(a,s,c){super(a,s,c)}static fromResult(a){const s=n.CancellationReason.Error;let c=n.CancellationErrorCode.NoError;return a.properties&&(c=n.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new i(s,a.errorDetails,c)}}return vi.VoiceProfileCancellationDetails=i,vi}var Zs={},AC;function aB(){if(AC)return Zs;AC=1,Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.VoiceProfilePhraseResult=void 0;const e=Z,t=O();let n=class extends t.VoiceProfileResult{constructor(i,o,a,s){super(i,o),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(s,"phrase array"),this.privType=a,s&&s[0]&&(this.privPhrases=s)}get phrases(){return this.privPhrases}get type(){return this.privType}};return Zs.VoiceProfilePhraseResult=n,Zs}var ea={},bC;function cB(){if(bC)return ea;bC=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.VoiceProfileClient=void 0;const e=W(),t=tA(),n=Z,r=O();let i=class extends r.Recognizer{constructor(a){n.Contracts.throwIfNullOrUndefined(a,"speechConfig");const s=a;n.Contracts.throwIfNull(s,"speechConfig"),super(t.AudioConfig.fromStreamInput(r.AudioInputStream.createPushStream()),s.properties,new e.VoiceProfileConnectionFactory),this.privProperties=s.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){n.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,s){const c=await this.privVoiceAdapter.createProfile(a,s);return new r.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,s){return this.privVoiceAdapter.getActivationPhrases(a,s)}async enrollProfileAsync(a,s){const c=s;return n.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=s,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,s,c,l){const u=c;return new e.VoiceServiceRecognizer(a,s,u,l,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.properties)}getResult(a,s){return new r.VoiceProfileResult(a.ok?s:r.ResultReason.Canceled,a.statusText)}};return ea.VoiceProfileClient=i,ea}var ta={},IC;function lB(){if(IC)return ta;IC=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.SpeakerRecognizer=void 0;const e=W(),t=Z,n=O();let r=class extends n.Recognizer{constructor(o,a){t.Contracts.throwIfNullOrUndefined(o,"speechConfig");const s=o;t.Contracts.throwIfNullOrUndefined(s,"speechConfig"),super(a,s.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=s.properties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){t.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}async recognizeOnceAsync(o){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(o)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(o){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(o);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,a,s,c){const l=s;return new e.SpeakerServiceRecognizer(o,a,l,c,this)}async dispose(o){this.privDisposedSpeakerRecognizer||o&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(o))}};return ta.SpeakerRecognizer=r,ta}var na={},_C;function uB(){if(_C)return na;_C=1,Object.defineProperty(na,"__esModule",{value:!0}),na.SpeakerIdentificationModel=void 0;const e=Z,t=O();let n=class RA{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const o of i){if(o.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+o.profileId);this.privVoiceProfiles.push(o),this.privProfileIds.push(o.profileId)}}static fromProfiles(i){return new RA(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return na.SpeakerIdentificationModel=n,na}var ra={},kC;function dB(){if(kC)return ra;kC=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.SpeakerVerificationModel=void 0;const e=Z,t=O();let n=class PA{constructor(i){if(e.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new PA(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return ra.SpeakerVerificationModel=n,ra}var ia={},im={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))})(im);var xC;function pB(){if(xC)return ia;xC=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.AutoDetectSourceLanguageConfig=void 0;const e=W(),t=Z,n=O(),r=im;let i=class cu{constructor(){this.privProperties=new n.PropertyCollection,this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=r.LanguageIdMode.AtStart}static fromOpenRange(){const a=new cu;return a.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),a.properties.setProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),a}static fromLanguages(a){t.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const s=new cu;return s.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),s}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const s=new cu,c=[];return a.forEach(l=>{if(c.push(l.language),l.endpointId!==void 0&&l.endpointId!==""){const u=l.language+n.PropertyId.SpeechServiceConnection_EndpointId.toString();s.properties.setProperty(u,l.endpointId)}}),s.properties.setProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),s}get properties(){return this.privProperties}set mode(a){a===r.LanguageIdMode.Continuous?(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(n.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return ia.AutoDetectSourceLanguageConfig=i,ia}var gp={};Object.defineProperty(gp,"__esModule",{value:!0});gp.AutoDetectSourceLanguageResult=void 0;const OC=Z;class $u{constructor(t,n){OC.Contracts.throwIfNullOrUndefined(t,"language"),OC.Contracts.throwIfNullOrUndefined(n,"languageDetectionConfidence"),this.privLanguage=t,this.privLanguageDetectionConfidence=n}static fromResult(t){return new $u(t.language,t.languageDetectionConfidence)}static fromConversationTranscriptionResult(t){return new $u(t.language,t.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}gp.AutoDetectSourceLanguageResult=$u;var mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.SourceLanguageConfig=void 0;const hB=Z;class om{constructor(t,n){hB.Contracts.throwIfNullOrUndefined(t,"language"),this.privLanguage=t,this.privEndpointId=n}static fromLanguage(t,n){return new om(t,n)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}mp.SourceLanguageConfig=om;var $h={},MC;function fB(){return MC||(MC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=W(),n=O();var r;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(r=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class i{constructor(s,c=n.ResultReason.RecognizedSpeaker,l=n.CancellationErrorCode.NoError,u=""){this.privProperties=new n.PropertyCollection;const d=s.scenario==="TextIndependentIdentification"?r.Identify:r.Verify;this.privReason=c,this.privReason!==n.ResultReason.Canceled?d===r.Identify?(this.privProfileId=s.identificationResult.identifiedProfile.profileId,this.privScore=s.identificationResult.identifiedProfile.score,this.privReason=n.ResultReason.RecognizedSpeakers):(this.privScore=s.verificationResult.score,s.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=n.ResultReason.NoMatch),s.verificationResult.profileId!==void 0&&s.verificationResult.profileId!==""&&(this.privProfileId=s.verificationResult.profileId)):(this.privErrorDetails=u,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[l])),this.privProperties.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(s))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=i;class o extends n.CancellationDetailsBase{constructor(s,c,l){super(s,c,l)}static fromResult(s){const c=n.CancellationReason.Error;let l=n.CancellationErrorCode.NoError;return s.properties&&(l=n.CancellationErrorCode[s.properties.getProperty(t.CancellationErrorCodePropertyName,n.CancellationErrorCode[n.CancellationErrorCode.NoError])]),new o(c,s.errorDetails,l)}}e.SpeakerRecognitionCancellationDetails=o}($h)),$h}var Vh={},gi={},DC;function EA(){if(DC)return gi;DC=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.ConversationImpl=gi.Conversation=void 0;const e=W(),t=Q(),n=Z,r=O();let i=class{constructor(){}static createConversationAsync(s,c,l,u){n.Contracts.throwIfNullOrUndefined(s,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(s.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!s.subscriptionKey&&!s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(s.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let d,p,h;return typeof c=="string"?(d=new o(s,c),(0,t.marshalPromiseToCallbacks)((async()=>{})(),l,u)):(d=new o(s),p=c,h=l,d.createConversationAsync(()=>{p&&p()},v=>{h&&h(v)})),d}};gi.Conversation=i;class o extends i{constructor(s,c){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=d=>{var p;this.privIsConnected=!0;try{(p=this.privConversationTranslator)!=null&&p.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,d)}catch{}},this.onDisconnected=d=>{var p;try{(p=this.privConversationTranslator)!=null&&p.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,d)}catch{}finally{this.close(!1)}},this.onCanceled=(d,p)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,p)}catch{}},this.onParticipantUpdateCommandReceived=(d,p)=>{try{const h=this.privParticipants.getParticipant(p.id);if(h!==void 0){switch(p.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=p.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=p.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=p.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=p.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=p.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],p.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(d,p)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:p.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),p.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(d,p)=>{try{const h=this.privParticipants.addOrUpdateParticipant(p.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],p.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(d,p)=>{try{const h=this.privParticipants.getParticipant(p.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(p.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],p.sessionId)))}catch{}},this.onTranslationReceived=(d,p)=>{try{switch(p.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break}}catch{}},this.onParticipantsListReceived=(d,p)=>{var h;try{if(p.sessionToken!==void 0&&p.sessionToken!==null&&(this.privRoom.token=p.sessionToken),this.privParticipants.participants=[...p.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),p.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(d,p)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,p)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{s.targetLanguages.length===0&&s.addTargetLanguage(this.privLanguage),s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceResponse_ProfanityOption])||s.setProfanity(r.ProfanityOption.Masked);let p=s.getProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name]);p==null&&(p="Host"),n.Contracts.throwIfNullOrTooLong(p,"nickname",50),n.Contracts.throwIfNullOrTooShort(p,"nickname",2),s.setProperty(r.PropertyId[r.PropertyId.ConversationTranslator_Name],p)}this.privConfig=s;const u=s;n.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const s=this.conversationId,c=this.participants.map(d=>({id:d.id,preferredLanguage:d.preferredLanguage,voice:d.voice})),l={};for(const d of e.ConversationConnectionConfig.transcriptionEventKeys){const p=this.properties.getProperty(d,"");p!==""&&(l[d]=p)}return{id:s,participants:c,conversationProperties:l}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}set conversationTranslator(s){this.privConversationTranslator=s}onToken(s){this.privConversationTranslator.onToken(s)}createConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=l,this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}startConversationAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}addParticipantAsync(s,c,l){n.Contracts.throwIfNullOrUndefined(s,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(s),c,l)}joinConversationAsync(s,c,l,u,d){try{n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,p=>{n.Contracts.throwIfNullOrUndefined(p,this.privErrors.permissionDeniedConnect),this.privRoom=p,this.privConfig.authorizationToken=p.cognitiveSpeechAuthToken,u&&u(p.cognitiveSpeechAuthToken)},p=>{this.handleError(p,d)})}catch(p){this.handleError(p,d)}}deleteConversationAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),s,c)}async deleteConversationImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.endConversationImplAsync(),s,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,l)},d=>{this.handleError(d,l)})}catch(u){this.handleError(u,l)}}removeParticipantAsync(s,c,l){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(s),c,l);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let u="";typeof s=="string"?u=s:s.hasOwnProperty("id")?u=s.id:s.hasOwnProperty("userId")&&(u=s.userId),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(p=>p.id===u)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(u),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}}catch(u){this.handleError(u,l)}}unlockConversationAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,l)},d=>{this.handleError(d,l)})}catch(u){this.handleError(u,l)}}sendTextMessageAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}setTranslatedLanguagesAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}changeNicknameAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const l=this.conversationInfo;return l.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(l,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.conversationInfo;return c.participants=[s],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(l){c&&c(l)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const l=s;c(l.name+": "+l.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(l=>this.toParticipant(l));return s?c:c.filter(l=>l.isHost===!1)}toParticipant(s){return new r.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return gi.ConversationImpl=o,gi}var yp={};Object.defineProperty(yp,"__esModule",{value:!0});yp.ConversationCommon=void 0;class vB{constructor(t){this.privAudioConfig=t}handleCallback(t,n){if(t){try{t()}catch(r){n&&n(r)}t=void 0}}handleError(t,n){if(n)if(t instanceof Error){const r=t;n(r.name+": "+r.message)}else n(t)}}yp.ConversationCommon=vB;var oa={},NC;function gB(){if(NC)return oa;NC=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.ConversationExpirationEventArgs=void 0;const e=O();let t=class extends e.SessionEventArgs{constructor(r,i){super(i),this.privExpirationTime=r}get expirationTime(){return this.privExpirationTime}};return oa.ConversationExpirationEventArgs=t,oa}var sa={},zC;function mB(){if(zC)return sa;zC=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.ConversationParticipantsChangedEventArgs=void 0;const e=O();let t=class extends e.SessionEventArgs{constructor(r,i,o){super(o),this.privReason=r,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return sa.ConversationParticipantsChangedEventArgs=t,sa}var aa={},jC;function yB(){if(jC)return aa;jC=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.ConversationTranslationCanceledEventArgs=void 0;const e=ul();let t=class extends e.CancellationEventArgsBase{};return aa.ConversationTranslationCanceledEventArgs=t,aa}var ca={},LC;function SB(){if(LC)return ca;LC=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.ConversationTranslationEventArgs=void 0;const e=O();let t=class extends e.RecognitionEventArgs{constructor(r,i,o){super(i,o),this.privResult=r}get result(){return this.privResult}};return ca.ConversationTranslationEventArgs=t,ca}var la={},FC;function CB(){if(FC)return la;FC=1,Object.defineProperty(la,"__esModule",{value:!0}),la.ConversationTranslationResult=void 0;const e=sA();let t=class extends e.TranslationRecognitionResult{constructor(r,i,o,a,s,c,l,u,d,p,h){super(i,a,s,c,l,u,void 0,void 0,d,p,h),this.privId=r,this.privOrigLang=o}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return la.ConversationTranslationResult=t,la}var Hh={},ua={},pl={};Object.defineProperty(pl,"__esModule",{value:!0});pl.StringUtils=void 0;class wB{static formatString(t,n){if(!t)return"";if(!n)return t;let r="",i="";const o=c=>{r+=c},a=c=>{i+=c};let s=o;for(let c=0;c<t.length;c++){const l=t[c],u=c+1<t.length?t[c+1]:"";switch(l){case"{":u==="{"?(s("{"),c++):s=a;break;case"}":u==="}"?(s("}"),c++):(n.hasOwnProperty(i)&&(r+=n[i]),s=o,i="");break;default:s(l);break}}return r}}pl.StringUtils=wB;var BC;function RB(){if(BC)return ua;BC=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.ConversationTranslatorConnectionFactory=void 0;const e=Qe(),t=pl,n=Z,r=O(),i=Ge,o=bn,a=In(),s=W();let c=class TA extends a.ConnectionFactoryBase{constructor(u){super(),n.Contracts.throwIfNullOrUndefined(u,"convGetter"),this.privConvGetter=u}create(u,d,p){const h=u.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",v=this.privConvGetter().room,g=v.cognitiveSpeechRegion||u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,""),y={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(g),path:TA.CTS_VIRT_MIC_PATH,region:encodeURIComponent(g)};y[o.QueryParameterNames.Language]=encodeURIComponent(u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"")),y[o.QueryParameterNames.CtsMeetingId]=encodeURIComponent(v.roomId),y[o.QueryParameterNames.CtsDeviceId]=encodeURIComponent(v.participantId),y[o.QueryParameterNames.CtsIsParticipant]=v.isHost?"":"&"+o.QueryParameterNames.CtsIsParticipant;let f="";const m={},S={};if(h){f=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint),f||(f="wss://"+u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),f=t.StringUtils.formatString(f,y);const R=new URL(f);R.searchParams.forEach((A,E)=>{m[E]=A}),new s.TranscriberConnectionFactory().setQueryParams(m,u,f),m[o.QueryParameterNames.CtsMeetingId]=y[o.QueryParameterNames.CtsMeetingId],m[o.QueryParameterNames.CtsDeviceId]=y[o.QueryParameterNames.CtsDeviceId],v.isHost||(m[o.QueryParameterNames.CtsIsParticipant]=""),o.QueryParameterNames.Format in m||(m[o.QueryParameterNames.Format]="simple"),R.searchParams.forEach((A,E)=>{R.searchParams.set(E,m[E]),delete m[E]}),f=R.toString()}else{const R=new s.TranslationConnectionFactory;f=R.getEndpointUrl(u,!0),f=t.StringUtils.formatString(f,y),R.setQueryParams(m,u,f)}S[i.HeaderNames.ConnectionId]=p,S[e.RestConfigBase.configParams.token]=v.token,d.token&&(S[d.headerName]=d.token);const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new e.WebsocketConnection(f,m,S,new s.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),C,p))}};return ua.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",ua}var qC;function PB(){return qC||(qC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=W(),n=RB(),r=Q(),i=Z,o=O(),a=EA(),s=sm();var c;(function(d){d[d.Inactive=0]="Inactive",d[d.Connecting=1]="Connecting",d[d.Connected=2]="Connected"})(c=e.SpeechState||(e.SpeechState={}));class l extends o.TranslationRecognizer{constructor(p,h,v,g){super(p,h,new n.ConversationTranslatorConnectionFactory(g)),this.privSpeechState=c.Inactive,v&&(this.privTranslator=v,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(y,f)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,f)},this.recognized=async(y,f)=>{var m;(m=f.result)!=null&&m.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(f.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,f)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(p){this.privSpeechState=p}set authentication(p){this.privReco.authentication=p}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(p){try{if(this.privTranslator.canceled){const h=new s.ConversationTranslationCanceledEventArgs(o.CancellationReason.Error,p,o.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){var p;try{this.stopContinuousRecognitionAsync(),await((p=this.privReco)==null?void 0:p.disconnect()),this.privSpeechState=c.Inactive}catch{}}}class u extends s.ConversationCommon{constructor(p){super(p),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new o.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){var p;return(p=this.privConversation)==null?void 0:p.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(p){this.privCTRecognizer.authentication=p}setServiceProperty(p,h){const v=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));v[p]=h,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(v))}joinConversationAsync(p,h,v,g,y){try{if(typeof p=="string"){i.Contracts.throwIfNullOrUndefined(p,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),y);let f=v;(f==null||f==="")&&(f=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=o.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(o.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(f),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_RecoLanguage],f),this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.ConversationTranslator_Name],h);const m=[o.PropertyId.SpeechServiceConnection_Host,o.PropertyId.ConversationTranslator_Host,o.PropertyId.SpeechServiceConnection_Endpoint,o.PropertyId.SpeechServiceConnection_ProxyHostName,o.PropertyId.SpeechServiceConnection_ProxyPassword,o.PropertyId.SpeechServiceConnection_ProxyPort,o.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of m){const R=this.privProperties.getProperty(C);if(R){const T=typeof C=="string"?C:o.PropertyId[C];this.privSpeechTranslationConfig.setProperty(T,R)}}const S=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(S))this.privSpeechTranslationConfig.setServiceProperty(C,S[C],o.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(p,h,f,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),y),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(g,y)},R=>{this.handleError(R,y)})},C=>{this.handleError(C,y)})}else typeof p=="object"?(i.Contracts.throwIfNullOrUndefined(p,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(o.PropertyId.ConversationTranslator_Name,h),this.privConversation=p,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=p.config,this.handleCallback(v,g)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),g)}catch(f){this.handleError(f,typeof v=="string"?y:g)}}leaveConversationAsync(p,h){(0,r.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),p,h)}sendTextMessageAsync(p,h,v){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(p,this.privErrors.invalidArgs.replace("{arg}",p)),this.privConversation.sendTextMessageAsync(p,h,v)}catch(g){this.handleError(g,v)}}startTranscribingAsync(p,h){(0,r.marshalPromiseToCallbacks)((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(v){throw this.privIsSpeaking=!1,await this.cancelSpeech(),v}})(),p,h)}stopTranscribingAsync(p,h){(0,r.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((v,g)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(v,g)})}catch{await this.cancelSpeech()}})(),p,h)}isDisposed(){return this.privIsDisposed}dispose(p,h,v){(0,r.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,v)}async cancelSpeech(){var p;try{this.privIsSpeaking=!1,await((p=this.privCTRecognizer)==null?void 0:p.onCancelSpeech()),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=o.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(o.PropertyId[o.PropertyId.SpeechServiceConnection_Key],"");const p=()=>this.privConversation;this.privCTRecognizer=new l(this.privSpeechTranslationConfig,this.privAudioConfig,this,p)}catch(p){throw await this.cancelSpeech(),p}}startContinuousRecognition(){return new Promise((p,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(p,h)})}}e.ConversationTranslator=u}(Hh)),Hh}var da={},UC;function EB(){if(UC)return da;UC=1,Object.defineProperty(da,"__esModule",{value:!0}),da.ConversationTranscriber=void 0;const e=W(),t=Yt,n=Q(),r=Z,i=O();let o=class AA extends i.Recognizer{constructor(s,c){const l=s;r.Contracts.throwIfNull(l,"speechConfig"),r.Contracts.throwIfNullOrWhitespace(l.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,l.properties,new e.ConversationTranscriberConnectionFactory,s.tokenCredential),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(s,c,l){const u=s;return c.properties.mergeTo(u.properties),new AA(s,l)}get endpointId(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){r.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,s)}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),s,c)}stopTranscribingAsync(s,c){(0,n.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}close(s,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,c,l,u){const d=l;return u.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(s,c,d,u,this)}};return da.ConversationTranscriber=o,da}var mi={},$C;function TB(){if($C)return mi;$C=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Participant=mi.User=void 0;const e=O();class t{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}mi.User=t;class n{constructor(i,o,a,s,c,l,u,d){this.privId=i,this.privAvatar=o,this.privDisplayName=a,this.privIsHost=s,this.privIsMuted=c,this.privIsUsingTts=l,this.privPreferredLanguage=u,this.privVoice=d,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,o,a){return new n(i,"",i,!1,!1,!1,o,a)}}return mi.Participant=n,mi}var bA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))})(bA);var yi={},VC;function AB(){if(VC)return yi;VC=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.MeetingImpl=yi.Meeting=void 0;const e=W(),t=Q(),n=Z,r=O();let i=class{constructor(){}static createMeetingAsync(s,c,l,u){if(n.Contracts.throwIfNullOrUndefined(s,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),n.Contracts.throwIfNullOrUndefined(s.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),n.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!s.subscriptionKey&&!s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceAuthorization_Token])&&n.Contracts.throwIfNullOrUndefined(s.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const d=new o(s,c);return(0,t.marshalPromiseToCallbacks)((async()=>{})(),l,u),d}};yi.Meeting=i;class o extends i{constructor(s,c){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=d=>{var p;this.privIsConnected=!0;try{(p=this.privConversationTranslator)!=null&&p.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,d)}catch{}},this.onDisconnected=d=>{var p;try{(p=this.privConversationTranslator)!=null&&p.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,d)}catch{}finally{this.close(!1)}},this.onCanceled=(d,p)=>{var h;try{(h=this.privConversationTranslator)!=null&&h.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,p)}catch{}},this.onParticipantUpdateCommandReceived=(d,p)=>{try{const h=this.privParticipants.getParticipant(p.id);if(h!==void 0){switch(p.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=p.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=p.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=p.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=p.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=p.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,[this.toParticipant(h)],p.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(d,p)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:p.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.Updated,this.toParticipants(!1),p.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(d,p)=>{try{const h=this.privParticipants.addOrUpdateParticipant(p.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],p.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(d,p)=>{try{const h=this.privParticipants.getParticipant(p.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(p.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],p.sessionId)))}catch{}},this.onTranslationReceived=(d,p)=>{try{switch(p.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new r.ConversationTranslationEventArgs(p.payload,void 0,p.sessionId));break}}catch{}},this.onParticipantsListReceived=(d,p)=>{var h;try{if(p.sessionToken!==void 0&&p.sessionToken!==null&&(this.privRoom.token=p.sessionToken),this.privParticipants.participants=[...p.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new r.ConversationParticipantsChangedEventArgs(r.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),p.sessionId)),this.me.isHost){const v=(h=this.privConversationTranslator)==null?void 0:h.properties.getProperty(r.PropertyId.ConversationTranslator_Name);v!==void 0&&v.length>0&&v!==this.me.displayName&&this.changeNicknameAsync(v)}}catch{}},this.onConversationExpiration=(d,p)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,p)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new r.PropertyCollection,this.privManager=new e.ConversationManager,s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])||s.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=s.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=s;const u=s;n.Contracts.throwIfNull(u,"speechConfig"),this.privProperties=u.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){var s,c;return(s=this.privParticipants.me)!=null&&s.isHost?!1:(c=this.privParticipants.me)==null?void 0:c.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const s=this.meetingId,c=this.participants.map(d=>({id:d.id,preferredLanguage:d.preferredLanguage,voice:d.voice})),l={};for(const d of e.ConversationConnectionConfig.transcriptionEventKeys){const p=this.properties.getProperty(d,"");p!==""&&(l[d]=p)}return{id:s,participants:c,meetingProperties:l}}get canSend(){var s;return this.privIsConnected&&!((s=this.privParticipants.me)!=null&&s.isMuted)}get canSendAsHost(){var s;return this.privIsConnected&&((s=this.privParticipants.me)==null?void 0:s.isHost)}get authorizationToken(){return this.privToken}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),this.privToken=s}createMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,l=>{l||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=l,this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}startMeetingAsync(s,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}addParticipantAsync(s,c,l){n.Contracts.throwIfNullOrUndefined(s,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(s),c,l)}joinMeetingAsync(s,c,l,u,d){try{n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","conversationId")),n.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,s,p=>{n.Contracts.throwIfNullOrUndefined(p,this.privErrors.permissionDeniedConnect),this.privRoom=p,this.privConfig.authorizationToken=p.cognitiveSpeechAuthToken,u&&u(p.cognitiveSpeechAuthToken)},p=>{this.handleError(p,d)})}catch(p){this.handleError(p,d)}}deleteMeetingAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),s,c)}async deleteMeetingImplAsync(){n.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),n.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(s,c){(0,t.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),s,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}muteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!0),()=>{this.handleCallback(c,l)},d=>{this.handleError(d,l)})}catch(u){this.handleError(u,l)}}removeParticipantAsync(s,c,l){try{if(n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&s.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(s),c,l);else{n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),l);let u="";typeof s=="string"?u=s:s.hasOwnProperty("id")?u=s.id:s.hasOwnProperty("userId")&&(u=s.userId),n.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(p=>p.id===u)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(u),()=>{this.handleCallback(c,l)},p=>{this.handleError(p,l)})}}catch(u){this.handleError(u,l)}}unlockMeetingAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteAllParticipantsAsync(s,c){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(s,c)},l=>{this.handleError(l,c)})}catch(l){this.handleError(l,c)}}unmuteParticipantAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","userId")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),!this.me.isHost&&this.me.id!==s&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),l),this.privParticipants.getParticipantIndex(s)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(s,!1),()=>{this.handleCallback(c,l)},d=>{this.handleError(d,l)})}catch(u){this.handleError(u,l)}}sendTextMessageAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","message")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),s.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}setTranslatedLanguagesAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfArrayEmptyOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","languages")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}changeNicknameAsync(s,c,l){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),n.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","nickname")),n.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),l),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(s),()=>{this.handleCallback(c,l)},u=>{this.handleError(u,l)})}catch(u){this.handleError(u,l)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(s){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await s.enforceAudioGating(),this.privTranscriberRecognizer=s,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const s=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:s,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(s){if(this.privParticipants.addOrUpdateParticipant(s)!==void 0&&this.privTranscriberRecognizer){const l=this.meetingInfo;return l.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(l,"join")}}removeParticipantImplAsync(s){this.privParticipants.deleteParticipant(s.id);const c=this.meetingInfo;return c.participants=[s],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(s){var c;try{this.privIsConnected=!1,await((c=this.privConversationRecognizer)==null?void 0:c.close()),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(l){throw l}s&&this.dispose()}handleCallback(s,c){if(s){try{s()}catch(l){c&&c(l)}s=void 0}}handleError(s,c){if(c)if(s instanceof Error){const l=s;c(l.name+": "+l.message)}else c(s)}toParticipants(s){const c=this.privParticipants.participants.map(l=>this.toParticipant(l));return s?c:c.filter(l=>l.isHost===!1)}toParticipant(s){return new r.Participant(s.id,s.avatar,s.displayName,s.isHost,s.isMuted,s.isUsingTts,s.preferredLanguage,s.voice)}getMuteAllCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMuteCommand(s,c){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getEjectCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(s,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:s,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getChangeNicknameCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(s,"nickname"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:s,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:s})}getMessageCommand(s){return n.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),n.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),n.Contracts.throwIfNullOrWhitespace(s,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:s,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return yi.MeetingImpl=o,yi}var pa={},HC;function bB(){if(HC)return pa;HC=1,Object.defineProperty(pa,"__esModule",{value:!0}),pa.MeetingTranscriptionCanceledEventArgs=void 0;const e=ul();class t extends e.CancellationEventArgsBase{}return pa.MeetingTranscriptionCanceledEventArgs=t,pa}var ha={},WC;function IB(){if(WC)return ha;WC=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.MeetingTranscriber=void 0;const e=W(),t=Q(),n=Z,r=O(),i=sm();let o=class{constructor(s){this.privAudioConfig=s,this.privProperties=new r.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return r.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}joinMeetingAsync(s,c,l){const u=s;n.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(s.config,this.privAudioConfig),n.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,t.marshalPromiseToCallbacks)(u.connectTranscriberRecognizer(this.privRecognizer),c,l)}startTranscribingAsync(s,c){this.privRecognizer.startContinuousRecognitionAsync(s,c)}stopTranscribingAsync(s,c){this.privRecognizer.stopContinuousRecognitionAsync(s,c)}leaveMeetingAsync(s,c){this.privRecognizer.disconnectCallbacks(),(0,t.marshalPromiseToCallbacks)((async()=>{})(),s,c)}close(s,c){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),s,c)}async dispose(s){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),s&&(this.privDisposedRecognizer=!0))}};return ha.MeetingTranscriber=o,ha}var fa={},KC;function _B(){if(KC)return fa;KC=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.ConversationTranscriptionResult=void 0;const e=O();let t=class extends e.RecognitionResult{constructor(r,i,o,a,s,c,l,u,d,p,h){super(r,i,o,a,s,c,l,d,p,h),this.privSpeakerId=u}get speakerId(){return this.privSpeakerId}};return fa.ConversationTranscriptionResult=t,fa}var JC;function sm(){return JC||(JC=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranscriptionResult=e.MeetingTranscriber=e.MeetingTranscriptionCanceledEventArgs=e.MeetingImpl=e.Meeting=e.ParticipantChangedReason=e.User=e.Participant=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.ConversationCommon=e.ConversationImpl=e.Conversation=void 0;var t=EA();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var n=yp;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return n.ConversationCommon}});var r=gB();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return r.ConversationExpirationEventArgs}});var i=mB();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var o=yB();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return o.ConversationTranslationCanceledEventArgs}});var a=SB();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var s=CB();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return s.ConversationTranslationResult}});var c=PB();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var l=EB();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return l.ConversationTranscriber}});var u=TB();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return u.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return u.User}});var d=bA;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return d.ParticipantChangedReason}});var p=AB();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return p.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return p.MeetingImpl}});var h=bB();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var v=IB();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return v.MeetingTranscriber}});var g=_B();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return g.ConversationTranscriptionResult}})}(Vh)),Vh}var Si={},GC;function am(){if(GC)return Si;GC=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.SynthesisRequest=Si.Synthesizer=void 0;const e=W(),t=Q(),n=Z,r=O();let i=class IA{constructor(s){const c=s;n.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue,this.tokenCredential=s.tokenCredential}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){n.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(s){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let l=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),u=this.properties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,""),d=IA.XMLEncode(s);return this.autoDetectSourceLanguage?l="en-US":u=u||c[l],u&&(d=`<voice name='${u}'>${d}</voice>`),d=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${l}'>${d}</speak>`,d}async dispose(s){this.privDisposed||(s&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const s=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(s.text,s.isSSML,s.requestId,s.cb,s.err,s.dataStream)}}createSynthesizerConfig(s){return new e.SynthesizerConfig(s,this.privProperties)}implCommonSynthesizeSetup(){let s=typeof window<"u"?"Browser":"Node",c="unknown",l="unknown";typeof navigator<"u"&&(s=s+"/"+navigator.platform,c=navigator.userAgent,l=navigator.appVersion);const u=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(s,c,l)))),d=this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key,void 0),p=d&&d!==""?new e.CognitiveSubscriptionKeyAuthentication(d):this.tokenCredential?new e.CognitiveTokenAuthentication(async()=>{try{const h=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(h==null?void 0:h.token)??""}catch(h){throw h}},async()=>{try{const h=await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default");return(h==null?void 0:h.token)??""}catch(h){throw h}}):new e.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(p,this.privConnectionFactory,u),this.privRestAdapter=this.createRestSynthesisAdapter(p,u)}static XMLEncode(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Si.Synthesizer=i;class o{constructor(s,c,l,u,d,p){this.requestId=s,this.text=c,this.isSSML=l,this.cb=u,this.err=d,this.dataStream=p}}return Si.SynthesisRequest=o,Si}var va={},QC;function kB(){if(QC)return va;QC=1,Object.defineProperty(va,"__esModule",{value:!0}),va.SpeechSynthesizer=void 0;const e=W(),t=Q(),n=ll,r=ci,i=nt,o=Z,a=O(),s=am();let c=class _A extends a.Synthesizer{constructor(u,d){super(u),d!==null&&(d===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=d),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(u,d,p){const h=u;return d.properties.mergeTo(h.properties),new _A(u,p)}speakTextAsync(u,d,p,h){this.speakImpl(u,!1,d,p,h)}speakSsmlAsync(u,d,p,h){this.speakImpl(u,!0,d,p,h)}async getVoicesAsync(u=""){return this.getVoices(u)}close(u,d){o.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),u,d)}get internalData(){return this.privAdapter}createSynthesisAdapter(u,d,p){return new e.SpeechSynthesisAdapter(u,d,p,this,this.audioConfig)}createRestSynthesisAdapter(u,d){return new e.SynthesisRestAdapter(d,u)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(u,d,p,h,v){try{o.Contracts.throwIfDisposed(this.privDisposed);const g=(0,t.createNoDashGuid)();let y;v instanceof a.PushAudioOutputStreamCallback?y=new i.PushAudioOutputStreamImpl(v):v instanceof a.PullAudioOutputStream?y=v:v!==void 0?y=new n.AudioFileWriter(v):y=void 0,this.synthesisRequestQueue.enqueue(new s.SynthesisRequest(g,u,d,f=>{if(this.privSynthesizing=!1,p)try{p(f)}catch(m){h&&h(m)}p=void 0,this.adapterSpeak().catch(()=>{})},f=>{h&&h(f)},y)),this.adapterSpeak().catch(()=>{})}catch(g){if(h)if(g instanceof Error){const y=g;h(y.name+": "+y.message)}else h(g);this.dispose(!0).catch(()=>{})}}async getVoices(u){const d=(0,t.createNoDashGuid)(),p=await this.privRestAdapter.getVoicesList(d);if(p.ok&&Array.isArray(p.json)){let h=p.json;return u&&u.length>0&&(h=h.filter(v=>!!v.Locale&&v.Locale.toLowerCase()===u.toLowerCase())),new a.SynthesisVoicesResult(d,h,void 0)}else return new a.SynthesisVoicesResult(d,void 0,`Error: ${p.status}: ${p.statusText}`)}};return va.SpeechSynthesizer=c,va}var Sp={};Object.defineProperty(Sp,"__esModule",{value:!0});Sp.SynthesisResult=void 0;class xB{constructor(t,n,r,i){this.privResultId=t,this.privReason=n,this.privErrorDetails=r,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}Sp.SynthesisResult=xB;var ga={},YC;function OB(){if(YC)return ga;YC=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.SpeechSynthesisResult=void 0;const e=O();let t=class extends e.SynthesisResult{constructor(r,i,o,a,s,c){super(r,i,a,s),this.privAudioData=o,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return ga.SpeechSynthesisResult=t,ga}var Cp={};Object.defineProperty(Cp,"__esModule",{value:!0});Cp.SpeechSynthesisEventArgs=void 0;class MB{constructor(t){this.privResult=t}get result(){return this.privResult}}Cp.SpeechSynthesisEventArgs=MB;var wp={};Object.defineProperty(wp,"__esModule",{value:!0});wp.SpeechSynthesisWordBoundaryEventArgs=void 0;class DB{constructor(t,n,r,i,o,a){this.privAudioOffset=t,this.privDuration=n,this.privText=r,this.privWordLength=i,this.privTextOffset=o,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}wp.SpeechSynthesisWordBoundaryEventArgs=DB;var Rp={};Object.defineProperty(Rp,"__esModule",{value:!0});Rp.SpeechSynthesisBookmarkEventArgs=void 0;class NB{constructor(t,n){this.privAudioOffset=t,this.privText=n}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}Rp.SpeechSynthesisBookmarkEventArgs=NB;var Pp={};Object.defineProperty(Pp,"__esModule",{value:!0});Pp.SpeechSynthesisVisemeEventArgs=void 0;class zB{constructor(t,n,r){this.privAudioOffset=t,this.privVisemeId=n,this.privAnimation=r}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}Pp.SpeechSynthesisVisemeEventArgs=zB;var kA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))})(kA);var ma={},XC;function jB(){if(XC)return ma;XC=1,Object.defineProperty(ma,"__esModule",{value:!0}),ma.SynthesisVoicesResult=void 0;const e=O();let t=class extends e.SynthesisResult{constructor(r,i,o){if(Array.isArray(i)){super(r,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new e.VoiceInfo(a))}else super(r,e.ResultReason.Canceled,o||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return ma.SynthesisVoicesResult=t,ma}var xA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var n;(function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"})(n=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const r={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female},i={Neural:n.OnlineNeural,NeuralHD:n.OnlineNeuralHD};class o{constructor(s){if(this.privStyleList=[],s){if(this.privName=s.Name,this.privLocale=s.Locale,this.privShortName=s.ShortName,this.privLocaleName=s.LocaleName,this.privDisplayName=s.DisplayName,this.privLocalName=s.LocalName,this.privVoiceType=i[s.VoiceType]||n.Unknown,this.privGender=r[s.Gender]||t.Unknown,s.StyleList&&Array.isArray(s.StyleList))for(const c of s.StyleList)this.privStyleList.push(c);this.privSampleRateHertz=s.SampleRateHertz,this.privStatus=s.Status,s.ExtendedPropertyMap&&(this.privExtendedPropertyMap=s.ExtendedPropertyMap),this.privWordsPerMinute=s.WordsPerMinute,Array.isArray(s.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...s.SecondaryLocaleList]),Array.isArray(s.RolePlayList)&&(this.privRolePlayList=[...s.RolePlayList]),s.VoiceTag&&(this.privVoiceTag=s.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}e.VoiceInfo=o})(xA);var Ep={};Object.defineProperty(Ep,"__esModule",{value:!0});Ep.SpeakerAudioDestination=void 0;const Ci=Q(),LB=nt,It=ai,FB=60*30,ZC={[It.AudioFormatTag.PCM]:"audio/wav",[It.AudioFormatTag.MuLaw]:"audio/x-wav",[It.AudioFormatTag.MP3]:"audio/mpeg",[It.AudioFormatTag.OGG_OPUS]:"audio/ogg",[It.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[It.AudioFormatTag.ALaw]:"audio/x-wav",[It.AudioFormatTag.FLAC]:"audio/flac",[It.AudioFormatTag.AMR_WB]:"audio/amr-wb",[It.AudioFormatTag.G722]:"audio/G722"};class BB{constructor(t){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=t||(0,Ci.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(t,n,r){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(t),this.updateSourceBuffer().then(()=>{n&&n()},i=>{r&&r(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(t),this.privBytesReceived+=t.byteLength)}close(t,n){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{t&&t()},r=>{n&&n(r)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===It.AudioFormatTag.PCM||this.privFormat.formatTag===It.AudioFormatTag.MuLaw||this.privFormat.formatTag===It.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(()=>{r=this.privFormat.addHeader(r);const i=new Blob([r],{type:ZC[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{t&&t()},o=>{n&&n(o)})},i=>{n&&n(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(t){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=t;const n=ZC[this.privFormat.formatTag];n===void 0?console.warn(`Unknown mimeType for format ${It.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=FB,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(n),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(r=>{Ci.Events.instance.onEvent(new Ci.BackgroundEvent(r))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(r=>{Ci.Events.instance.onEvent(new Ci.BackgroundEvent(r))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(r=>{Ci.Events.instance.onEvent(new Ci.BackgroundEvent(r))})):(console.warn(`Format ${It.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new LB.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){var t;return((t=this.privAudio)==null?void 0:t.volume)??-1}set volume(t){this.privAudio&&(this.privAudio.volume=t)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(t,n){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{t&&t()},r=>{n&&n(r)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch{this.privAudioBuffer.unshift(t),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}Ep.SpeakerAudioDestination=BB;var ya={},ew;function qB(){if(ew)return ya;ew=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.ConversationTranscriptionCanceledEventArgs=void 0;const e=ul();let t=class extends e.CancellationEventArgsBase{};return ya.ConversationTranscriptionCanceledEventArgs=t,ya}var Sa={},tw;function UB(){if(tw)return Sa;tw=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.MeetingTranscriptionCanceledEventArgs=void 0;const e=ul();let t=class extends e.CancellationEventArgsBase{};return Sa.MeetingTranscriptionCanceledEventArgs=t,Sa}var OA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))})(OA);var MA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))})(MA);var Ca={},nw;function $B(){if(nw)return Ca;nw=1,Object.defineProperty(Ca,"__esModule",{value:!0}),Ca.PronunciationAssessmentConfig=void 0;const e=Z,t=O();let n=class DA{constructor(i,o=t.PronunciationAssessmentGradingSystem.FivePoint,a=t.PronunciationAssessmentGranularity.Phoneme,s=!1){e.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[o]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(s))}static fromJSON(i){e.Contracts.throwIfNullOrUndefined(i,"json");const o=new DA("");return o.privProperties=new t.PropertyCollection,o.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,i),o}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const o=i.internalData;o.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,o.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,o.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){e.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){e.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const o=i?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,o)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),o=JSON.parse(i),a=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);a&&(o.referenceText=a);const s=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);s&&(o.gradingSystem=s);const c=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);c&&(o.granularity=c),this.privPhonemeAlphabet&&(o.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(o.nbestPhonemeCount=this.privNBestPhonemeCount),o.enableProsodyAssessment=this.privEnableProsodyAssessment,o.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(o.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(o))}};return Ca.PronunciationAssessmentConfig=n,Ca}var wi={},rw;function VB(){if(rw)return wi;rw=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.PronunciationAssessmentResult=wi.ContentAssessmentResult=void 0;const e=Z,t=O();class n{constructor(o){this.privPronJson=o}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}wi.ContentAssessmentResult=n;let r=class NA{constructor(o){const a=JSON.parse(o);e.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(o){e.Contracts.throwIfNullOrUndefined(o,"result");const a=o.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(a,"json"),new NA(a)}get detailResult(){return this.privPronJson}get accuracyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.AccuracyScore}get pronunciationScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.PronScore}get completenessScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.CompletenessScore}get fluencyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.FluencyScore}get prosodyScore(){var o;return(o=this.detailResult.PronunciationAssessment)==null?void 0:o.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new n(this.detailResult)}};return wi.PronunciationAssessmentResult=r,wi}var wa={},iw;function HB(){if(iw)return wa;iw=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.AvatarConfig=void 0;const e=Z,t=O();let n=class{constructor(i,o,a){this.privCustomized=!1,this.privUseBuiltInVoice=!1,e.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=o,a===void 0&&(a=new t.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(i){this.privUseBuiltInVoice=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return wa.AvatarConfig=n,wa}var zA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(n){n.SwitchedToSpeaking="SwitchedToSpeaking",n.SwitchedToIdle="SwitchedToIdle",n.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(r,i){this.privOffset=r,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t})(zA);var Ra={},Pa={},ow;function jA(){if(ow)return Pa;ow=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.SpeechSynthesisConnectionFactory=void 0;const e=Qe(),t=O(),n=In(),r=W(),i=Ge,o=bn;let a=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(c,l,u){let d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),h=n.ConnectionFactoryBase.getHostSuffix(p),v=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=v===void 0?"tts":"voice",y=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+p+"."+g+".speech"+h),f={},m={};if(l.token!==void 0&&l.token!==""&&(m[l.headerName]=l.token),m[i.HeaderNames.ConnectionId]=u,v!==void 0&&v!==""&&(!d||d.search(o.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(f[o.QueryParameterNames.CustomVoiceDeploymentId]=v),c.avatarEnabled&&(!d||d.search(o.QueryParameterNames.EnableAvatar)===-1)&&(f[o.QueryParameterNames.EnableAvatar]="true"),d){const C=new URL(d),R=C.pathname;(R===""||R==="/")&&(C.pathname=this.synthesisUri,d=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(C.toString()))}d||(d=y+this.synthesisUri),c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,d);const S=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(d,f,m,new r.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(c.parameters),S,u)}};return Pa.SpeechSynthesisConnectionFactory=a,Pa}var sw;function WB(){if(sw)return Ra;sw=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.AvatarSynthesizer=void 0;const e=jA(),t=W(),n=Q(),r=ci,i=O(),o=Z,a=am();let s=class extends i.Synthesizer{constructor(l,u){super(l),o.Contracts.throwIfNullOrUndefined(u,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=u,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(l){o.Contracts.throwIfNullOrUndefined(l,"peerConnection"),this.privIceServers=l.getConfiguration().iceServers,o.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const u=new n.Deferred;l.onicegatheringstatechange=()=>{n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering state: "+l.iceGatheringState,n.EventType.Debug)),l.iceGatheringState==="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering complete.",n.EventType.Info)),u.resolve())},l.onicecandidate=g=>{g.candidate?n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: "+g.candidate.candidate,n.EventType.Debug)):(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice candidate: complete",n.EventType.Debug)),u.resolve())},setTimeout(()=>{l.iceGatheringState!=="complete"&&(n.Events.instance.onEvent(new n.PlatformEvent("peer connection: ice gathering timeout.",n.EventType.Warning)),u.resolve())},2e3);const d=await l.createOffer();await l.setLocalDescription(d),await u.promise,n.Events.instance.onEvent(new n.PlatformEvent("peer connection: got local SDP.",n.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(l.localDescription));const p=await this.speak("",!1);if(p.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(p.resultId,p.reason,p.errorDetails,p.properties);const h=atob(p.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),v=new RTCSessionDescription(JSON.parse(h));return await l.setRemoteDescription(v),new i.SynthesisResult(p.resultId,p.reason,void 0,p.properties)}async speakTextAsync(l){const u=await this.speak(l,!1);return new i.SynthesisResult(u.resultId,u.reason,u.errorDetails,u.properties)}async speakSsmlAsync(l){const u=await this.speak(l,!0);return new i.SynthesisResult(u.resultId,u.reason,u.errorDetails,u.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return o.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(l,u,d){return new t.AvatarSynthesisAdapter(l,u,d,this,this.privAvatarConfig)}createRestSynthesisAdapter(l,u){}createSynthesizerConfig(l){const u=super.createSynthesizerConfig(l);return u.avatarEnabled=!0,u}async speak(l,u){const d=(0,n.createNoDashGuid)(),p=new n.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(d,l,u,h=>{p.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{p.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),p.promise}};return Ra.AvatarSynthesizer=s,Ra}var qo={};Object.defineProperty(qo,"__esModule",{value:!0});qo.AvatarVideoFormat=qo.Coordinate=void 0;class KB{constructor(t,n){this.x=t,this.y=n}}qo.Coordinate=KB;class JB{constructor(t="H264",n=2e6,r=1920,i=1080){this.codec=t,this.bitrate=n,this.width=r,this.height=i}setCropRange(t,n){this.cropRange={bottomRight:n,topLeft:t}}}qo.AvatarVideoFormat=JB;var Ea={},aw;function GB(){if(aw)return Ea;aw=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.AvatarWebRTCConnectionResult=void 0;const e=O();let t=class extends e.SynthesisResult{constructor(r,i,o,a,s){super(i,o,a,s),this.privSDPAnswer=r}get SDPAnswer(){return this.privSDPAnswer}};return Ea.AvatarWebRTCConnectionResult=t,Ea}var Ta={},cw;function QB(){if(cw)return Ta;cw=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.Diagnostics=void 0;const e=Qe(),t=Q();let n=class{static SetLoggingLevel(i){this.privListener=new e.ConsoleLoggingListener(i),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return Ta.Diagnostics=n,n.privListener=void 0,Ta}var lw;function O(){return lw||(lw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionEventArgs=e.CancellationErrorCode=e.CancellationDetails=e.CancellationDetailsBase=e.IntentRecognitionCanceledEventArgs=e.TranslationRecognitionCanceledEventArgs=e.NoMatchDetails=e.NoMatchReason=e.Translations=e.TranslationRecognizer=e.VoiceProfileType=e.IntentRecognizer=e.SpeechRecognizer=e.Recognizer=e.PropertyId=e.PropertyCollection=e.SpeechTranslationConfigImpl=e.SpeechTranslationConfig=e.SpeechConfigImpl=e.SpeechConfig=e.ResultReason=e.TranslationSynthesisResult=e.TranslationRecognitionResult=e.TranslationSynthesisEventArgs=e.TranslationRecognitionEventArgs=e.SpeechRecognitionCanceledEventArgs=e.MeetingTranscriptionEventArgs=e.ConversationTranscriptionEventArgs=e.SpeechRecognitionEventArgs=e.LanguageUnderstandingModel=e.IntentRecognitionResult=e.SpeechRecognitionResult=e.RecognitionResult=e.IntentRecognitionEventArgs=e.OutputFormat=e.RecognitionEventArgs=e.SessionEventArgs=e.KeywordRecognitionModel=e.PushAudioOutputStreamCallback=e.PullAudioInputStreamCallback=e.CancellationReason=e.PushAudioOutputStream=e.PullAudioOutputStream=e.AudioOutputStream=e.PushAudioInputStream=e.PullAudioInputStream=e.AudioInputStream=e.AudioFormatTag=e.AudioStreamFormat=e.AudioConfig=void 0,e.SpeechSynthesisEventArgs=e.SpeechSynthesisResult=e.SynthesisResult=e.SpeechSynthesizer=e.SpeechSynthesisOutputFormat=e.Synthesizer=e.User=e.ParticipantChangedReason=e.Participant=e.MeetingTranscriber=e.Meeting=e.ConversationTranscriptionResult=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.Conversation=e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResultType=e.SpeakerRecognitionResult=e.SourceLanguageConfig=e.AutoDetectSourceLanguageResult=e.AutoDetectSourceLanguageConfig=e.SpeakerVerificationModel=e.SpeakerIdentificationModel=e.SpeakerRecognizer=e.VoiceProfileClient=e.VoiceProfilePhraseResult=e.VoiceProfileCancellationDetails=e.VoiceProfileResult=e.VoiceProfileEnrollmentCancellationDetails=e.VoiceProfileEnrollmentResult=e.VoiceProfile=e.ConnectionMessage=e.ConnectionMessageEventArgs=e.BaseAudioPlayer=e.ProfanityOption=e.ServicePropertyChannel=e.TurnStatusReceivedEventArgs=e.ActivityReceivedEventArgs=e.DialogServiceConnector=e.CustomCommandsConfig=e.BotFrameworkConfig=e.DialogServiceConfig=e.PhraseListGrammar=e.Connection=e.ServiceEventArgs=void 0,e.LogLevel=e.Diagnostics=e.AvatarWebRTCConnectionResult=e.Coordinate=e.AvatarVideoFormat=e.AvatarSynthesizer=e.AvatarEventArgs=e.AvatarConfig=e.LanguageIdMode=e.PronunciationAssessmentResult=e.PronunciationAssessmentConfig=e.PronunciationAssessmentGranularity=e.PronunciationAssessmentGradingSystem=e.MeetingTranscriptionCanceledEventArgs=e.ConversationTranscriptionCanceledEventArgs=e.SpeakerAudioDestination=e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=e.SynthesisVoicesResult=e.SpeechSynthesisBoundaryType=e.SpeechSynthesisVisemeEventArgs=e.SpeechSynthesisBookmarkEventArgs=e.SpeechSynthesisWordBoundaryEventArgs=void 0;var t=tA();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var n=ai;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return n.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return n.AudioFormatTag}});var r=Q1();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return r.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return r.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return r.PushAudioInputStream}});var i=nt;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var o=nA;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return o.CancellationReason}});var a=np;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var s=rp;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return s.PushAudioOutputStreamCallback}});var c=ip;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var l=op;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return l.SessionEventArgs}});var u=TF();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return u.RecognitionEventArgs}});var d=rA;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return d.OutputFormat}});var p=AF();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return p.IntentRecognitionEventArgs}});var h=sp;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var v=IF();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var g=_F();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var y=Bo;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var f=kF();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return f.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return f.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return f.MeetingTranscriptionEventArgs}});var m=xF();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return m.SpeechRecognitionCanceledEventArgs}});var S=OF();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var C=MF();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var R=sA();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return R.TranslationRecognitionResult}});var T=ap;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return T.TranslationSynthesisResult}});var A=aA;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return A.ResultReason}});var E=NF();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return E.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return E.SpeechConfigImpl}});var k=zF();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return k.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return k.SpeechTranslationConfigImpl}});var _=lA();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return _.PropertyCollection}});var N=cp;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return N.PropertyId}});var B=jF();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return B.Recognizer}});var $=LF();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return $.SpeechRecognizer}});var j=FF();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return j.IntentRecognizer}});var L=pA;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return L.VoiceProfileType}});var V=BF();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return V.TranslationRecognizer}});var Y=qF();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return Y.Translations}});var b=gA;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return b.NoMatchReason}});var D=UF();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return D.NoMatchDetails}});var K=lp;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return K.TranslationRecognitionCanceledEventArgs}});var U=VF();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return U.IntentRecognitionCanceledEventArgs}});var G=dl;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return G.CancellationDetailsBase}});var oe=WF();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return oe.CancellationDetails}});var Se=SA;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return Se.CancellationErrorCode}});var Ye=KF();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return Ye.ConnectionEventArgs}});var he=JF();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return he.ServiceEventArgs}});var Xe=fA();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return Xe.Connection}});var jt=up;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return jt.PhraseListGrammar}});var Lt=nm();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return Lt.DialogServiceConfig}});var Ft=GF();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return Ft.BotFrameworkConfig}});var pr=QF();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return pr.CustomCommandsConfig}});var _n=XF();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return _n.DialogServiceConnector}});var dn=dp;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return dn.ActivityReceivedEventArgs}});var Vn=pp;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Vn.TurnStatusReceivedEventArgs}});var hr=CA;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return hr.ServicePropertyChannel}});var Xt=wA;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return Xt.ProfanityOption}});var li=nB();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return li.BaseAudioPlayer}});var q=fp;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return q.ConnectionMessageEventArgs}});var z=hA();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return z.ConnectionMessage}});var J=vp;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return J.VoiceProfile}});var ee=oB();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return ee.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return ee.VoiceProfileEnrollmentCancellationDetails}});var ge=sB();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return ge.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return ge.VoiceProfileCancellationDetails}});var ve=aB();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return ve.VoiceProfilePhraseResult}});var Re=cB();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return Re.VoiceProfileClient}});var We=lB();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return We.SpeakerRecognizer}});var $e=uB();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return $e.SpeakerIdentificationModel}});var pn=dB();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return pn.SpeakerVerificationModel}});var fr=pB();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return fr.AutoDetectSourceLanguageConfig}});var vr=gp;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return vr.AutoDetectSourceLanguageResult}});var vl=mp;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return vl.SourceLanguageConfig}});var is=fB();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return is.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return is.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return is.SpeakerRecognitionCancellationDetails}});var Ze=sm();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return Ze.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return Ze.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return Ze.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return Ze.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return Ze.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return Ze.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return Ze.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return Ze.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return Ze.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return Ze.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return Ze.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return Ze.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return Ze.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return Ze.User}});var gl=am();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return gl.Synthesizer}});var Vp=Xg;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return Vp.SpeechSynthesisOutputFormat}});var os=kB();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return os.SpeechSynthesizer}});var kn=Sp;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return kn.SynthesisResult}});var Hp=OB();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return Hp.SpeechSynthesisResult}});var ne=Cp;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return ne.SpeechSynthesisEventArgs}});var Pe=wp;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Pe.SpeechSynthesisWordBoundaryEventArgs}});var Ce=Rp;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisBookmarkEventArgs}});var Zt=Pp;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Zt.SpeechSynthesisVisemeEventArgs}});var en=kA;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return en.SpeechSynthesisBoundaryType}});var Qi=jB();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return Qi.SynthesisVoicesResult}});var ss=xA;Object.defineProperty(e,"SynthesisVoiceGender",{enumerable:!0,get:function(){return ss.SynthesisVoiceGender}}),Object.defineProperty(e,"SynthesisVoiceType",{enumerable:!0,get:function(){return ss.SynthesisVoiceType}}),Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return ss.VoiceInfo}});var lb=Ep;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return lb.SpeakerAudioDestination}});var ub=qB();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return ub.ConversationTranscriptionCanceledEventArgs}});var db=UB();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return db.MeetingTranscriptionCanceledEventArgs}});var pb=OA;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return pb.PronunciationAssessmentGradingSystem}});var hb=MA;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return hb.PronunciationAssessmentGranularity}});var fb=$B();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return fb.PronunciationAssessmentConfig}});var vb=VB();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return vb.PronunciationAssessmentResult}});var gb=im;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return gb.LanguageIdMode}});var mb=HB();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return mb.AvatarConfig}});var yb=zA;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return yb.AvatarEventArgs}});var Sb=WB();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return Sb.AvatarSynthesizer}});var wm=qo;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return wm.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return wm.Coordinate}});var Cb=GB();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return Cb.AvatarWebRTCConnectionResult}});var wb=QB();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return wb.Diagnostics}});var Rb=Qg;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return Rb.LogLevel}})}(qh)),qh}var uw;function YB(){if(uw)return Es;uw=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.ProxyInfo=void 0;const e=O();let t=class LA{constructor(r,i,o,a){this.privProxyHostName=r,this.privProxyPort=i,this.privProxyUserName=o,this.privProxyPassword=a}static fromParameters(r){return new LA(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),r.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(r){return this.fromParameters(r.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return Es.ProxyInfo=t,Es}var FA={};const XB=new Set(["json","buffer","string"]);var ZB=e=>(...t)=>{const n=new Set;let r,i,o,a="";return t.forEach(s=>{if(typeof s=="string")if(s.toUpperCase()===s)if(r){const c=`Can't set method to ${s}, already set to ${r}.`;throw new Error(c)}else r=s;else if(s.startsWith("http:")||s.startsWith("https:"))a=s;else if(XB.has(s))i=s;else throw new Error(`Unknown encoding, ${s}`);else if(typeof s=="number")n.add(s);else if(typeof s=="object")if(Array.isArray(s)||s instanceof Set)s.forEach(c=>n.add(c));else{if(o)throw new Error("Cannot set headers twice.");o=s}else throw new Error(`Unknown type: ${typeof s}`)}),r||(r="GET"),n.size===0&&n.add(200),e(n,r,i,o,a)};const e4=ZB;class cm extends Error{constructor(t,...n){super(...n),Error.captureStackTrace&&Error.captureStackTrace(this,cm),this.name="StatusError",this.message=t.statusMessage,this.statusCode=t.status,this.res=t,this.json=t.json.bind(t),this.text=t.text.bind(t),this.arrayBuffer=t.arrayBuffer.bind(t);let r;Object.defineProperty(this,"responseBody",{get:()=>(r||(r=this.arrayBuffer()),r)}),this.headers={};for(const[o,a]of t.headers.entries())this.headers[o.toLowerCase()]=a}}const t4=(e,t,n,r,i)=>async(o,a,s={})=>{o=i+(o||"");let c=new URL(o);if(r||(r={}),c.username&&(r.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),r["Content-Type"]="application/json";else throw new Error("Unknown body type.");s=new Headers({...r||{},...s});const l=await fetch(c,{method:t,headers:s,body:a});if(l.statusCode=l.status,!e.has(l.status))throw new cm(l);return n==="json"?l.json():n==="buffer"?l.arrayBuffer():n==="string"?l.text():l};var n4=e4(t4);(function(e){var t=le&&le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const n=t(n4),r=Q();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=e.RestRequestType||(e.RestRequestType={}));class o{constructor(s){if(!s)throw new r.ArgumentNullError("configParams");this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}static extractHeaderValue(s,c){let l="";try{const u=c.trim().split(/[\r\n]+/),d={};u.forEach(p=>{const h=p.split(": "),v=h.shift().toLowerCase(),g=h.join(": ");d[v]=g}),l=d[s.toLowerCase()]}catch{}return l}set options(s){this.privHeaders=s.headers,this.privIgnoreCache=s.ignoreCache}setHeaders(s,c){this.privHeaders[s]=c}request(s,c,l={},u=null){const d=new r.Deferred,p=s===i.File?"POST":s,h=(g,y={})=>{const f=g;return{data:JSON.stringify(y),headers:JSON.stringify(g.headers),json:y,ok:g.statusCode>=200&&g.statusCode<300,status:g.statusCode,statusText:y.error?y.error.message:f.statusText?f.statusText:f.statusMessage}},v=g=>{const y=(0,n.default)(c,p,this.privHeaders,200,201,202,204,400,401,402,403,404),f=this.queryParams(l)===""?"":`?${this.queryParams(l)}`;y(f,g).then(async m=>{if(s===i.Delete||m.statusCode===204)d.resolve(h(m));else try{const S=await m.json();d.resolve(h(m,S))}catch{d.resolve(h(m))}}).catch(m=>{d.reject(m)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),s===i.Post&&u&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),v(u),d.promise}queryParams(s={}){return Object.keys(s).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(s[c])).join("&")}}e.RestMessageAdapter=o})(FA);var hl={};Object.defineProperty(hl,"__esModule",{value:!0});hl.RestConfigBase=void 0;class Kr{static get requestOptions(){return Kr.privDefaultRequestOptions}static get configParams(){return Kr.privDefaultParams}static get restErrors(){return Kr.privRestErrors}}hl.RestConfigBase=Kr;Kr.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};Kr.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};Kr.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var dw;function Qe(){return dw||(dw=1,function(e){var t=le&&le.__createBinding||(Object.create?function(r,i,o,a){a===void 0&&(a=o),Object.defineProperty(r,a,{enumerable:!0,get:function(){return i[o]}})}:function(r,i,o,a){a===void 0&&(a=o),r[a]=i[o]}),n=le&&le.__exportStar||function(r,i){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Xd,e),n(J1,e),n(Z2(),e),n(eF(),e),n(Zd,e),n(ep,e),n(cl,e),n(tp,e),n(YB(),e),n(FA,e),n(hl,e)}(Lh)),Lh}var pw;function r4(){if(pw)return ws;pw=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.IntentConnectionFactory=void 0;const e=Qe(),t=O(),n=In(),r=W(),i=Ge;let o=class extends n.ConnectionFactoryBase{create(s,c,l){let u=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!u){const v=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),g=n.ConnectionFactoryBase.getHostSuffix(v);u=s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".sr.speech"+g)+"/speech/recognition/interactive/cognitiveservices/v1"}const d={format:"simple",language:s.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(s,d,u);const p={};c.token!==void 0&&c.token!==""&&(p[c.headerName]=c.token),p[i.HeaderNames.ConnectionId]=l,s.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,u);const h=s.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(u,d,p,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(s),h,l))}getSpeechRegionFromIntentRegion(s){switch(s){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return s}}};return ws.IntentConnectionFactory=o,ws}var Ri={},hw;function i4(){if(hw)return Ri;hw=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.VoiceProfileConnectionFactory=Ri.SpeakerRecognitionConnectionFactory=void 0;const e=Qe(),t=O(),n=In(),r=W(),i=Ge;class o extends n.ConnectionFactoryBase{create(l,u,d,p){let h=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),m=n.ConnectionFactoryBase.getHostSuffix(f),S=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${f}.spr-frontend.speech${m}`),C=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${S}/speaker/ws/${this.scenarioToPath(C)}/${d}`}const v={format:"simple",language:l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(l,v,h);const g={};u.token!==void 0&&u.token!==""&&(g[u.headerName]=u.token),g[i.HeaderNames.ConnectionId]=p,g[i.HeaderNames.SpIDAuthKey]=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const y=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(h,v,g,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),y,p))}scenarioToPath(l){switch(l){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends o{create(l,u,d){return super.create(l,u,"recognition",d)}};Ri.SpeakerRecognitionConnectionFactory=a;class s extends o{create(l,u,d){return super.create(l,u,"profile",d)}}return Ri.VoiceProfileConnectionFactory=s,Ri}var Tp={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=Q();class n extends t.PlatformEvent{constructor(u,d,p,h=t.EventType.Info){super(u,h),this.privRequestId=d,this.privSessionId=p}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=n;class r extends n{constructor(u,d,p,h){super("RecognitionTriggeredEvent",u,d),this.privAudioSourceId=p,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=r;class i extends n{constructor(u,d,p,h){super("ListeningStartedEvent",u,d),this.privAudioSourceId=p,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=i;class o extends n{constructor(u,d,p){super("ConnectingToServiceEvent",u,p),this.privAuthFetchEventid=d}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=o;class a extends n{constructor(u,d,p,h,v){super("RecognitionStartedEvent",u,v),this.privAudioSourceId=d,this.privAudioNodeId=p,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=a;var s;(function(l){l[l.Success=0]="Success",l[l.AudioSourceError=1]="AudioSourceError",l[l.AudioSourceTimeout=2]="AudioSourceTimeout",l[l.AuthTokenFetchError=3]="AuthTokenFetchError",l[l.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",l[l.UnAuthorized=5]="UnAuthorized",l[l.ConnectTimeout=6]="ConnectTimeout",l[l.ConnectError=7]="ConnectError",l[l.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",l[l.UnknownError=9]="UnknownError"})(s=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class c extends n{constructor(u,d,p,h,v,g,y,f){super("RecognitionEndedEvent",u,v,y===s.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=d,this.privAudioNodeId=p,this.privAuthFetchEventId=h,this.privStatus=y,this.privError=f,this.privServiceTag=g}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=c})(Tp);var Aa={},dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.SpeechConnectionMessage=void 0;const Wh=Q(),Jn=Ge;class lm extends Wh.ConnectionMessage{constructor(t,n,r,i,o,a,s,c){if(!n)throw new Wh.ArgumentNullError("path");if(!r)throw new Wh.ArgumentNullError("requestId");const l={};if(l[Jn.HeaderNames.Path]=n,l[Jn.HeaderNames.RequestId]=r,l[Jn.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(l[Jn.HeaderNames.ContentType]=i),a&&(l[Jn.HeaderNames.RequestStreamId]=a),s)for(const u in s)u&&(l[u]=s[u]);c?super(t,o,l,c):super(t,o,l),this.privPath=n,this.privRequestId=r,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=s}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(t){let n=null,r=null,i=null,o=null;const a={};if(t.headers)for(const s in t.headers)s&&(s.toLowerCase()===Jn.HeaderNames.Path.toLowerCase()?n=t.headers[s]:s.toLowerCase()===Jn.HeaderNames.RequestId.toLowerCase()?r=t.headers[s]:s.toLowerCase()===Jn.HeaderNames.ContentType.toLowerCase()?i=t.headers[s]:s.toLowerCase()===Jn.HeaderNames.RequestStreamId.toLowerCase()?o=t.headers[s]:a[s]=t.headers[s]);return new lm(t.messageType,n,r,i,t.body,o,a,t.id)}}dr.SpeechConnectionMessage=lm;var BA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentationMode=void 0,function(t){t.Normal="Normal",t.Disabled="Disabled",t.Custom="Custom",t.Semantic="Semantic"}(e.SegmentationMode||(e.SegmentationMode={}))})(BA);var qA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Synthesize="Synthesize"}(e.NextAction||(e.NextAction={}))})(qA);var UA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Mode=void 0,function(t){t.None="None",t.Always="Always"}(e.Mode||(e.Mode={}))})(UA);var $A={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdDetectionPriority=e.LanguageIdDetectionMode=void 0,function(t){t.DetectAtAudioStart="DetectAtAudioStart",t.DetectContinuous="DetectContinuous",t.DetectSegments="DetectSegments"}(e.LanguageIdDetectionMode||(e.LanguageIdDetectionMode={})),function(t){t.Auto="Auto",t.PrioritizeLatency="PrioritizeLatency",t.PrioritizeAccuracy="PrioritizeAccuracy"}(e.LanguageIdDetectionPriority||(e.LanguageIdDetectionPriority={}))})($A);var VA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.Recognize="Recognize",t.None="None"}(e.NextAction||(e.NextAction={}))})(VA);var HA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnUnknownAction=void 0,function(t){t.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",t.None="None"}(e.OnUnknownAction||(e.OnUnknownAction={}))})(HA);var WA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultType=void 0,function(t){t.Auto="Auto",t.StableFragment="StableFragment",t.Hypothesis="Hypothesis",t.None="None"}(e.ResultType||(e.ResultType={}))})(WA);var KA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PhraseResultOutputType=void 0,function(t){t.Always="Always",t.None="None"}(e.PhraseResultOutputType||(e.PhraseResultOutputType={}))})(KA);var JA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Translate="Translate"}(e.NextAction||(e.NextAction={}))})(JA);var fw;function o4(){if(fw)return Aa;fw=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.ServiceRecognizerBase=void 0;const e=Qe(),t=Q(),n=O(),r=W(),i=dr,o=BA,a=Yt,s=qA,c=UA,l=$A,u=VA,d=HA,p=WA,h=KA,v=JA;let g=class sc{constructor(f,m,S,C,R){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!f)throw new t.ArgumentNullError("authentication");if(!m)throw new t.ArgumentNullError("connectionFactory");if(!S)throw new t.ArgumentNullError("audioSource");if(!C)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=C.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=f,this.privConnectionFactory=m,this.privAudioSource=S,this.privRecognizerConfig=C,this.privIsDisposed=!1,this.privRecognizer=R,this.privRequestSession=new r.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new r.DynamicGrammarBuilder,this.privSpeechContext=new r.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new r.AgentConfig,this.privRecognizerConfig.parameters.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(A=>{if(A.name==="ConnectionClosedEvent"){const E=A;(E.statusCode===1003||E.statusCode===1007||E.statusCode===1002||E.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(n.CancellationReason.Error,E.statusCode===1007?n.CancellationErrorCode.BadRequestParameters:n.CancellationErrorCode.ConnectionFailure,`${E.reason} websocket error code: ${E.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,t.createNoDashGuid)())}setTranslationJson(){const f=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(f!==void 0){const m=f.split(","),S=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),C=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),R=S!==void 0?s.NextAction.Synthesize:s.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:R},onSuccess:{action:R},output:{includePassThroughResults:!0,interimResults:{mode:c.Mode.Always}},targetLanguages:m},C!==void 0&&(this.privSpeechContext.getContext().translation.category=C),S!==void 0){const A={};for(const E of m)A[E]=S;this.privSpeechContext.getContext().synthesis={defaultVoices:A}}const T=this.privSpeechContext.getContext().phraseDetection||{};T.onSuccess={action:v.NextAction.Translate},T.onInterim={action:v.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=T}}setSpeechSegmentationTimeoutJson(){const f=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),m=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),S=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.Speech_SegmentationStrategy,void 0),C={mode:o.SegmentationMode.Normal};let R=!1;if(S!==void 0){R=!0;let T=o.SegmentationMode.Normal;switch(S.toLowerCase()){case"default":break;case"time":T=o.SegmentationMode.Custom;break;case"semantic":T=o.SegmentationMode.Semantic;break}C.mode=T}if(f!==void 0){R=!0;const T=parseInt(f,10);C.mode=o.SegmentationMode.Custom,C.segmentationSilenceTimeoutMs=T}if(m!==void 0){R=!0;const T=parseInt(m,10);C.mode=o.SegmentationMode.Custom,C.segmentationForcedTimeoutMs=T}if(R){const T=this.privSpeechContext.getContext().phraseDetection||{};switch(T.mode=this.recognitionMode,this.recognitionMode){case a.RecognitionMode.Conversation:T.conversation=T.conversation??{segmentation:{}},T.conversation.segmentation=C;break;case a.RecognitionMode.Interactive:T.interactive=T.interactive??{segmentation:{}},T.interactive.segmentation=C;break;case a.RecognitionMode.Dictation:T.dictation=T.dictation??{},T.dictation.segmentation=C;break}this.privSpeechContext.getContext().phraseDetection=T}}setLanguageIdJson(){const f=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const m=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");m.length===1&&m[0]===r.AutoDetectSourceLanguagesOpenRangeOptionName&&(m[0]="UND");let S;this.privRecognizerConfig.languageIdMode==="Continuous"?S=l.LanguageIdDetectionMode.DetectContinuous:S=l.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:m,mode:S,onSuccess:{action:u.NextAction.Recognize},onUnknown:{action:d.OnUnknownAction.None},priority:l.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.Auto},phraseResults:{resultType:h.PhraseResultOutputType.Always}};const C=this.privRecognizerConfig.sourceLanguageModels;C!==void 0&&(f.customModels=C,f.onInterim={action:v.NextAction.None},f.onSuccess={action:v.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=f}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(r.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()===n.OutputFormat[n.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(f){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.ConversationTranslator_Token,f)}set voiceProfileType(f){this.privRecognizerConfig.parameters.setProperty(n.PropertyId.SpeechServiceConnection_SpeakerIdMode,f)}set authentication(f){this.privAuthentication=f}isDisposed(){return this.privIsDisposed}async dispose(f){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(f)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(f,m,S){if(this.recognizeOverride!==void 0){await this.recognizeOverride(f,m,S);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=f,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const E=this.privSpeechContext.getContext().phraseDetection||{};E.mode=f,this.privSpeechContext.getContext().phraseDetection=E}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.privSuccessCallback=m,this.privErrorCallback=S,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const C=this.connectImpl();let R;try{const E=await this.audioSource.attach(this.privRequestSession.audioNodeId),k=await this.audioSource.format,_=await this.audioSource.deviceInfo;this.privIsLiveAudio=_.type&&_.type===r.type.Microphones,R=new e.ReplayableAudioNode(E,k.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(R,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:_}}catch(E){throw await this.privRequestSession.onStopRecognizing(),E}try{await C}catch(E){await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,E);return}const T=new n.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,T),this.receiveMessage(),this.sendAudio(R).catch(async E=>{await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,E)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(f,m){this.connectImpl().then(()=>{try{f&&f()}catch(S){m&&m(S)}},S=>{try{m&&m(S)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(n.CancellationReason.Error,n.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(f){}async sendNetworkMessage(f,m){const S=typeof m=="string"?t.MessageType.Text:t.MessageType.Binary,C=typeof m=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(S,f,this.privRequestSession.requestId,C,m))}set activityTemplate(f){this.privActivityTemplate=f}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(f){this.privExpectContentAssessmentResponse=f}async sendTelemetryData(){const f=this.privRequestSession.getTelemetry();if(sc.telemetryDataEnabled!==!0||this.privIsDisposed||f===null)return;if(sc.telemetryData)try{sc.telemetryData(f)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",f))}async cancelRecognitionLocal(f,m,S){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,f,m,S))}async receiveMessage(){try{if(this.privIsDisposed)return;let f=await this.fetchConnection();const m=await f.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!m)return this.receiveMessage();this.privServiceHasSentMessage=!0;const S=i.SpeechConnectionMessage.fromConnectionMessage(m);if(S.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(S.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const C=r.SpeechDetected.fromJSON(S.textBody,this.privRequestSession.currentTurnAudioOffset),R=new n.RecognitionEventArgs(C.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,R);break;case"speech.enddetected":let T;S.textBody.length>0?T=S.textBody:T="{ Offset: 0 }";const A=r.SpeechDetected.fromJSON(T,this.privRequestSession.currentTurnAudioOffset),E=new n.RecognitionEventArgs(A.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,E);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(n.CancellationReason.EndOfStream,n.CancellationErrorCode.NoError,void 0));const k=new n.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,k);return}else f=await this.fetchConnection(),await this.sendPrePayloadJSON(f);break;default:await this.processTypeSpecificMessages(S)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(S.path.toLowerCase(),S.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const f=this.privRequestSession.recognitionBytesSent,m=this.privAverageBytesPerMs!==0?f/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(m)}sendSpeechContext(f,m){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const S=this.speechContext.toJSON();if(m&&this.privRequestSession.onSpeechContext(),S)return f.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",S))}setupTranslationWithLanguageId(){const f=this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),m=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(f!==void 0&&m){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:p.ResultType.None},phraseResults:{resultType:h.PhraseResultOutputType.None}};const S=this.privSpeechContext.getContext().translation;if(S){const C=this.privRecognizerConfig.sourceLanguageModels;if(C!==void 0&&C.length>0){const T=this.privSpeechContext.getContext().phraseDetection||{};T.customModels=C,this.privSpeechContext.getContext().phraseDetection=T}this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(S.onSuccess={action:s.NextAction.Synthesize},S.onPassthrough={action:s.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(f,m=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(f);await this.sendSpeechContext(f,m),await this.sendWaveHeader(f)}async sendWaveHeader(f){const m=await this.audioSource.format;return f.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",m.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(f=>f.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(f,m,S){if(m.onSpeechContext(),sc.telemetryDataEnabled!==!0){const R={context:{system:JSON.parse(S).context.system}};S=JSON.stringify(R)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const C=JSON.parse(S);C.context.DisableReferenceChannel="True",C.context.MicSpec="1_0_0",S=JSON.stringify(C)}if(S)return f.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",m.requestId,"application/json",S))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(f=>f.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(f){const m=await this.audioSource.format;this.privAverageBytesPerMs=m.avgBytesPerSec/1e3;let S=Date.now();const C=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),R=m.avgBytesPerSec/1e3*parseInt(C,10),T=this.privRequestSession.recogNumber,A=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===T){const E=await this.fetchConnection(),k=await f.read();if(this.privRequestSession.isSpeechEnded)return;let _,N;if(!k||k.isEnd?(_=null,N=0):(_=k.buffer,this.privRequestSession.onAudioSent(_.byteLength),R>=this.privRequestSession.bytesSent?N=0:N=Math.max(0,S-Date.now())),N!==0&&await this.delay(N),_!==null&&(S=Date.now()+_.byteLength*1e3/(m.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===T)if(E.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,_)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),k!=null&&k.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return A()}};return A()}async retryableConnect(){let f=!1;this.privAuthFetchEventId=(0,t.createNoDashGuid)();const m=this.privRequestSession.sessionId;this.privConnectionId=m!==void 0?m:(0,t.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let S=0,C="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const T=await(f?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const A=await this.privConnectionFactory.create(this.privRecognizerConfig,T,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(A.events),A.events.attach(k=>{this.connectionEvents.onEvent(k)});const E=await A.open();if(E.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(E.statusCode),Promise.resolve(A);E.statusCode===1006&&(f=!0),S=E.statusCode,C=E.reason}return await this.privRequestSession.onConnectionEstablishCompleted(S,C),Promise.reject(`Unable to contact server. StatusCode: ${S}, ${this.privRecognizerConfig.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${C}`)}delay(f){return new Promise(m=>this.privSetTimeout(m,f))}writeBufferToConsole(f){let m="Buffer Size: ";if(f===null)m+="null";else{const S=new Uint8Array(f);m+=`${f.byteLength}\r
`;for(let C=0;C<f.byteLength;C++)m+=S[C].toString(16).padStart(2,"0")+" ",(C+1)%16===0&&(console.info(m),m="")}console.info(m)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const f=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(f):(await this.sendSpeechServiceConfig(f,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(f,!1),f)}};return Aa.ServiceRecognizerBase=g,g.telemetryDataEnabled=!0,Aa}var ba={},vw;function s4(){if(vw)return ba;vw=1,Object.defineProperty(ba,"__esModule",{value:!0}),ba.ConversationServiceRecognizer=void 0;const e=O(),t=W();let n=class extends t.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.handleSpeechPhraseMessage=async l=>this.handleSpeechPhrase(l),this.handleSpeechHypothesisMessage=l=>this.handleSpeechHypothesis(l)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,o,a){}handleRecognizingCallback(i,o,a){}async processSpeechMessages(i){let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),o=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),o=!0;break}return o}cancelRecognition(i,o,a,s,c){}async handleSpeechPhrase(i){const o=t.SimpleSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=t.EnumTranslation.implTranslateRecognitionResult(o.RecognitionStatus);let s;const c=new e.PropertyCollection;if(c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i),this.privRequestSession.onPhraseRecognized(o.Offset+o.Duration),e.ResultReason.Canceled===a){const l=t.EnumTranslation.implTranslateCancelResult(o.RecognitionStatus),u=t.EnumTranslation.implTranslateCancelErrorCode(o.RecognitionStatus);await this.cancelRecognitionLocal(l,u,t.EnumTranslation.implTranslateErrorDetails(u))}else if(o.RecognitionStatus!==t.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,o.DisplayText,o.Duration,o.Offset,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,o.asJson(),c);else{const l=t.DetailedSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset);s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,l.Text,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,l.asJson(),c)}this.handleRecognizedCallback(s,s.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const o=t.SpeechHypothesis.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,o.Text,o.Duration,o.Offset,o.Language,o.LanguageDetectionConfidence,o.SpeakerId,void 0,o.asJson(),a);this.privRequestSession.onHypothesis(o.Offset),this.handleRecognizingCallback(s,o.Duration,this.privRequestSession.sessionId)}};return ba.ConversationServiceRecognizer=n,ba}var Kh={},gw;function a4(){return gw||(gw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=void 0;const t=O(),n=W(),r=Yt;(function(o){o[o.Simple=0]="Simple",o[o.Detailed=1]="Detailed"})(e.SpeechResultFormat||(e.SpeechResultFormat={}));class i{constructor(a,s){this.privSpeechServiceConfig=a||new n.SpeechServiceConfig(new n.Context(null)),this.privParameters=s,this.privMaxRetryCount=parseInt(s.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=s.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===r.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r.RecognitionMode[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==r.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(a){this.parameters.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,a)}get sourceLanguageModels(){const a=[];let s=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const l=c+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),u=this.parameters.getProperty(l,void 0);u!==void 0?(a.push({language:c,endpoint:u}),s=!0):a.push({language:c,endpoint:""})}return s?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}e.RecognizerConfig=i}(Kh)),Kh}var GA={};Object.defineProperty(GA,"__esModule",{value:!0});var Ap={};Object.defineProperty(Ap,"__esModule",{value:!0});Ap.WebsocketMessageFormatter=void 0;const tn=Q(),mw=`\r
`;class c4{toConnectionMessage(t){const n=new tn.Deferred;try{if(t.messageType===tn.MessageType.Text){const r=t.textContent;let i={},o=null;if(r){const a=r.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(o=a[1]))}n.resolve(new tn.ConnectionMessage(t.messageType,o,i,t.id))}else if(t.messageType===tn.MessageType.Binary){const r=t.binaryContent;let i={},o=null;if(!r||r.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(r),s=a.getInt16(0);if(r.byteLength<s+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let l=0;l<s;l++)c+=String.fromCharCode(a.getInt8(l+2));i=this.parseHeaders(c),r.byteLength>s+2&&(o=r.slice(2+s)),n.resolve(new tn.ConnectionMessage(t.messageType,o,i,t.id))}}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new tn.Deferred;try{if(t.messageType===tn.MessageType.Text){const r=`${this.makeHeaders(t)}${mw}${t.textBody?t.textBody:""}`;n.resolve(new tn.RawWebsocketMessage(tn.MessageType.Text,r,t.id))}else if(t.messageType===tn.MessageType.Binary){const r=this.makeHeaders(t),i=t.binaryBody,o=this.stringToArrayBuffer(r),a=new Int8Array(o),s=a.byteLength,c=new Int8Array(2+s+(i?i.byteLength:0));if(c[0]=s>>8&255,c[1]=s&255,c.set(a,2),i){const u=new Int8Array(i);c.set(u,2+s)}const l=c.buffer;n.resolve(new tn.RawWebsocketMessage(tn.MessageType.Binary,l,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}makeHeaders(t){let n="";if(t.headers)for(const r in t.headers)r&&(n+=`${r}: ${t.headers[r]}${mw}`);return n}parseHeaders(t){const n={};if(t){const r=t.match(/[^\r\n]+/g);if(n){for(const i of r)if(i){const o=i.indexOf(":"),a=o>0?i.substr(0,o).trim().toLowerCase():i,s=o>0&&i.length>o+1?i.substr(o+1).trim():"";n[a]=s}}}return n}stringToArrayBuffer(t){const n=new ArrayBuffer(t.length),r=new DataView(n);for(let i=0;i<t.length;i++)r.setUint8(i,t.charCodeAt(i));return n}}Ap.WebsocketMessageFormatter=c4;var Ia={},yw;function l4(){if(yw)return Ia;yw=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.SpeechConnectionFactory=void 0;const e=Qe(),t=W(),n=O(),r=In(),i=W(),o=Ge,a=bn,s=Yt;let c=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(u,d,p){let h=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);const v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,void 0),g=r.ConnectionFactoryBase.getHostSuffix(v),y=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://"+v+".stt.speech"+g),f={},m=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_EndpointId,void 0),S=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(m?(!h||h.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(f[a.QueryParameterNames.CustomSpeechDeploymentId]=m):S&&(!h||h.search(a.QueryParameterNames.Language)===-1)&&(f[a.QueryParameterNames.Language]=S),(!h||h.search(a.QueryParameterNames.Format)===-1)&&(f[a.QueryParameterNames.Format]=u.parameters.getProperty(t.OutputFormatPropertyName,n.OutputFormat[n.OutputFormat.Simple]).toLowerCase()),u.autoDetectSourceLanguages!==void 0&&(f[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(u,f,h),h){const E=new URL(h),k=E.pathname;(k===""||k==="/")&&(E.pathname=this.universalUri+u.recognitionEndpointVersion,h=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(E.toString()))}if(!h)switch(u.recognitionMode){case s.RecognitionMode.Conversation:u.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?h=y+this.dictationRelativeUri:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?h=`${y}${this.universalUri}${u.recognitionEndpointVersion}`:h=y+this.conversationRelativeUri;break;case s.RecognitionMode.Dictation:h=y+this.dictationRelativeUri;break;default:u.recognitionEndpointVersion!==void 0&&parseInt(u.recognitionEndpointVersion,10)>1?h=`${y}${this.universalUri}${u.recognitionEndpointVersion}`:h=y+this.interactiveRelativeUri;break}const C={};d.token!==void 0&&d.token!==""&&(C[d.headerName]=d.token),C[o.HeaderNames.ConnectionId]=p,C.connectionId=p;const R=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",T=new e.WebsocketConnection(h,f,C,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),R,p),A=T.uri;return u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,A),T}};return Ia.SpeechConnectionFactory=c,Ia}var _a={},Sw;function u4(){if(Sw)return _a;Sw=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.ConversationTranscriberConnectionFactory=void 0;const e=Qe(),t=O(),n=W(),r=In(),i=W(),o=Ge,a=bn;let s=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2"}async create(l,u,d){let p=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),v=r.ConnectionFactoryBase.getHostSuffix(h),g=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+v),y={},f=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?(!p||p.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(y[a.QueryParameterNames.CustomSpeechDeploymentId]=f):m&&(!p||p.search(a.QueryParameterNames.Language)===-1)&&(y[a.QueryParameterNames.Language]=m),l.autoDetectSourceLanguages!==void 0&&(y[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(l,y,p),p){const A=new URL(p),E=A.pathname;(E===""||E==="/")&&(A.pathname=this.universalUri,p=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(A.toString()))}p||(p=`${g}${this.universalUri}`);const S={};u.token!==void 0&&u.token!==""&&(S[u.headerName]=u.token),S[o.HeaderNames.ConnectionId]=d;const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",R=new e.WebsocketConnection(p,y,S,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),C,d),T=R.uri;return l.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,T),R}setV2UrlParams(l,u,d){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((v,g)=>{this.setUrlParameter(g,v,l,u,d)});const h=JSON.parse(l.parameters.getProperty(n.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(v=>{u[v]=h[v]})}};return _a.ConversationTranscriberConnectionFactory=s,_a}var ka={},Cw;function d4(){if(Cw)return ka;Cw=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.TranscriberConnectionFactory=void 0;const e=Qe(),t=O(),n=In(),r=W(),i=Ge,o=bn;let a=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,l,u){let d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),h=n.ConnectionFactoryBase.getHostSuffix(p),v="wss://transcribe."+p+".cts.speech"+h+this.multiaudioRelativeUri,g=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,v),y={};this.setQueryParams(y,c,d),d||(d=g);const f={};l.token!==void 0&&l.token!==""&&(f[l.headerName]=l.token),f[i.HeaderNames.ConnectionId]=u,c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,d);const m=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(d,y,f,new r.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),m,u))}setQueryParams(c,l,u){const d=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),p=l.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);d&&!(o.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[o.QueryParameterNames.CustomSpeechDeploymentId]=d),p&&!(o.QueryParameterNames.Language in c)&&(c[o.QueryParameterNames.Language]=p);const h=l.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",v=l.parameters.getProperty(r.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(h||v)&&(c[o.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(l,c,u)}};return ka.TranscriberConnectionFactory=a,ka}var xa={},ww;function p4(){if(ww)return xa;ww=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.TranslationConnectionFactory=void 0;const e=Qe(),t=pl,n=O(),r=In(),i=W(),o=Ge,a=bn,s=Yt;let c=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(u,d,p){let h=this.getEndpointUrl(u);const v={};if(this.setQueryParams(v,u,h),h){const m=new URL(h),S=m.pathname;(S===""||S==="/")&&(m.pathname=this.universalUri,h=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(m.toString()))}const g={};d.token!==void 0&&d.token!==""&&(g[d.headerName]=d.token),g[o.HeaderNames.ConnectionId]=p,u.parameters.setProperty(n.PropertyId.SpeechServiceConnection_Url,h);const y=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,v,g,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),y,p)}getEndpointUrl(u,d){const p=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region),h=r.ConnectionFactoryBase.getHostSuffix(p);let v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint,void 0);return v?d===!0?v:t.StringUtils.formatString(v,{region:p}):(u.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+h)+this.translationV1Uri:v=u.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+h)+this.universalUri,d===!0?v:t.StringUtils.formatString(v,{region:p}))}setQueryParams(u,d,p){u.from=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage),u.to=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationToLanguages),u.scenario=d.recognitionMode===s.RecognitionMode.Interactive?"interactive":d.recognitionMode===s.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(d,u,p),this.setUrlParameter(n.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,d,u,p);const h=d.parameters.getProperty(n.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);h!==void 0&&(u.voice=h,u.features="requireVoice")}};return xa.TranslationConnectionFactory=c,xa}var Oa={},Rw;function h4(){if(Rw)return Oa;Rw=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.EnumTranslation=void 0;const e=O(),t=W();let n=class{static implTranslateRecognitionResult(i,o=!1){let a=e.ResultReason.Canceled;switch(i){case t.RecognitionStatus.Success:a=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:a=o?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:a=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:a=e.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let o=e.CancellationReason.EndOfStream;switch(i){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:o=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:o=e.CancellationReason.Error;break}return o}static implTranslateCancelErrorCode(i){let o=e.CancellationErrorCode.NoError;switch(i){case t.RecognitionStatus.Error:o=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:o=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:o=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:o=e.CancellationErrorCode.Forbidden;break;default:o=e.CancellationErrorCode.NoError;break}return o}static implTranslateErrorDetails(i){let o="The speech service encountered an internal error and could not continue.";switch(i){case e.CancellationErrorCode.Forbidden:o="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:o="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:o="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return o}};return Oa.EnumTranslation=n,Oa}var QA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))})(QA);var Ma={},Pw;function f4(){if(Pw)return Ma;Pw=1,Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.TranslationSynthesisEnd=void 0;const e=W();let t=class YA{constructor(r){this.privSynthesisEnd=JSON.parse(r),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(r){return new YA(r)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Ma.TranslationSynthesisEnd=t,Ma}var bp={};Object.defineProperty(bp,"__esModule",{value:!0});bp.TranslationHypothesis=void 0;const v4=Z,Ew=Gd;class Vu{constructor(t,n){this.privTranslationHypothesis=t,this.privTranslationHypothesis.Offset+=n,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(t,n){return new Vu(JSON.parse(t),n)}static fromTranslationResponse(t,n){v4.Contracts.throwIfNullOrUndefined(t,"translationHypothesis");const r=t.SpeechHypothesis;return t.SpeechHypothesis=void 0,r.Translation=t,new Vu(r,n)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){var t;return(t=this.privTranslationHypothesis.PrimaryLanguage)==null?void 0:t.Language}asJson(){const t={...this.privTranslationHypothesis};return t.Translation!==void 0?JSON.stringify({...t,TranslationStatus:Ew.TranslationStatus[t.Translation.TranslationStatus]}):JSON.stringify(t)}mapTranslationStatus(t){if(typeof t=="string")return Ew.TranslationStatus[t];if(typeof t=="number")return t}}bp.TranslationHypothesis=Vu;var Da={},Tw;function g4(){if(Tw)return Da;Tw=1,Object.defineProperty(Da,"__esModule",{value:!0}),Da.TranslationPhrase=void 0;const e=Z,t=W(),n=Gd;let r=class Rv{constructor(o,a){this.privTranslationPhrase=o,this.privTranslationPhrase.Offset+=a,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(o,a){return new Rv(JSON.parse(o),a)}static fromTranslationResponse(o,a){e.Contracts.throwIfNullOrUndefined(o,"translationResponse");const s=o.SpeechPhrase;return o.SpeechPhrase=void 0,s.Translation=o,s.Text=s.DisplayText,new Rv(s,a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Language}get Confidence(){var o;return(o=this.privTranslationPhrase.PrimaryLanguage)==null?void 0:o.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const o={...this.privTranslationPhrase},a={...o,RecognitionStatus:t.RecognitionStatus[o.RecognitionStatus]};return o.Translation&&(a.Translation={...o.Translation,TranslationStatus:n.TranslationStatus[o.Translation.TranslationStatus]}),JSON.stringify(a)}mapRecognitionStatus(o){if(typeof o=="string")return t.RecognitionStatus[o];if(typeof o=="number")return o}mapTranslationStatus(o){if(typeof o=="string")return n.TranslationStatus[o];if(typeof o=="number")return o}};return Da.TranslationPhrase=r,Da}var Na={},Aw;function m4(){if(Aw)return Na;Aw=1,Object.defineProperty(Na,"__esModule",{value:!0}),Na.TranslationServiceRecognizer=void 0;const e=Q(),t=O(),n=W();let r=class extends n.ConversationServiceRecognizer{constructor(o,a,s,c,l){super(o,a,s,c,l),this.privTranslationRecognizer=l,this.connectionEvents.attach(u=>{u.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(o){const a=new t.PropertyCollection;let s=await this.processSpeechMessages(o);if(s)return!0;const c=async u=>{if(a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson()),this.privRequestSession.onPhraseRecognized(u.Offset+u.Duration),u.RecognitionStatus===n.RecognitionStatus.Success){const d=this.fireEventForResult(u,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,d)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(d.result)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const d=n.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus),p=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,d,u.Text,u.Duration,u.Offset,u.Language,u.Confidence,void 0,u.asJson(),a);if(d===t.ResultReason.Canceled){const h=n.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),v=n.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(h,v,n.EnumTranslation.implTranslateErrorDetails(v))}else if(u.RecognitionStatus!==n.RecognitionStatus.EndOfDictation){const h=new t.TranslationRecognitionEventArgs(p,p.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p)}catch(v){this.privErrorCallback&&this.privErrorCallback(v)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0}},l=u=>{a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,u.asJson());const d=this.fireEventForResult(u,a);if(this.privRequestSession.onHypothesis(d.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,d)}catch{}s=!0};switch(o.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"translation.hypothesis":l(n.TranslationHypothesis.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const u=JSON.parse(o.textBody);if(u.SpeechPhrase)await c(n.TranslationPhrase.fromTranslationResponse(u,this.privRequestSession.currentTurnAudioOffset));else{const p=JSON.parse(o.textBody);p.SpeechHypothesis&&l(n.TranslationHypothesis.fromTranslationResponse(p,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await c(n.TranslationPhrase.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(o.binaryBody,this.privRequestSession.sessionId),s=!0;break;case"audio.end":case"translation.synthesis.end":const d=n.TranslationSynthesisEnd.fromJSON(o.textBody);switch(d.SynthesisStatus){case n.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const p=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),h=new t.TranslationSynthesisEventArgs(p,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const p=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,d.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}break;case n.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}s=!0;break}return s}cancelRecognition(o,a,s,c,l){const u=new t.PropertyCollection;if(u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const d=new t.TranslationRecognitionCanceledEventArgs(o,s,l,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new t.TranslationRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,u);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(o,a,s){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(o,a,s){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(o),a,s);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(o,a){let s;if(o.Translation.Translations!==void 0){s=new t.Translations;for(const h of o.Translation.Translations)s.set(h.Language,h.Text||h.DisplayText)}let c,l;o instanceof n.TranslationPhrase?(o.Translation&&o.Translation.TranslationStatus===e.TranslationStatus.Success?c=t.ResultReason.TranslatedSpeech:c=t.ResultReason.RecognizedSpeech,l=o.Confidence):c=t.ResultReason.TranslatingSpeech;const u=o.Language,d=new t.TranslationRecognitionResult(s,this.privRequestSession.requestId,c,o.Text,o.Duration,o.Offset,u,l,o.Translation.FailureReason,o.asJson(),a);return new t.TranslationRecognitionEventArgs(d,o.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(o,a){const s=o===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,c=new t.TranslationSynthesisResult(s,o),l=new t.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,l)}catch{}}};return Na.TranslationServiceRecognizer=r,Na}var Ip={};Object.defineProperty(Ip,"__esModule",{value:!0});Ip.SpeechDetected=void 0;class um{constructor(t,n){this.privSpeechStartDetected=JSON.parse(t),this.privSpeechStartDetected.Offset+=n}static fromJSON(t,n){return new um(t,n)}get Offset(){return this.privSpeechStartDetected.Offset}}Ip.SpeechDetected=um;var _p={};Object.defineProperty(_p,"__esModule",{value:!0});_p.SpeechHypothesis=void 0;class dm{constructor(t,n){this.privSpeechHypothesis=JSON.parse(t),this.updateOffset(n)}static fromJSON(t,n){return new dm(t,n)}updateOffset(t){this.privSpeechHypothesis.Offset+=t}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}_p.SpeechHypothesis=dm;var kp={};Object.defineProperty(kp,"__esModule",{value:!0});kp.SpeechKeyword=void 0;class pm{constructor(t,n){this.privSpeechKeyword=JSON.parse(t),this.privSpeechKeyword.Offset+=n}static fromJSON(t,n){return new pm(t,n)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}}kp.SpeechKeyword=pm;var za={},bw;function y4(){if(bw)return za;bw=1,Object.defineProperty(za,"__esModule",{value:!0}),za.SpeechServiceRecognizer=void 0;const e=O(),t=W();let n=class extends t.ServiceRecognizerBase{constructor(i,o,a,s,c){super(i,o,a,s,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let o;const a=new e.PropertyCollection;let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,c.asJson()),o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,c.asJson(),a),this.privRequestSession.onHypothesis(c.Offset);const l=new e.SpeechRecognitionEventArgs(o,c.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,l)}catch{}s=!0;break;case"speech.phrase":const u=t.SimpleSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,u.asJson());const d=t.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(u.Offset+u.Duration),e.ResultReason.Canceled===d){const p=t.EnumTranslation.implTranslateCancelResult(u.RecognitionStatus),h=t.EnumTranslation.implTranslateCancelErrorCode(u.RecognitionStatus);await this.cancelRecognitionLocal(p,h,t.EnumTranslation.implTranslateErrorDetails(h))}else{if(u.RecognitionStatus===t.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,u.DisplayText,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,void 0,void 0,u.asJson(),a);else{const h=t.DetailedSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson()),o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,d,h.RecognitionStatus===t.RecognitionStatus.Success?h.NBest[0].Display:"",h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),a)}const p=new e.SpeechRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}s=!0;break}return s}cancelRecognition(i,o,a,s,c){const l=new e.PropertyCollection;if(l.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[s]),this.privSpeechRecognizer.canceled){const u=new e.SpeechRecognitionCanceledEventArgs(a,c,s,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,u)}catch{}}if(this.privSuccessCallback){const u=new e.SpeechRecognitionResult(o,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,l);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0}catch{}}}};return za.SpeechServiceRecognizer=n,za}var ja={},XA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityProvider=e.SpeakerDiarizationMode=void 0,function(t){t.None="None",t.Identity="Identity",t.Anonymous="Anonymous"}(e.SpeakerDiarizationMode||(e.SpeakerDiarizationMode={})),function(t){t.CallCenter="CallCenter"}(e.IdentityProvider||(e.IdentityProvider={}))})(XA);var Iw;function S4(){if(Iw)return ja;Iw=1,Object.defineProperty(ja,"__esModule",{value:!0}),ja.ConversationTranscriptionServiceRecognizer=void 0;const e=O(),t=W(),n=XA,r=Yt;let i=class extends t.ServiceRecognizerBase{constructor(a,s,c,l,u){super(a,s,c,l,u),this.privConversationTranscriber=u,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const a=this.privSpeechContext.getContext().phraseDetection||{};a.mode=r.RecognitionMode.Conversation;const s={};s.mode=n.SpeakerDiarizationMode.Anonymous,s.audioSessionId=this.privDiarizationSessionId,s.audioOffsetMs=0,s.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",a.speakerDiarization=s,this.privSpeechContext.getContext().phraseDetection=a}}async processTypeSpecificMessages(a){let s;const c=new e.PropertyCollection;c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.textBody);let l=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const u=t.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,u.SpeakerId,void 0,u.asJson(),c),this.privRequestSession.onHypothesis(u.Offset);const d=new e.ConversationTranscriptionEventArgs(s,u.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,d)}catch{}l=!0;break;case"speech.phrase":const p=t.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),h=t.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(p.Offset+p.Duration),e.ResultReason.Canceled===h){const v=t.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),g=t.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus);await this.cancelRecognitionLocal(v,g,t.EnumTranslation.implTranslateErrorDetails(g))}else if(!(this.privRequestSession.isSpeechEnded&&h===e.ResultReason.NoMatch&&p.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,p.DisplayText,p.Duration,p.Offset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,p.asJson(),c);else{const g=t.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);s=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,g.RecognitionStatus===t.RecognitionStatus.Success?g.NBest[0].Display:void 0,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,p.SpeakerId,void 0,g.asJson(),c)}const v=new e.ConversationTranscriptionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,v)}catch{}}l=!0;break}return l}cancelRecognition(a,s,c,l,u){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[l]),this.privConversationTranscriber.canceled){const p=new e.ConversationTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,p)}catch{}}}};return ja.ConversationTranscriptionServiceRecognizer=i,ja}var La={},_w;function C4(){if(_w)return La;_w=1,Object.defineProperty(La,"__esModule",{value:!0}),La.TranscriptionServiceRecognizer=void 0;const e=Q(),t=O(),n=W(),r=dr;let i=class extends n.ConversationServiceRecognizer{constructor(a,s,c,l,u){super(a,s,c,l,u),this.privTranscriberRecognizer=u,this.sendPrePayloadJSONOverride=d=>this.sendTranscriptionStartJSON(d),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,s))}}async sendMeetingSpeechEventAsync(a,s){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,s))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,s,c){try{const l=new t.SpeechRecognitionEventArgs(a,s,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,l),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(u){this.privErrorCallback&&this.privErrorCallback(u)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,s,c){try{const l=new t.SpeechRecognitionEventArgs(a,s,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,l)}catch{}}cancelRecognition(a,s,c,l,u){const d=new t.PropertyCollection;if(d.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[l]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const p=new t.MeetingTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,p)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const p=new t.ConversationTranscriptionCanceledEventArgs(c,u,l,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.SpeechRecognitionResult(s,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,u,void 0,d);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const s=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}else{const s=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(s,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,s){const c=JSON.stringify(s);if(c)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,s){const c={id:"meeting",name:s,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return La.TranscriptionServiceRecognizer=i,La}var Fa={},kw;function w4(){if(kw)return Fa;kw=1,Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.DetailedSpeechPhrase=void 0;const e=W();let t=class ZA{constructor(r,i){this.privDetailedSpeechPhrase=JSON.parse(r),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(i)}static fromJSON(r,i){return new ZA(r,i)}updateOffsets(r){if(this.privDetailedSpeechPhrase.Offset+=r,this.privDetailedSpeechPhrase.NBest)for(const i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(const o of i.Words)o.Offset+=r;if(i.DisplayWords)for(const o of i.DisplayWords)o.Offset+=r}}asJson(){const r={...this.privDetailedSpeechPhrase};return JSON.stringify({...r,RecognitionStatus:e.RecognitionStatus[r.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(r){if(typeof r=="string")return e.RecognitionStatus[r];if(typeof r=="number")return r}};return Fa.DetailedSpeechPhrase=t,Fa}var Ba={},xw;function R4(){if(xw)return Ba;xw=1,Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.SimpleSpeechPhrase=void 0;const e=W();let t=class eb{constructor(r,i=0){this.privSimpleSpeechPhrase=JSON.parse(r),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(i)}static fromJSON(r,i){return new eb(r,i)}updateOffset(r){this.privSimpleSpeechPhrase.Offset+=r}asJson(){const r={...this.privSimpleSpeechPhrase};return JSON.stringify({...r,RecognitionStatus:e.RecognitionStatus[r.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(r){if(typeof r=="string")return e.RecognitionStatus[r];if(typeof r=="number")return r}};return Ba.SimpleSpeechPhrase=t,Ba}var xp={};Object.defineProperty(xp,"__esModule",{value:!0});xp.AddedLmIntent=void 0;class P4{constructor(t,n){this.modelImpl=t,this.intentName=n}}xp.AddedLmIntent=P4;var qa={},Ow;function E4(){if(Ow)return qa;Ow=1,Object.defineProperty(qa,"__esModule",{value:!0}),qa.IntentServiceRecognizer=void 0;const e=Q(),t=O(),n=W();let r=class extends n.ServiceRecognizerBase{constructor(o,a,s,c,l){super(o,a,s,c,l),this.privIntentRecognizer=l,this.privIntentDataSent=!1,c.recognitionEndpointVersion="1"}setIntents(o,a){this.privAddedLmIntents=o,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(o){let a,s,c=!1;const l=new t.PropertyCollection;switch(o.messageType===e.MessageType.Text&&l.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speech.hypothesis":const d=n.SpeechHypothesis.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset);if(a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,d.Text,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,void 0,d.asJson(),l),this.privRequestSession.onHypothesis(a.offset),s=new t.IntentRecognitionEventArgs(a,d.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,s)}catch{}c=!0;break;case"speech.phrase":const p=n.SimpleSpeechPhrase.fromJSON(o.textBody,this.privRequestSession.currentTurnAudioOffset);a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,n.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),p.DisplayText,p.Duration,p.Offset,p.Language,p.LanguageDetectionConfidence,void 0,p.asJson(),l),s=new t.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===s.result.reason?(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),h()):this.privPendingIntentArgs=s,c=!0;break;case"response":if(s=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,s===void 0){if(o.textBody==="")return;s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const v=n.IntentResponse.fromJSON(o.textBody);if(v!==null&&v.topScoringIntent&&v.topScoringIntent.intent){let g=this.privAddedLmIntents[v.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(g=this.privUmbrellaIntent),g){const y=g===void 0||g.intentName===void 0?v.topScoringIntent.intent:g.intentName;let f=s.result.reason;y!==void 0&&(f=t.ResultReason.RecognizedIntent);const m=s.result.properties!==void 0?s.result.properties:new t.PropertyCollection;m.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,o.textBody),s=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(y,s.result.resultId,f,s.result.text,s.result.duration,s.result.offset,void 0,void 0,s.result.errorDetails,s.result.json,m),s.offset,s.sessionId)}}if(this.privRequestSession.onPhraseRecognized(s.offset+s.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s.result)}catch(g){this.privErrorCallback&&this.privErrorCallback(g)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const u=new e.Deferred;return u.resolve(c),u.promise}cancelRecognition(o,a,s,c,l){const u=new t.PropertyCollection;if(u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const d=new t.IntentRecognitionCanceledEventArgs(s,l,c,void 0,void 0,o);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new t.IntentRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,l,void 0,u);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}};return qa.IntentServiceRecognizer=r,qa}var Op={};Object.defineProperty(Op,"__esModule",{value:!0});Op.IntentResponse=void 0;class hm{constructor(t){t===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(t)}static fromJSON(t){return new hm(t)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}Op.IntentResponse=hm;var tb={};Object.defineProperty(tb,"__esModule",{value:!0});var Mp={},Dp={};Object.defineProperty(Dp,"__esModule",{value:!0});Dp.ServiceTelemetryListener=void 0;const Gn=Q(),Mw=Tp;class T4{constructor(t,n,r){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=t,this.privAudioSourceId=n,this.privAudioNodeId=r,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(t){t>0&&this.privPhraseLatencies.push(Date.now()-t)}hypothesisReceived(t){t>0&&this.privHypothesisLatencies.push(Date.now()-t)}onEvent(t){this.privIsDisposed||(t instanceof Mw.RecognitionTriggeredEvent&&t.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:t.eventTime,Name:"ListeningTrigger",Start:t.eventTime}),t instanceof Gn.AudioStreamNodeAttachingEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Gn.AudioStreamNodeAttachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Gn.AudioSourceErrorEvent&&t.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Gn.AudioStreamNodeErrorEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Gn.AudioStreamNodeDetachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Mw.ConnectingToServiceEvent&&t.requestId===this.privRequestId&&(this.privConnectionId=t.sessionId),t instanceof Gn.ConnectionStartEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionStartTime=t.eventTime),t instanceof Gn.ConnectionEstablishedEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Gn.ConnectionEstablishErrorEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Error:this.getConnectionError(t.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Gn.ConnectionMessageReceivedEvent&&t.connectionId===this.privConnectionId&&t.message&&t.message.headers&&t.message.headers.path&&(this.privReceivedMessages[t.message.headers.path]||(this.privReceivedMessages[t.message.headers.path]=new Array),this.privReceivedMessages[t.message.headers.path].length<50&&this.privReceivedMessages[t.message.headers.path].push(t.networkReceivedTime)))}getTelemetry(){const t=new Array;this.privListeningTriggerMetric&&t.push(this.privListeningTriggerMetric),this.privMicMetric&&t.push(this.privMicMetric),this.privConnectionEstablishMetric&&t.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&t.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&t.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const n={Metrics:t,ReceivedMessages:this.privReceivedMessages},r=JSON.stringify(n);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],r}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(t){switch(t){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+t.toString()}}}Dp.ServiceTelemetryListener=T4;Object.defineProperty(Mp,"__esModule",{value:!0});Mp.RequestSession=void 0;const Zi=Q(),Ul=Tp,A4=Dp;class b4{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=t,this.privRequestId=(0,Zi.createNoDashGuid)(),this.privAudioNodeId=(0,Zi.createNoDashGuid)(),this.privTurnDeferral=new Zi.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(t){this.privServiceTelemetryListener&&this.privDetachables.push(t.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new A4.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new Ul.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(t,n){this.privAudioNode=t,this.privIsAudioNodeDetached=!1,n?await this.onComplete():this.onEvent(new Ul.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(t,n){this.privAuthFetchEventId=t,this.privSessionId=n,this.onEvent(new Ul.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(t){t&&await this.onComplete()}async onConnectionEstablishCompleted(t,n){if(t===200){this.onEvent(new Ul.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else t===403&&await this.onComplete()}async onServiceTurnEndResponse(t){this.privTurnDeferral.resolve(),!t||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,Zi.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new Zi.Deferred}onHypothesis(t){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(t)))}onPhraseRecognized(t){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(t)),this.onServiceRecognized(t)}onServiceRecognized(t){this.privLastRecoOffset=t,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(t),this.privConnectionAttempts=0}onAudioSent(t){this.privBytesSent+=t,this.privRecognitionBytesSent+=t}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(t){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(t),Zi.Events.instance.onEvent(t)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}Mp.RequestSession=b4;var Np={},nb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TentativePhraseResultsOption=e.OutputFormat=e.PhraseExtension=e.PhraseOption=void 0,function(t){t.WordTimings="WordTimings",t.SNR="SNR",t.Pronunciation="Pronunciation",t.WordPronunciation="WordPronunciation",t.WordConfidence="WordConfidence",t.Words="Words",t.Sentiment="Sentiment",t.PronunciationAssessment="PronunciationAssessment",t.ContentAssessment="ContentAssessment",t.PhraseAMScore="PhraseAMScore",t.PhraseLMScore="PhraseLMScore",t.WordAMScore="WordAMScore",t.WordLMScore="WordLMScore",t.RuleTree="RuleTree",t.NBestTimings="NBestTimings",t.DecoderDiagnostics="DecoderDiagnostics",t.DisplayWordTimings="DisplayWordTimings",t.DisplayWords="DisplayWords"}(e.PhraseOption||(e.PhraseOption={})),function(t){t.Graph="Graph",t.Corrections="Corrections",t.Sentiment="Sentiment"}(e.PhraseExtension||(e.PhraseExtension={})),function(t){t.Simple="Simple",t.Detailed="Detailed"}(e.OutputFormat||(e.OutputFormat={})),function(t){t.None="None",t.Always="Always"}(e.TentativePhraseResultsOption||(e.TentativePhraseResultsOption={}))})(nb);Object.defineProperty(Np,"__esModule",{value:!0});Np.SpeechContext=void 0;const I4=Yt,Sr=nb;class _4{constructor(t){this.privContext={},this.privDynamicGrammar=t}getContext(){return this.privContext}setPronunciationAssessmentParams(t,n,r=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(t)||{},r&&(this.privContext.phraseDetection.mode=I4.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(Sr.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(Sr.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(Sr.PhraseOption.SNR),n&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:n},this.privContext.phraseOutput.detailed.options.push(Sr.PhraseOption.ContentAssessment))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=Sr.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=Sr.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(Sr.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(Sr.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(t){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=t}toJSON(){const t=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=t,JSON.stringify(this.privContext)}}Np.SpeechContext=_4;var zp={},rb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SubstringMatchType=e.GroupType=void 0,function(t){t.IntentText="IntentText",t.IntentEntity="IntentEntity",t.Generic="Generic",t.People="People",t.Place="Place",t.DynamicEntity="DynamicEntity"}(e.GroupType||(e.GroupType={})),function(t){t.None="None",t.LeftRooted="LeftRooted",t.PartialName="PartialName",t.MiddleOfSentence="MiddleOfSentence"}(e.SubstringMatchType||(e.SubstringMatchType={}))})(rb);Object.defineProperty(zp,"__esModule",{value:!0});zp.DynamicGrammarBuilder=void 0;const k4=rb;class x4{addPhrase(t){this.privPhrases||(this.privPhrases=[]),t instanceof Array?this.privPhrases=this.privPhrases.concat(t):this.privPhrases.push(t)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(t){this.privGrammars||(this.privGrammars=[]),t instanceof Array?this.privGrammars=this.privGrammars.concat(t):this.privGrammars.push(t)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const t={};if(t.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const n=[];this.privPhrases.forEach(r=>{n.push({text:r})}),t.groups=[{type:k4.GroupType.Generic,items:n}]}return t}}zp.DynamicGrammarBuilder=x4;var Ua={},jp={},Lp={},fm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(r){this.privActivityResponse=JSON.parse(r)}static fromJSON(r){return new t(r)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(n){n[n.None=0]="None",n[n.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))})(fm);Object.defineProperty(Lp,"__esModule",{value:!0});Lp.DialogServiceTurnState=void 0;const O4=ci,M4=nt,D4=fm;class N4{constructor(t,n){this.privRequestId=n,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=t,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(t,n){return t.messageDataStreamType===D4.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=M4.AudioOutputStream.createPullStream(),this.privAudioStream.format=n!==void 0?n:O4.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}Lp.DialogServiceTurnState=N4;Object.defineProperty(jp,"__esModule",{value:!0});jp.DialogServiceTurnStateManager=void 0;const Dw=it,z4=Lp;class j4{constructor(){this.privTurnMap=new Map}StartTurn(t){if(this.privTurnMap.has(t))throw new Dw.InvalidOperationError("Service error: There is already a turn with id:"+t);const n=new z4.DialogServiceTurnState(this,t);return this.privTurnMap.set(t,n),this.privTurnMap.get(t)}GetTurn(t){return this.privTurnMap.get(t)}CompleteTurn(t){if(!this.privTurnMap.has(t))throw new Dw.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+t);const n=this.privTurnMap.get(t);return n.complete(),this.privTurnMap.delete(t),n}}jp.DialogServiceTurnStateManager=j4;var ib={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvocationSource=void 0,function(t){t.None="None",t.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(e.InvocationSource||(e.InvocationSource={}))})(ib);var ob={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnRejectAction=e.KeywordDetectionType=void 0,function(t){t.StartTrigger="StartTrigger"}(e.KeywordDetectionType||(e.KeywordDetectionType={})),function(t){t.EndOfTurn="EndOfTurn",t.Continue="Continue"}(e.OnRejectAction||(e.OnRejectAction={}))})(ob);var Nw;function L4(){if(Nw)return Ua;Nw=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.DialogServiceAdapter=void 0;const e=Qe(),t=Hi,n=Q(),r=ci,i=O(),o=jp,a=W(),s=fm,c=ib,l=ob,u=dr;let d=class extends a.ServiceRecognizerBase{constructor(h,v,g,y,f){super(h,v,g,y,f),this.privEvents=new n.EventSource,this.privDialogServiceConnector=f,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new o.DialogServiceTurnStateManager,this.recognizeOverride=(m,S,C)=>this.listenOnce(m,S,C),this.postConnectImplOverride=m=>this.dialogConnectImpl(m),this.configConnectionOverride=m=>this.configConnection(m),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=g,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(m=>{m.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(h){const v=(0,n.createGuid)(),g=(0,n.createNoDashGuid)(),y={context:{interactionId:v},messagePayload:JSON.parse(h),version:.5},f=JSON.stringify(y);await(await this.fetchConnection()).send(new u.SpeechConnectionMessage(n.MessageType.Text,"agent",g,"application/json",f))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(h){const v=new i.PropertyCollection;h.messageType===n.MessageType.Text&&v.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,h.textBody);let g,y;switch(h.path.toLowerCase()){case"speech.phrase":const m=a.SimpleSpeechPhrase.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(m.Offset+m.Duration),m.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&m.RecognitionStatus!==a.RecognitionStatus.Error){const A=this.fireEventForResult(m,v);if(this.privLastResult=A.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,A)}catch{}}y=!0;break;case"speech.hypothesis":const S=a.SpeechHypothesis.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);g=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,S.Text,S.Duration,S.Offset,S.Language,S.LanguageDetectionConfidence,void 0,void 0,S.asJson(),v),this.privRequestSession.onHypothesis(S.Offset);const C=new i.SpeechRecognitionEventArgs(g,S.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,C)}catch{}y=!0;break;case"speech.keyword":const R=a.SpeechKeyword.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);g=new i.SpeechRecognitionResult(this.privRequestSession.requestId,R.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,R.Text,R.Duration,R.Offset,void 0,void 0,void 0,void 0,R.asJson(),v),R.Status!=="Accepted"&&(this.privLastResult=g);const T=new i.SpeechRecognitionEventArgs(g,g.duration,g.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,T)}catch{}y=!0;break;case"audio":{const A=h.requestId.toUpperCase(),E=this.privTurnStateManager.GetTurn(A);try{h.binaryBody?E.audioStream.write(h.binaryBody):E.endAudioStream()}catch{}}y=!0;break;case"response":this.handleResponseMessage(h),y=!0;break}const f=new n.Deferred;return f.resolve(y),f.promise}async cancelRecognition(h,v,g,y,f){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const m=new i.PropertyCollection;m.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[y]);const S=new i.SpeechRecognitionCanceledEventArgs(g,f,y,void 0,h);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,S)}catch{}if(this.privSuccessCallback){const C=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,f,void 0,m);try{this.privSuccessCallback(C),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(h,v,g){this.privRecognizerConfig.recognitionMode=h,this.privSuccessCallback=v,this.privErrorCallback=g,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const y=this.connectImpl(),f=this.sendPreAudioMessages(),m=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),S=await this.privDialogAudioSource.format,C=await this.privDialogAudioSource.deviceInfo,R=new e.ReplayableAudioNode(m,S.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(R,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:C};try{await y,await f}catch(E){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,E),Promise.resolve()}const T=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,T),this.sendAudio(R).then(()=>{},async E=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,E)})}dialogConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}receiveDialogMessageOverride(){const h=new n.Deferred,v=async()=>{try{const g=this.isDisposed(),y=!this.isDisposed()&&this.terminateMessageLoop;if(g||y){h.resolve(void 0);return}const m=await(await this.fetchConnection()).read();if(!m)return v();const S=u.SpeechConnectionMessage.fromConnectionMessage(m);switch(S.path.toLowerCase()){case"turn.start":{const _=S.requestId.toUpperCase(),N=this.privRequestSession.requestId.toUpperCase();_!==N?this.privTurnStateManager.StartTurn(_):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const R=a.SpeechDetected.fromJSON(S.textBody,this.privRequestSession.currentTurnAudioOffset),T=new i.RecognitionEventArgs(R.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,T);break;case"speech.enddetected":let A;S.textBody.length>0?A=S.textBody:A="{ Offset: 0 }";const E=a.SpeechDetected.fromJSON(A,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(E.Offset);const k=new i.RecognitionEventArgs(E.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,k);break;case"turn.end":{const _=S.requestId.toUpperCase(),N=this.privRequestSession.requestId.toUpperCase();if(_!==N)this.privTurnStateManager.CompleteTurn(_);else{const B=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,B),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch($){this.privErrorCallback&&this.privErrorCallback($)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(S)||this.serviceEvents&&this.serviceEvents.onEvent(new n.ServiceEvent(S.path.toLowerCase(),S.textBody))}catch{}}return v()}catch{this.terminateMessageLoop=!0,h.resolve()}};return v().catch(g=>{n.Events.instance.onEvent(new n.BackgroundEvent(g))}),h.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(h){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,h)}return Promise.resolve()}async configConnection(h){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(h,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(h),h)}async sendPreAudioMessages(){const h=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(h,!0),await this.sendAgentContext(h),await this.sendWaveHeader(h)}sendAgentConfig(h){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const g=this.agentConfig.get();g.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(g)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const v=this.agentConfig.toJsonString();return this.agentConfigSent=!0,h.send(new u.SpeechConnectionMessage(n.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",v))}}sendAgentContext(h){const v=(0,n.createGuid)(),g=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),f=JSON.stringify({channelData:"",context:{interactionId:v},messagePayload:typeof g===void 0?void 0:g,version:.5});return h.send(new u.SpeechConnectionMessage(n.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",f))}fireEventForResult(h,v){const g=a.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),y=new i.SpeechRecognitionResult(this.privRequestSession.requestId,g,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),v);return new i.SpeechRecognitionEventArgs(y,h.Offset,this.privRequestSession.sessionId)}handleResponseMessage(h){const v=JSON.parse(h.textBody);switch(v.messageType.toLowerCase()){case"message":const g=h.requestId.toUpperCase(),y=s.ActivityPayloadResponse.fromJSON(h.textBody),f=this.privTurnStateManager.GetTurn(g);if(y.conversationId){const C=this.agentConfig.get();C.botInfo.conversationId=y.conversationId,this.agentConfig.set(C)}const m=f.processActivityPayload(y,r.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),S=new i.ActivityReceivedEventArgs(y.messagePayload,m);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,S)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(h.textBody))}catch{}break;default:n.Events.instance.onEvent(new n.BackgroundEvent(`Unexpected response of type ${v.messageType}. Ignoring.`));break}}onEvent(h){this.privEvents.onEvent(h),n.Events.instance.onEvent(h)}addKeywordContextData(){const h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(h===void 0)return;const v=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),g=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),y=h.split(";"),f=v===void 0?[]:v.split(";"),m=g===void 0?[]:g.split(";"),S=[];for(let C=0;C<y.length;C++){const R={text:y[C]};C<f.length&&(R.startOffset=Number(f[C])),C<m.length&&(R.duration=Number(m[C])),S.push(R)}this.speechContext.getContext().invocationSource=c.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:S,onReject:{action:l.OnRejectAction.EndOfTurn},type:l.KeywordDetectionType.StartTrigger}]}};return Ua.DialogServiceAdapter=d,Ua}var Fp={};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.AgentConfig=void 0;class F4{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(t){this.iPrivConfig=t}}Fp.AgentConfig=F4;var Jh={},$a={},rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.ConversationConnectionConfig=void 0;const B4=hl;class mt extends B4.RestConfigBase{static get host(){return mt.privHost}static get apiVersion(){return mt.privApiVersion}static get clientAppId(){return mt.privClientAppId}static get defaultLanguageCode(){return mt.privDefaultLanguageCode}static get restPath(){return mt.privRestPath}static get webSocketPath(){return mt.privWebSocketPath}static get transcriptionEventKeys(){return mt.privTranscriptionEventKeys}}rs.ConversationConnectionConfig=mt;mt.privHost="dev.microsofttranslator.com";mt.privRestPath="/capito/room";mt.privApiVersion="2.0";mt.privDefaultLanguageCode="en-US";mt.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";mt.privWebSocketPath="/capito/translate";mt.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var zw;function q4(){if(zw)return $a;zw=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.ConversationManager=void 0;const e=Qe(),t=Z,n=O(),r=rs;let i=class{constructor(){this.privRequestParams=r.ConversationConnectionConfig.configParams,this.privErrors=r.ConversationConnectionConfig.restErrors,this.privHost=r.ConversationConnectionConfig.host,this.privApiVersion=r.ConversationConnectionConfig.apiVersion,this.privRestPath=r.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(a,s,c,l){try{t.Contracts.throwIfNullOrUndefined(a,"args");const u=a.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,r.ConversationConnectionConfig.defaultLanguageCode),d=a.getProperty(n.PropertyId.ConversationTranslator_Name,"conversation_host"),p=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),v=a.getProperty(n.PropertyId.SpeechServiceConnection_Key),g=a.getProperty(n.PropertyId.SpeechServiceConnection_Region),y=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(u,"languageCode"),t.Contracts.throwIfNullOrWhitespace(d,"nickname"),t.Contracts.throwIfNullOrWhitespace(p,"endpointHost");const f={};f[this.privRequestParams.apiVersion]=this.privApiVersion,f[this.privRequestParams.languageCode]=u,f[this.privRequestParams.nickname]=d;const m={};h&&(m[this.privRequestParams.correlationId]=h),m[this.privRequestParams.clientAppId]=r.ConversationConnectionConfig.clientAppId,s!==void 0?f[this.privRequestParams.roomId]=s:(t.Contracts.throwIfNullOrUndefined(g,this.privErrors.authInvalidSubscriptionRegion),m[this.privRequestParams.subscriptionRegion]=g,v?m[this.privRequestParams.subscriptionKey]=v:y?m[this.privRequestParams.authorization]=`Bearer ${y}`:t.Contracts.throwIfNullOrUndefined(v,this.privErrors.authInvalidSubscriptionKey));const S={};S.headers=m,this.privRestAdapter.options=S;const C=`https://${p}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,C,f,null).then(R=>{const T=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,R.headers);if(!R.ok){if(l){let E=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",R.status.toString()),k;try{k=JSON.parse(R.data),E+=` [${k.error.code}: ${k.error.message}]`}catch{E+=` [${R.data}]`}T&&(E+=` ${T}`),l(E)}return}const A=JSON.parse(R.data);if(A&&(A.requestId=T),c){try{c(A)}catch(E){l&&l(E)}c=void 0}}).catch(()=>{})}catch(u){if(l)if(u instanceof Error){const d=u;l(d.name+": "+d.message)}else l(u)}}leave(a,s){return new Promise((c,l)=>{try{t.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(s,this.privErrors.invalidArgs.replace("{arg}","token"));const u=a.getProperty(n.PropertyId.ConversationTranslator_Host,this.privHost),d=a.getProperty(n.PropertyId.ConversationTranslator_CorrelationId),p={};p[this.privRequestParams.apiVersion]=this.privApiVersion,p[this.privRequestParams.sessionToken]=s;const h={};d&&(h[this.privRequestParams.correlationId]=d);const v={};v.headers=h,this.privRestAdapter.options=v;const g=`https://${u}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,g,p,null).then(y=>{y.ok,c()}).catch(()=>{})}catch(u){if(u instanceof Error){const d=u;l(d.name+": "+d.message)}else l(u)}})}};return $a.ConversationManager=i,$a}var Pi={},Va={},Bp={},fl={};Object.defineProperty(fl,"__esModule",{value:!0});fl.ConversationConnectionMessage=void 0;const U4=Q();class $4 extends U4.ConnectionMessage{constructor(t,n,r,i){super(t,n,r,i);const o=JSON.parse(this.textBody);o.type!==void 0&&(this.privConversationMessageType=o.type)}get conversationMessageType(){return this.privConversationMessageType}}fl.ConversationConnectionMessage=$4;Object.defineProperty(Bp,"__esModule",{value:!0});Bp.ConversationWebsocketMessageFormatter=void 0;const Ei=Q(),jw=fl;class V4{toConnectionMessage(t){const n=new Ei.Deferred;try{if(t.messageType===Ei.MessageType.Text){const r=new jw.ConversationConnectionMessage(t.messageType,t.textContent,{},t.id);n.resolve(r)}else t.messageType===Ei.MessageType.Binary&&n.resolve(new jw.ConversationConnectionMessage(t.messageType,t.binaryContent,void 0,t.id))}catch(r){n.reject(`Error formatting the message. Error: ${r}`)}return n.promise}fromConnectionMessage(t){const n=new Ei.Deferred;try{if(t.messageType===Ei.MessageType.Text){const r=`${t.textBody?t.textBody:""}`;n.resolve(new Ei.RawWebsocketMessage(Ei.MessageType.Text,r,t.id))}}catch(r){n.reject(`Error formatting the message. ${r}`)}return n.promise}}Bp.ConversationWebsocketMessageFormatter=V4;var Lw;function H4(){if(Lw)return Va;Lw=1,Object.defineProperty(Va,"__esModule",{value:!0}),Va.ConversationConnectionFactory=void 0;const e=Qe(),t=Q(),n=Z,r=O(),i=In(),o=rs,a=Bp;let s=class extends i.ConnectionFactoryBase{create(l,u,d){const p=l.parameters.getProperty(r.PropertyId.ConversationTranslator_Host,o.ConversationConnectionConfig.host),h=l.parameters.getProperty(r.PropertyId.ConversationTranslator_CorrelationId,(0,t.createGuid)()),v=`wss://${p}${o.ConversationConnectionConfig.webSocketPath}`,g=l.parameters.getProperty(r.PropertyId.ConversationTranslator_Token,void 0);n.Contracts.throwIfNullOrUndefined(g,"token");const y={};y[o.ConversationConnectionConfig.configParams.apiVersion]=o.ConversationConnectionConfig.apiVersion,y[o.ConversationConnectionConfig.configParams.token]=g,y[o.ConversationConnectionConfig.configParams.correlationId]=h;const f=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(v,y,{},new a.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),f,d))}};return Va.ConversationConnectionFactory=s,Va}var Ha={},qp={};Object.defineProperty(qp,"__esModule",{value:!0});qp.ConversationRequestSession=void 0;const Gh=Q();class W4{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=t,this.privRequestId=(0,Gh.createNoDashGuid)(),this.privRequestCompletionDeferral=new Gh.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(t,n){this.privSessionId=n}onAuthCompleted(t){t&&this.onComplete()}onConnectionEstablishCompleted(t){t!==200&&t===403&&this.onComplete()}onServiceTurnEndResponse(t){t?this.privRequestId=(0,Gh.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach()}}onComplete(){}}qp.ConversationRequestSession=W4;var wt={},Fw;function sb(){if(Fw)return wt;Fw=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.ConversationReceivedTranslationEventArgs=wt.ParticipantsListEventArgs=wt.ParticipantAttributeEventArgs=wt.ParticipantEventArgs=wt.LockRoomEventArgs=wt.MuteAllEventArgs=void 0;const e=O();class t extends e.SessionEventArgs{constructor(c,l){super(l),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}wt.MuteAllEventArgs=t;class n extends e.SessionEventArgs{constructor(c,l){super(l),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}wt.LockRoomEventArgs=n;class r extends e.SessionEventArgs{constructor(c,l){super(l),this.privParticipant=c}get participant(){return this.privParticipant}}wt.ParticipantEventArgs=r;class i extends e.SessionEventArgs{constructor(c,l,u,d){super(d),this.privKey=l,this.privValue=u,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}wt.ParticipantAttributeEventArgs=i;class o extends e.SessionEventArgs{constructor(c,l,u,d,p,h,v,g,y){super(y),this.privRoomId=c,this.privSessionToken=l,this.privTranslateTo=u,this.privProfanityFilter=d,this.privRoomProfanityFilter=p,this.privIsRoomLocked=h,this.privIsRoomLocked=v,this.privParticipants=g}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}wt.ParticipantsListEventArgs=o;class a{constructor(c,l,u){this.privPayload=l,this.privCommand=c,this.privSessionId=u}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return wt.ConversationReceivedTranslationEventArgs=a,wt}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.ConversationTranslatorCommandTypes=nr.ConversationTranslatorMessageTypes=nr.InternalParticipants=void 0;class K4{constructor(t=[],n){this.participants=t,this.meId=n}addOrUpdateParticipant(t){if(t===void 0)return;const n=this.getParticipantIndex(t.id);return n>-1?this.participants.splice(n,1,t):this.participants.push(t),this.getParticipant(t.id)}getParticipantIndex(t){return this.participants.findIndex(n=>n.id===t)}getParticipant(t){return this.participants.find(n=>n.id===t)}deleteParticipant(t){this.participants=this.participants.filter(n=>n.id!==t)}get host(){return this.participants.find(t=>t.isHost===!0)}get me(){return this.getParticipant(this.meId)}}nr.InternalParticipants=K4;nr.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};nr.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var ab={},Up={};Object.defineProperty(Up,"__esModule",{value:!0});Up.CommandResponsePayload=void 0;const J4=e=>JSON.parse(e);class vm{constructor(t){this.privCommandResponse=J4(t)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(t){return new vm(t)}}Up.CommandResponsePayload=vm;var Uo={};Object.defineProperty(Uo,"__esModule",{value:!0});Uo.ParticipantPayloadResponse=Uo.ParticipantsListPayloadResponse=void 0;const G4=e=>JSON.parse(e),Q4=e=>JSON.parse(e);class gm{constructor(t){this.privParticipantsPayloadResponse=G4(t)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(t){return new gm(t)}}Uo.ParticipantsListPayloadResponse=gm;class mm{constructor(t){this.privParticipantPayloadResponse=Q4(t)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(t){return new mm(t)}}Uo.ParticipantPayloadResponse=mm;var $o={};Object.defineProperty($o,"__esModule",{value:!0});$o.TextResponsePayload=$o.SpeechResponsePayload=void 0;const Y4=e=>JSON.parse(e),X4=e=>JSON.parse(e);class ym{constructor(t){this.privSpeechResponse=Y4(t)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(t){return new ym(t)}}$o.SpeechResponsePayload=ym;class Sm{constructor(t){this.privTextResponse=X4(t)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(t){return new Sm(t)}}$o.TextResponsePayload=Sm;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextResponsePayload=e.SpeechResponsePayload=e.ParticipantPayloadResponse=e.ParticipantsListPayloadResponse=e.CommandResponsePayload=void 0;var t=Up;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var n=Uo;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return n.ParticipantPayloadResponse}});var r=$o;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return r.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return r.TextResponsePayload}})})(ab);var Bw;function Z4(){if(Bw)return Ha;Bw=1,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.ConversationServiceAdapter=void 0;const e=Q(),t=O(),n=W(),r=fl,i=qp,o=sb(),a=nr,s=ab;let c=class extends n.ServiceRecognizerBase{constructor(u,d,p,h,v){super(u,d,p,h,v),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=v,this.privConversationAuthentication=u,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=g=>this.conversationConnectImpl(g),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession((0,e.createNoDashGuid)()),this.privConversationConnectionFactory=d,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(u){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(u),await super.dispose(u)}async sendMessage(u){return(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,u))}async sendMessageAsync(u){await(await this.fetchConnection()).send(new r.ConversationConnectionMessage(e.MessageType.Text,u))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(u,d,p,h,v){this.terminateMessageLoop=!0;const g=new t.ConversationTranslationCanceledEventArgs(p,v,h,void 0,u);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,g)}catch{}}async conversationConnectImpl(u){return this.privConnectionLoop=this.startMessageLoop(),u}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const u=new e.Deferred;try{const p=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return u.resolve(),Promise.resolve();if(!p)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,v=p.conversationMessageType.toLowerCase();let g=!1;try{switch(v){case"info":case"participant_command":case"command":const y=s.CommandResponsePayload.fromJSON(p.textBody);switch(y.command.toLowerCase()){case"participantlist":const T=s.ParticipantsListPayloadResponse.fromJSON(p.textBody),A=T.participants.map($=>({avatar:$.avatar,displayName:$.nickname,id:$.participantId,isHost:$.ishost,isMuted:$.ismuted,isUsingTts:$.usetts,preferredLanguage:$.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new o.ParticipantsListEventArgs(T.roomid,T.token,T.translateTo,T.profanityFilter,T.roomProfanityFilter,T.roomLocked,T.muteAll,A,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,y.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,y.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setMute,y.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new o.MuteAllEventArgs(y.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(y.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,y.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new o.LockRoomEventArgs(y.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new o.ParticipantAttributeEventArgs(y.participantId,a.ConversationTranslatorCommandTypes.changeNickname,y.value,h));break;case"joinsession":const E=s.ParticipantPayloadResponse.fromJSON(p.textBody),k={avatar:E.avatar,displayName:E.nickname,id:E.participantId,isHost:E.ishost,isMuted:E.ismuted,isUsingTts:E.usetts,preferredLanguage:E.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(k,h));break;case"leavesession":const _={id:y.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new o.ParticipantEventArgs(_,h));break;case"disconnectsession":const N={id:y.participantId};break;case"token":const B=new n.CognitiveTokenAuthentication(()=>{const $=y.token;return Promise.resolve($)},()=>{const $=y.token;return Promise.resolve($)});this.authentication=B,this.privConversationServiceConnector.onToken(B);break;default:break}break;case"partial":case"final":const f=s.SpeechResponsePayload.fromJSON(p.textBody),m=v==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,S=new t.ConversationTranslationResult(f.participantId,this.getTranslations(f.translations),f.language,f.id,m,f.recognition,void 0,void 0,p.textBody,void 0);f.isFinal?((S.text!==void 0&&S.text.length>0||f.id===this.privLastPartialUtteranceId)&&(g=!0),g&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,S,h))):S.text!==void 0&&(this.privLastPartialUtteranceId=f.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,S,h)));break;case"translated_message":const C=s.TextResponsePayload.fromJSON(p.textBody),R=new t.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,p.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new o.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,R,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return u.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const u=this.receiveConversationMessageOverride();try{return await u}catch(d){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,d),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(u=>u.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(u=>u),this.privConnectionConfigPromise)}getTranslations(u){let d;if(u!==void 0){d=new t.Translations;for(const p of u)d.set(p.lang,p.translation)}return d}};return Ha.ConversationServiceAdapter=c,Ha}var qw;function eq(){if(qw)return Pi;qw=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.ConversationTranslatorRecognizer=Pi.ConversationRecognizerFactory=void 0;const e=W(),t=Q(),n=Z,r=O(),i=H4(),o=Z4();class a{static fromConfig(l,u,d){return new s(l,u,d)}}Pi.ConversationRecognizerFactory=a;let s=class extends r.Recognizer{constructor(l,u,d){const p=u;n.Contracts.throwIfNull(p,"speechConfig");const h=l;n.Contracts.throwIfNull(h,"conversationImpl"),super(d,p.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=p.properties.clone(),this.privConnection=r.Connection.fromRecognizer(this),this.privProperties.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(l){this.privConnection.connected=l}set disconnected(l){this.privConnection.disconnected=l}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(l,u,d){try{n.Contracts.throwIfDisposed(this.privIsDisposed),n.Contracts.throwIfNullOrWhitespace(l,"token"),this.privReco.conversationTranslatorToken=l,this.resetConversationTimeout(),this.privReco.connectAsync(u,d)}catch(p){if(d)if(p instanceof Error){const h=p;d(h.name+": "+h.message)}else d(p)}}disconnect(l,u){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{l&&l()},d=>{u&&u(d)})}catch(d){if(u)if(d instanceof Error){const p=d;u(p.name+": "+p.message)}else u(d);this.dispose(!0).catch(p=>{t.Events.instance.onEvent(new t.BackgroundEvent(p))})}}sendRequest(l,u,d){try{n.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(l,u,d)}catch(p){if(d)if(p instanceof Error){const h=p;d(h.name+": "+h.message)}else d(p);this.dispose(!0).catch(h=>{t.Events.instance.onEvent(new t.BackgroundEvent(h))})}}onToken(l){this.privConversation.onToken(l)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(l){this.privIsDisposed||l&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(l))}createRecognizerConfig(l){return new e.RecognizerConfig(l,this.privProperties)}createServiceRecognizer(l,u,d,p){const h=d;return new o.ConversationServiceAdapter(l,u,h,p,this)}sendMessage(l,u,d){const p=this.privReco;((v,g,y)=>{v!==void 0?v.then(()=>{try{g&&g()}catch(f){y&&y(`'Unhandled error on promise callback: ${f}'`)}},f=>{try{y&&y(f)}catch{}}):y&&y("Null promise")})(p.sendMessageAsync(l),u,d),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Pi.ConversationTranslatorRecognizer=s,Pi}var Wa={},Uw;function tq(){if(Uw)return Wa;Uw=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.TranscriberRecognizer=void 0;const e=Q(),t=Z,n=O(),r=W(),i=Yt;let o=class extends n.Recognizer{constructor(s,c){const l=s;t.Contracts.throwIfNull(l,"speechTranslationConfig");const u=c;t.Contracts.throwIfNull(u,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(l.speechRecognitionLanguage,n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,l.properties,new r.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){t.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,s)}set conversation(s){t.Contracts.throwIfNullOrUndefined(s,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=s}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(s){t.Contracts.throwIfNullOrUndefined(s,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=s}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(s,c){(0,e.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),s,c)}stopContinuousRecognitionAsync(s,c){(0,e.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),s,c)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(s,c){const l=this.privReco;t.Contracts.throwIfNullOrUndefined(l,"serviceRecognizer"),await l.sendSpeechEventAsync(s,c)}async pushMeetingEvent(s,c){const l=this.privReco;t.Contracts.throwIfNullOrUndefined(l,"serviceRecognizer"),await l.sendMeetingSpeechEventAsync(s,c)}async enforceAudioGating(){const l=(await this.audioConfig.format).channels;if(l===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(l!==8)throw new Error(`Unsupported audio configuration: Detected ${l}-channel audio`)}connectMeetingCallbacks(s){this.isMeetingRecognizer=!0,this.canceled=(c,l)=>{s.canceled&&s.canceled(s,l)},this.recognizing=(c,l)=>{s.transcribing&&s.transcribing(s,l)},this.recognized=(c,l)=>{s.transcribed&&s.transcribed(s,l)},this.sessionStarted=(c,l)=>{s.sessionStarted&&s.sessionStarted(s,l)},this.sessionStopped=(c,l)=>{s.sessionStopped&&s.sessionStopped(s,l)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(s){this.privDisposedRecognizer||(s&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(s))}createRecognizerConfig(s){return new r.RecognizerConfig(s,this.properties)}createServiceRecognizer(s,c,l,u){const d=l;return new r.TranscriptionServiceRecognizer(s,c,d,u,this)}};return Wa.TranscriberRecognizer=o,Wa}var $w;function nq(){return $w||($w=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InternalParticipants=e.ConversationTranslatorMessageTypes=e.ConversationTranslatorCommandTypes=e.ParticipantsListEventArgs=e.ParticipantEventArgs=e.ParticipantAttributeEventArgs=e.MuteAllEventArgs=e.LockRoomEventArgs=e.ConversationReceivedTranslationEventArgs=e.TranscriberRecognizer=e.ConversationRecognizerFactory=e.ConversationConnectionConfig=e.ConversationManager=void 0;var t=q4();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var n=rs;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return n.ConversationConnectionConfig}});var r=eq();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return r.ConversationRecognizerFactory}});var i=tq();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var o=sb();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return o.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return o.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return o.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return o.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return o.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return o.ParticipantsListEventArgs}});var a=nr;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(Jh)),Jh}var Cm={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(n){n.WordBoundary="WordBoundary",n.Bookmark="Bookmark",n.Viseme="Viseme",n.SentenceBoundary="SentenceBoundary",n.SessionEnd="SessionEnd",n.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(r){this.privSynthesisAudioMetadata=JSON.parse(r)}static fromJSON(r){return new t(r)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t})(Cm);var Ka={},Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.SynthesisStartedEvent=Ln.ConnectingToSynthesisServiceEvent=Ln.SynthesisTriggeredEvent=Ln.SpeechSynthesisEvent=void 0;const Vw=Q();class $p extends Vw.PlatformEvent{constructor(t,n,r=Vw.EventType.Info){super(t,r),this.privRequestId=n}get requestId(){return this.privRequestId}}Ln.SpeechSynthesisEvent=$p;class rq extends $p{constructor(t,n,r){super("SynthesisTriggeredEvent",t),this.privSessionAudioDestinationId=n,this.privTurnAudioDestinationId=r}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}Ln.SynthesisTriggeredEvent=rq;class iq extends $p{constructor(t,n){super("ConnectingToSynthesisServiceEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}Ln.ConnectingToSynthesisServiceEvent=iq;class oq extends $p{constructor(t,n){super("SynthesisStartedEvent",t),this.privAuthFetchEventId=n}get authFetchEventId(){return this.privAuthFetchEventId}}Ln.SynthesisStartedEvent=oq;var Hw;function sq(){if(Hw)return Ka;Hw=1,Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.SynthesisTurn=void 0;const e=Q(),t=nt,n=O(),r=Cm,i=Ln;let o=class Pv{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,e.createNoDashGuid)(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(s){this.privStreamId=s}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(s){this.privAudioOutputFormat=s}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const s=new n.PropertyCollection;return s.setProperty(n.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),s}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const s=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(s),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(s,c,l,u){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=s,this.privRawText=c,this.privIsSSML=l,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",u!==void 0&&(this.privTurnAudioDestination=u,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,u===void 0?void 0:u.id()))}onPreConnectionStart(s){this.privAuthFetchEventId=s,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(s){s&&this.onComplete()}onConnectionEstablishCompleted(s){if(s===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else s===403&&this.onComplete()}onServiceResponseMessage(s){const c=JSON.parse(s);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(s){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const c=JSON.parse(s);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(s){this.isSynthesizing&&(this.privAudioOutputStream.write(s),this.privBytesReceived+=s.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(s))}onTextBoundaryEvent(s){this.updateTextOffset(s.Data.text.Text,s.Type)}onVisemeMetadataReceived(s){s.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=s.Data.AnimationChunk)}onSessionEnd(s){this.privAudioDuration=s.Data.Offset}async constructSynthesisResult(){const s=await this.getAllReceivedAudioWithHeader();return new n.SpeechSynthesisResult(this.requestId,n.ResultReason.SynthesizingAudioCompleted,s,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const s=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",s}onEvent(s){e.Events.instance.onEvent(s)}static isXmlTag(s){return s.length>=2&&s[0]==="<"&&s[s.length-1]===">"}updateTextOffset(s,c){c===r.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(s,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!Pv.isXmlTag(s)&&this.updateTextOffset(s,c))):(this.privSentenceOffset=this.privRawText.indexOf(s,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+s.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!Pv.isXmlTag(s)&&this.updateTextOffset(s,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(s){return this.privRawText.indexOf("<",s+1)>this.privRawText.indexOf(">",s+1)}};return Ka.SynthesisTurn=o,Ka}var Ja={},Ww;function aq(){if(Ww)return Ja;Ww=1,Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.SynthesisAdapterBase=void 0;const e=Q(),t=O(),n=W(),r=dr;let i=class{constructor(a,s,c,l){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new e.ArgumentNullError("authentication");if(!s)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=s,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=l,this.privSynthesisTurn=new n.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new n.SynthesisContext,this.privAgentConfig=new n.AgentConfig,this.connectionEvents.attach(u=>{if(u.name==="ConnectionClosedEvent"){const d=u;d.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,d.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${d.reason} websocket error code: ${d.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,s){const c=typeof s=="string"?e.MessageType.Text:e.MessageType.Binary,l=typeof s=="string"?"application/json":"";return(await this.fetchConnection()).send(new r.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,l,s))}async Speak(a,s,c,l,u,d){let p;if(s?p=a:p=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(p,c,l,u);this.privSuccessCallback=l,this.privErrorCallback=u,this.privSynthesisTurn.startNewSynthesis(c,a,s,d);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,p,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,s,c,l){const u=new t.PropertyCollection;u.setProperty(n.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]);const d=new t.SpeechSynthesisResult(a,t.ResultReason.Canceled,void 0,l,u);if(this.onSynthesisCancelled(d),this.privSuccessCallback)try{this.privSuccessCallback(d)}catch{}}cancelSynthesisLocal(a,s,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,s,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const s=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!s)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=r.SpeechConnectionMessage.fromConnectionMessage(s);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const l=n.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const d of l)switch(d.Type){case n.MetadataType.WordBoundary:case n.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(d);const p=new t.SpeechSynthesisWordBoundaryEventArgs(d.Data.Offset,d.Data.Duration,d.Data.text.Text,d.Data.text.Length,d.Type===n.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,d.Data.text.BoundaryType);this.onWordBoundary(p);break;case n.MetadataType.Bookmark:const h=new t.SpeechSynthesisBookmarkEventArgs(d.Data.Offset,d.Data.Bookmark);this.onBookmarkReached(h);break;case n.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(d),d.Data.IsLastAnimation){const v=new t.SpeechSynthesisVisemeEventArgs(d.Data.Offset,d.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(v)}break;case n.MetadataType.AvatarSignal:this.onAvatarEvent(d);break;case n.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(d);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let u;try{u=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(u)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.onSynthesisCompleted(u);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const s=this.synthesisContext.toJSON();if(s)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",s))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,e.createNoDashGuid)(),this.privConnectionId=(0,e.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const s=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=s.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const l=await this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);l.events.attach(d=>{this.connectionEvents.onEvent(d)});const u=await l.open();return u.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(u.statusCode),Promise.resolve(l)):u.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(u.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${u.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${u.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,s){if(s)return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",s))}sendSsmlMessage(a,s,c){return a.send(new r.SpeechConnectionMessage(e.MessageType.Text,"ssml",c,"application/ssml+xml",s))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Ja.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,Ja}var Ga={},Kw;function cq(){if(Kw)return Ga;Kw=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.AvatarSynthesisAdapter=void 0;const e=O(),t=W();let n=class extends t.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,void 0),this.privAvatarSynthesizer=s,this.privSynthesizer=s,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){var i,o,a,s,c,l,u,d,p,h,v,g,y,f,m,S,C;this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:(i=this.privAvatarConfig.videoFormat)==null?void 0:i.bitrate,codec:(o=this.privAvatarConfig.videoFormat)==null?void 0:o.codec,crop:{bottomRight:{x:(c=(s=(a=this.privAvatarConfig.videoFormat)==null?void 0:a.cropRange)==null?void 0:s.bottomRight)==null?void 0:c.x,y:(d=(u=(l=this.privAvatarConfig.videoFormat)==null?void 0:l.cropRange)==null?void 0:u.bottomRight)==null?void 0:d.y},topLeft:{x:(v=(h=(p=this.privAvatarConfig.videoFormat)==null?void 0:p.cropRange)==null?void 0:h.topLeft)==null?void 0:v.x,y:(f=(y=(g=this.privAvatarConfig.videoFormat)==null?void 0:g.cropRange)==null?void 0:y.topLeft)==null?void 0:f.y}},resolution:{height:(m=this.privAvatarConfig.videoFormat)==null?void 0:m.height,width:(S=this.privAvatarConfig.videoFormat)==null?void 0:S.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:(C=this.privAvatarConfig.backgroundImage)==null?void 0:C.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const o=new e.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,o)}catch{}}}};return Ga.AvatarSynthesisAdapter=n,Ga}var Qa={},Jw;function lq(){if(Jw)return Qa;Jw=1,Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.SpeechSynthesisAdapter=void 0;const e=O(),t=W();let n=class extends t.SynthesisAdapterBase{constructor(i,o,a,s,c){super(i,o,a,c),this.privSpeechSynthesizer=s,this.privSynthesizer=s}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const o=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(i,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,o)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const o=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,o));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const o=new e.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,o)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Qa.SpeechSynthesisAdapter=n,Qa}var Ya={},Gw;function uq(){if(Gw)return Ya;Gw=1,Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.SynthesisRestAdapter=void 0;const e=Qe(),t=O(),n=In(),r=Ge;let i=class{constructor(a,s){let c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const u=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),d=n.ConnectionFactoryBase.getHostSuffix(u);c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${u}.tts.speech${d}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const l=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(l),this.privAuthentication=s}getVoicesList(a){return this.privRestAdapter.setHeaders(r.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(s=>(this.privRestAdapter.setHeaders(s.headerName,s.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return Ya.SynthesisRestAdapter=i,Ya}var Qh={},Qw;function dq(){return Qw||(Qw=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=W();var n;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(n=e.SynthesisServiceType||(e.SynthesisServiceType={}));class r{constructor(o,a){this.privSynthesisServiceType=n.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=o||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(o){this.privSynthesisServiceType=o}set synthesisVideoSection(o){this.privSpeechServiceConfig.Context.synthesis={video:o}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}e.SynthesizerConfig=r}(Qh)),Qh}var Xa={},Yw;function pq(){if(Yw)return Xa;Yw=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.SynthesisContext=void 0;const e=O();let t=class{constructor(){this.privContext={}}setSection(r,i){this.privContext[r]=i}set audioOutputFormat(r){this.privAudioOutputFormat=r}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(r){const i=this.buildSynthesisContext(r);this.setSection("synthesis",i)}buildSynthesisContext(r){return{audio:{metadataOptions:{bookmarkEnabled:!!(r!=null&&r.bookmarkReached),punctuationBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!(r!=null&&r.wordBoundary)),sentenceBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!(r!=null&&r.visemeReceived),wordBoundaryEnabled:r==null?void 0:r.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!(r!=null&&r.wordBoundary))},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:r==null?void 0:r.autoDetectSourceLanguage}}}};return Xa.SynthesisContext=t,Xa}var Za={},Xw;function hq(){if(Xw)return Za;Xw=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.SpeakerRecognitionConfig=void 0;const e=W();let t=class{constructor(r,i){this.privContext=r||new e.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Za.SpeakerRecognitionConfig=t,Za}var ec={},Zw;function fq(){if(Zw)return ec;Zw=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.SpeakerServiceRecognizer=void 0;const e=Qe(),t=Q(),n=O(),r=W(),i=dr;let o=class extends r.ServiceRecognizerBase{constructor(s,c,l,u,d){super(s,c,l,u,d),this.privSpeakerRecognizer=d,this.privSpeakerAudioSource=l,this.recognizeSpeaker=p=>this.recognizeSpeakerOnce(p),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(s){let c=!1;const l=new n.PropertyCollection;switch(s.messageType===t.MessageType.Text&&l.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.response":const d=JSON.parse(s.textBody);let p;d.status.statusCode.toLowerCase()!=="success"?p=new n.SpeakerRecognitionResult(d,n.ResultReason.Canceled,n.CancellationErrorCode.ServiceError,d.status.reason):p=new n.SpeakerRecognitionResult(d,n.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(p),c=!0;break}const u=new t.Deferred;return u.resolve(c),u.promise}cancelRecognition(s,c,l,u,d){if(new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]),this.privResultDeferral){const h=new n.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:d,reason:d}},n.ResultReason.Canceled,u,d);try{this.privResultDeferral.resolve(h)}catch(v){this.privResultDeferral.reject(v)}}}async recognizeSpeakerOnce(s){this.privSpeakerModel=s,this.voiceProfileType=s.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),l=this.sendPreAudioMessages(this.extractSpeakerContext(s)),u=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,p=await this.privSpeakerAudioSource.deviceInfo,h=new e.ReplayableAudioNode(u,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:p};try{await c,await l}catch(y){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,y)}const v=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,v),this.receiveMessage(),this.sendAudio(h).then(()=>{},y=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,y)}),this.privResultDeferral.promise}async sendPreAudioMessages(s){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,s)}async sendSpeakerRecognition(s,c){const l=JSON.stringify(c);return s.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",l))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}};return ec.SpeakerServiceRecognizer=o,ec}var tc={},eR;function vq(){if(eR)return tc;eR=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.VoiceServiceRecognizer=void 0;const e=Qe(),t=Q(),n=O(),r=W(),i=dr;let o=class extends r.ServiceRecognizerBase{constructor(s,c,l,u,d){super(s,c,l,u,d),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=l,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(s){this.privSpeakerAudioSource=s}processTypeSpecificMessages(s){let c=!1;const l=new n.PropertyCollection;switch(s.messageType===t.MessageType.Text&&l.setProperty(n.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speaker.profiles":const d=JSON.parse(s.textBody);switch(d.operation.toLowerCase()){case"create":this.handleCreateResponse(d,s.requestId);break;case"delete":case"reset":this.handleResultResponse(d,s.requestId);break;case"fetch":const g=JSON.parse(s.textBody);this.handleFetchResponse(g,s.requestId);break}c=!0;break;case"speaker.phrases":const p=JSON.parse(s.textBody);this.handlePhrasesResponse(p,s.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(s.textBody),v=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(s.requestId)&&this.privDeferralMap.complete(s.requestId,v),this.privRequestSession.onSpeechEnded(),c=!0;break}const u=new t.Deferred;return u.resolve(c),u.promise}cancelRecognition(s,c,l,u,d){new n.PropertyCollection().setProperty(r.CancellationErrorCodePropertyName,n.CancellationErrorCode[u]);const h=new n.VoiceProfileEnrollmentResult(n.ResultReason.Canceled,d,d);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(s,c){this.voiceProfileType=s.toString();const l=this.connectImpl();try{const u=new t.Deferred;return await l,await this.sendCreateProfile(u,s,c),this.receiveMessage(),u.promise}catch(u){throw u}}async resetProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("reset",s.profileType,s)}async deleteProfile(s){return this.voiceProfileType=s.profileType.toString(),this.sendCommonRequest("delete",s.profileType,s)}async retrieveEnrollmentResult(s){return this.voiceProfileType=s.profileType.toString(),this.privExpectedProfileId=s.profileId,this.sendCommonRequest("fetch",s.profileType,s)}async getAllProfiles(s){return this.voiceProfileType=s.toString(),this.sendCommonRequest("fetch",s)}async getActivationPhrases(s,c){this.voiceProfileType=s.toString();const l=this.connectImpl();try{const u=new t.Deferred;return await l,await this.sendPhrasesRequest(u,s,c),this.receiveMessage(),u.promise}catch(u){throw u}}async enrollProfile(s){this.voiceProfileType=s.profileType.toString();const c=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(n.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const l=this.connectImpl(),u=this.sendPreAudioMessages(s,c),d=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,v=new e.ReplayableAudioNode(d,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(v,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await l,await u}catch(f){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.ConnectionFailure,f)}const g=new n.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,g),this.receiveMessage(),this.sendAudio(v).then(()=>{},f=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,n.CancellationReason.Error,n.CancellationErrorCode.RuntimeError,f)}),c.promise}async sendPreAudioMessages(s,c){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(l,"enroll",this.scenarioFrom(s.profileType),s)}async sendPhrasesRequest(s,c,l){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const d=this.scenarioFrom(c),p={locale:l,scenario:d};return u.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}async sendCreateProfile(s,c,l){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,s);const d=c===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",p={locale:l,number:"1",scenario:d};return u.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}async sendCommonRequest(s,c,l=void 0){const u=this.connectImpl();try{const d=new t.Deferred;this.privRequestSession.onSpeechContext(),await u;const p=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,d),await this.sendBaseRequest(p,s,this.scenarioFrom(c),l),this.receiveMessage(),d.promise}catch(d){throw d}}async sendBaseRequest(s,c,l,u){const d={scenario:l};return u?d.profileIds=[u.profileId]:d.maxPageSize=-1,s.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}extractSpeakerContext(s){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:s.profileIds,scenario:s.scenario}}handlePhrasesResponse(s,c){if(this.privDeferralMap.getId(c))if(s.status.statusCode.toLowerCase()!=="success"){const l=n.ResultReason.Canceled,u=new n.VoiceProfilePhraseResult(l,s.status.statusCode,s.passPhraseType,[]);this.privDeferralMap.complete(c,u)}else if(s.phrases&&s.phrases.length>0){const l=n.ResultReason.EnrollingVoiceProfile,u=new n.VoiceProfilePhraseResult(l,s.status.statusCode,s.passPhraseType,s.phrases);this.privDeferralMap.complete(c,u)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(s,c){if(s.profiles&&s.profiles.length>0)if(this.privDeferralMap.getId(c)){const l=s.profiles.map(u=>u.profileId);this.privDeferralMap.complete(c,l)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(s,c){if(this.privDeferralMap.getId(c)){const l=s.operation.toLowerCase()==="delete"?n.ResultReason.DeletedVoiceProfile:n.ResultReason.ResetVoiceProfile,u=s.status.statusCode.toLowerCase()==="success"?l:n.ResultReason.Canceled,d=new n.VoiceProfileResult(u,`statusCode: ${s.status.statusCode}, errorDetails: ${s.status.reason}`);this.privDeferralMap.complete(c,d)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(s,c){if(this.privDeferralMap.getId(c)&&s.profiles[0]){if(this.privExpectedProfileId&&s.profiles.length===1&&s.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const l=s.profiles[0],u=new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(l.enrollmentStatus),JSON.stringify(l),s.status.reason);this.privDeferralMap.complete(c,u)}else if(s.profiles.length>0){const l=s.profiles,u=[];for(const d of l)u.push(new n.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(d.enrollmentStatus),JSON.stringify(d),s.status.reason));this.privDeferralMap.complete(c,u)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(s){switch(s.toLowerCase()){case"enrolled":return n.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return n.ResultReason.Canceled;default:return n.ResultReason.EnrollingVoiceProfile}}scenarioFrom(s){return s===n.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":s===n.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return tc.VoiceServiceRecognizer=o,tc}var cb={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(s){this.context=s}serialize(){return JSON.stringify(this,(s,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const l={};for(const u in c)Object.hasOwnProperty.call(c,u)&&(l[u&&u.charAt(0).toLowerCase()+u.substring(1)]=c[u]);return l}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(s){this.recognition=s.toLowerCase()}}e.SpeechServiceConfig=t;class n{constructor(s){this.system=new r,this.os=s}}e.Context=n;class r{constructor(){const s="1.44.1";this.name="SpeechSDK",this.version=s,this.build="JavaScript",this.lang="JavaScript"}}e.System=r;class i{constructor(s,c,l){this.platform=s,this.name=c,this.version=l}}e.OS=i;class o{constructor(s,c,l){this.manufacturer=s,this.model=c,this.version=l}}e.Device=o,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(e.type||(e.type={}))})(cb);var tR;function W(){return tR||(tR=1,function(e){var t=le&&le.__createBinding||(Object.create?function(o,a,s,c){c===void 0&&(c=s),Object.defineProperty(o,c,{enumerable:!0,get:function(){return a[s]}})}:function(o,a,s,c){c===void 0&&(c=s),o[c]=a[s]}),n=le&&le.__exportStar||function(o,a){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&t(a,o,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=e.SpeechSynthesisAdapter=e.AvatarSynthesisAdapter=void 0,n(kd,e),n(Yd,e),n(ns,e),n(W1,e),n(K1,e),n(r4(),e),n(i4(),e),n(Tp,e),n(o4(),e),n(s4(),e),n(a4(),e),n(GA,e),n(Ap,e),n(l4(),e),n(u4(),e),n(d4(),e),n(p4(),e),n(jA(),e),n(h4(),e),n(QA,e),n(f4(),e),n(bp,e),n(g4(),e),n(m4(),e),n(Ip,e),n(_p,e),n(kp,e),n(y4(),e),n(S4(),e),n(C4(),e),n(w4(),e),n(R4(),e),n(xp,e),n(E4(),e),n(Op,e),n(tb,e),n(Mp,e),n(Np,e),n(zp,e),n(L4(),e),n(Fp,e),n(nq(),e),n(Cm,e),n(sq(),e),n(aq(),e);var r=cq();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return r.AvatarSynthesisAdapter}});var i=lq();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),n(uq(),e),n(dq(),e),n(pq(),e),n(hq(),e),n(fq(),e),n(vq(),e),n(cb,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(kh)),kh}(function(e){var t=le&&le.__createBinding||(Object.create?function(i,o,a,s){s===void 0&&(s=a),Object.defineProperty(i,s,{enumerable:!0,get:function(){return o[a]}})}:function(i,o,a,s){s===void 0&&(s=a),i[s]=o[a]}),n=le&&le.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0});const r=W();new r.AgentConfig,n(O(),e)})(wr);async function gq(e,t){return console.log("Using Azure SDK for Khmer!"),console.log("Azure Key:","Present"),console.log("Azure Region:",t),new Promise((n,r)=>{try{console.log("Creating Azure Speech Config...");const i=wr.SpeechConfig.fromSubscription(e,t);i.speechRecognitionLanguage="km-KH",console.log("Speech Config created with language: km-KH"),console.log("Setting up audio input...");const o=wr.AudioConfig.fromDefaultMicrophoneInput();console.log("Audio config created"),console.log("Creating speech recognizer...");const a=new wr.SpeechRecognizer(i,o);console.log("Speech recognizer created, starting recognition..."),a.recognizeOnceAsync(s=>{if(s.reason===wr.ResultReason.RecognizedSpeech)console.log("✅ Azure SDK successfully recognized:",s.text),n(s.text);else if(s.reason===wr.ResultReason.NoMatch)console.log("❌ Azure SDK: No speech could be recognized"),r("No speech could be recognized.");else if(s.reason===wr.ResultReason.Canceled){const c=wr.CancellationDetails.fromResult(s);console.log("❌ Azure SDK: Recognition canceled:",c.reason),console.log("❌ Azure SDK: Error details:",c.errorDetails),r(c.errorDetails||"Recognition canceled.")}else console.log("❌ Azure SDK: Unknown recognition error"),r("Unknown recognition error.");a.close()})}catch(i){console.error("❌ Azure SDK Error:",i),r(i)}})}class mq{constructor(){Ie(this,"recognition",null);Ie(this,"synthesis");Ie(this,"azureTTS");Ie(this,"azureSTT");Ie(this,"isInitialized",!1);Ie(this,"isListening",!1);Ie(this,"stream",null);Ie(this,"currentLanguage","km");Ie(this,"useAzureTTS",!0);Ie(this,"useAzureSTT",!0);console.log("Initializing VoiceService..."),this.synthesis=window.speechSynthesis;const t={subscriptionKey:"7HLAZANAipaqqPHTy3U5J6sh098NEo9gRUIktmr4eZkmVmokeljyJQQJ99BFACGhslBXJ3w3AAAYACOGE3WN",region:"centralindia",voiceName:"km-KH-PisethNeural"};this.azureTTS=new Fj(t);const n={subscriptionKey:"7HLAZANAipaqqPHTy3U5J6sh098NEo9gRUIktmr4eZkmVmokeljyJQQJ99BFACGhslBXJ3w3AAAYACOGE3WN",region:"centralindia",language:"km-KH"};this.azureSTT=new Bj(n)}setLanguage(t){this.currentLanguage=t,this.recognition&&(this.recognition.lang=t==="km"?"km-KH":"en-US"),this.azureSTT.setLanguage(t==="km"?"km-KH":"en-US")}setUseAzureTTS(t){this.useAzureTTS=t}setUseAzureSTT(t){this.useAzureSTT=t}async checkLanguageSupport(){try{const t=/iPad|iPhone|iPod/.test(navigator.userAgent),n=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),r=t&&n;console.log("=== Language Support Check ==="),console.log("Browser:",navigator.userAgent),console.log("iOS Safari:",r),r&&(console.warn("⚠️  iOS Safari Limitations:"),console.warn("- Limited support for non-Latin scripts like Khmer"),console.warn("- Speech recognition may not work properly for Khmer"),console.warn("- Consider using Chrome or Firefox on iOS"),console.warn("- Or use a desktop browser for better Khmer support"));const i=window.SpeechRecognition||window.webkitSpeechRecognition;if(i){const o=new i;o.lang="km-KH",console.log("✅ Speech recognition available"),console.log("✅ Khmer language code supported:",o.lang)}else console.error("❌ Speech recognition not available");if(window.speechSynthesis){const a=window.speechSynthesis.getVoices().filter(s=>s.lang.startsWith("km"));console.log("✅ Speech synthesis available"),console.log("✅ Khmer voices found:",a.length),a.length>0&&a.forEach(s=>console.log(`  - ${s.name} (${s.lang})`))}else console.error("❌ Speech synthesis not available");console.log("=== End Language Support Check ===")}catch(t){console.error("Error checking language support:",t)}}async initialize(){try{if(console.log("Initializing VoiceService..."),typeof window>"u"||!window.navigator)throw new Error("Browser environment not detected");if(await this.checkLanguageSupport(),this.stopListening(),this.stopSpeaking(),!this.isInitialized){const t=window.SpeechRecognition||window.webkitSpeechRecognition;t?(this.recognition=new t,this.setupRecognitionConfig(),console.log("Speech recognition configured")):console.warn("Speech recognition not supported in this browser"),window.speechSynthesis?(this.synthesis=window.speechSynthesis,await this.loadVoices()):console.warn("Speech synthesis not supported in this browser"),this.isInitialized=!0,console.log("VoiceService initialization complete")}}catch(t){throw console.error("Error during initialization:",t),t}}setupRecognitionConfig(){if(!this.recognition)return;const t=/iPad|iPhone|iPod/.test(navigator.userAgent),n=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),r=t&&n;this.recognition.continuous=!0,this.recognition.interimResults=!0,this.recognition.maxAlternatives=1,r&&this.currentLanguage==="km"?(console.warn("iOS Safari detected - Khmer recognition may be limited"),this.recognition.lang="km-KH"):this.recognition.lang=this.currentLanguage==="km"?"km-KH":"en-US",console.log("Speech recognition configured for language:",this.recognition.lang),console.log("iOS Safari:",r)}cleanTranscript(t){if(this.currentLanguage!=="km")return t;const n=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","may","might","can","must","shall","this","that","these","those","i","you","he","she","it","we","they","me","him","her","us","them","my","your","his","her","its","our","their"];let r=t;return n.forEach(i=>{const o=new RegExp(`\\b${i}\\b`,"gi");r=r.replace(o,"")}),r=r.replace(/\s+/g," ").trim(),console.log(`Cleaned transcript: "${t}" -> "${r}"`),r}async loadVoices(){return new Promise(t=>{let n=speechSynthesis.getVoices();if(n.length>0){console.log("Voices already loaded:",n.length),t();return}const r=()=>{n=speechSynthesis.getVoices(),console.log("Voices loaded:",n.length),speechSynthesis.removeEventListener("voiceschanged",r),t()};speechSynthesis.addEventListener("voiceschanged",r),setTimeout(()=>{speechSynthesis.removeEventListener("voiceschanged",r),console.log("Voice loading timeout, continuing with available voices"),t()},3e3)})}getBrowserRecommendations(){const t=[],n=/iPad|iPhone|iPod/.test(navigator.userAgent),r=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent);return n&&r?(t.push("⚠️ iOS Safari has limited support for Khmer speech recognition"),t.push("💡 Try using Chrome or Firefox on iOS for better Khmer support"),t.push("💡 Or use a desktop browser (Chrome, Firefox, Edge)"),t.push("💡 Make sure you're speaking clearly and slowly")):n?t.push("✅ iOS detected - try using Chrome or Firefox for better Khmer support"):t.push("✅ Desktop browser detected - should work well with Khmer"),location.protocol!=="https:"&&location.hostname!=="localhost"&&t.push("🔒 HTTPS is required for microphone access"),t}startListening(){return new Promise(async(t,n)=>{try{const r=/iPad|iPhone|iPod/.test(navigator.userAgent),i=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),o=r&&i,a=window.SpeechRecognition||window.webkitSpeechRecognition;if(console.log("[VoiceService] startListening called. isIOS:",r,"isSafari:",i,"lang:",this.currentLanguage),this.currentLanguage==="km"){console.log("[VoiceService] Khmer: Using Azure SDK for Khmer on all platforms");try{const l=await gq("7HLAZANAipaqqPHTy3U5J6sh098NEo9gRUIktmr4eZkmVmokeljyJQQJ99BFACGhslBXJ3w3AAAYACOGE3WN","centralindia");t(l);return}catch(s){console.error("[VoiceService] Azure SDK Khmer STT failed:",s),n(s);return}}if(this.currentLanguage==="en"&&a){console.log("[VoiceService] English: Using browser SpeechRecognition"),this.stopListening(),this.recognition=new a,this.setupRecognitionConfig(),this.recognition.lang="en-US";let s="",c=!1,l=null;this.recognition.onresult=u=>{c=!0,s=u.results[0][0].transcript,console.log("[VoiceService] English transcript:",s),l&&clearTimeout(l),l=setTimeout(()=>{this.recognition&&this.recognition.stop()},3e3)},this.recognition.onend=()=>{l&&clearTimeout(l),s?t(s):n(new Error("No speech detected. Please try speaking again."))},this.recognition.onerror=u=>{n(new Error(`Speech recognition error: ${u.error}`))};try{this.recognition.start()}catch(u){n(u)}return}if(a){console.log("[VoiceService] Non-iOS or iOS non-Safari: Using browser SpeechRecognition"),this.stopListening(),this.recognition=new a,this.setupRecognitionConfig(),this.recognition.lang=this.currentLanguage==="km"?"km-KH":"en-US";let s="",c="",l=!1,u=null,d=null,p=!1;const h=()=>{u&&clearTimeout(u),u=setTimeout(()=>{this.recognition&&!p&&(console.log("Silence detected, stopping recognition"),this.recognition.stop())},3500)};this.recognition.onstart=()=>{l=!1,s="",c="",p=!1,h(),setTimeout(()=>{this.recognition&&!p&&this.recognition.stop()},15e3)},this.recognition.onresult=v=>{l=!0,c="",h();for(let g=0;g<v.results.length;g++){const y=v.results[g],f=y[0].transcript.trim();y.isFinal?(p=!0,s=this.cleanTranscript(f),d&&clearTimeout(d),d=setTimeout(()=>{this.recognition&&this.recognition.stop()},2e3)):c=this.cleanTranscript(f)}},this.recognition.onend=()=>{u&&clearTimeout(u),d&&clearTimeout(d),s?t(s):c?t(c):n(l?new Error("No speech detected. Please try speaking again."):new Error("No speech detected. Please try speaking again."))},this.recognition.onerror=v=>{n(new Error(`Speech recognition error: ${v.error}`))};try{this.recognition.start()}catch(v){n(v)}return}n(new Error("Speech recognition not supported"))}catch(r){n(r)}})}stopListening(){try{this.azureSTT.stopRecording(),this.recognition&&(this.recognition.onend=null,this.recognition.onresult=null,this.recognition.onerror=null,this.recognition.onstart=null,this.recognition.stop())}catch(t){console.warn("Error stopping recognition:",t)}}async speak(t){return new Promise(async(n,r)=>{try{if(console.log("[VoiceService] Starting speak with text:",t),console.log("[VoiceService] Current language:",this.currentLanguage),this.stopSpeaking(),this.currentLanguage==="km")try{await this.azureTTS.speak(t,this.currentLanguage),n();return}catch(s){console.error("[VoiceService] Azure TTS failed:",s),r(s);return}if(!this.synthesis)return console.log("Speech synthesis not available"),n();const i=new SpeechSynthesisUtterance(t);i.lang="en-US",i.rate=1,i.pitch=1,i.volume=1;const a=speechSynthesis.getVoices().find(s=>s.lang.startsWith("en"));a&&(i.voice=a),i.onend=()=>{console.log("Speech completed"),n()},i.onerror=s=>{if(s.error==="not-allowed"){console.log("Speech synthesis blocked"),n();return}console.error("Speech error:",s.error),n()},this.synthesis.speak(i)}catch(i){console.error("Speech error:",i),r(i)}})}stopSpeaking(){console.log("Stopping speech"),this.synthesis&&this.synthesis.cancel(),this.azureTTS.stopSpeaking()}cleanup(){console.log("Cleaning up resources..."),this.stopListening(),this.stopSpeaking(),this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null),this.azureTTS.cleanup(),this.azureSTT.cleanup(),this.isListening=!1,console.log("Cleanup complete")}isSupported(){try{const t=!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia),n=!!(window.SpeechRecognition||window.webkitSpeechRecognition),r=!!window.speechSynthesis,i=/iPad|iPhone|iPod/.test(navigator.userAgent),o=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),a=i&&o;return console.log("Browser support check:"),console.log("- MediaDevices API:",t),console.log("- Speech Recognition:",n),console.log("- Speech Synthesis:",r),console.log("- iOS Safari:",a),console.log("- User Agent:",navigator.userAgent),a&&this.currentLanguage==="km"&&(console.warn("iOS Safari has limited support for Khmer speech recognition"),console.warn("Consider using Chrome or Firefox on iOS for better Khmer support")),t&&n}catch(t){return console.error("Error checking browser support:",t),!1}}reset(){console.log("Resetting voice service..."),this.stopSpeaking(),this.recognition&&(this.recognition.onend=null,this.recognition.onresult=null,this.recognition.onerror=null,this.recognition.onstart=null,this.recognition.stop(),this.recognition=null),this.isInitialized=!1,this.initialize()}}const yq=[{language:"en",label:"English",flag:"🇺🇸"},{language:"km",label:"ខ្មែរ",flag:"🇰🇭"}],Sq=({currentLanguage:e,onLanguageChange:t})=>P.jsx("div",{className:"flex gap-2",children:yq.map(n=>P.jsxs(zr,{variant:e===n.language?"default":"outline",size:"sm",onClick:()=>t(n.language),className:"flex items-center gap-2",children:[P.jsx("span",{children:n.flag}),P.jsx("span",{children:n.label})]},n.language))}),Cq=e=>({en:[{id:"1",type:"text",question:"What is your name?",required:!0},{id:"2",type:"single-select",question:"How would you rate your overall experience with our service?",options:[{value:1,name:"Excellent"},{value:2,name:"Good"},{value:3,name:"Average"},{value:4,name:"Poor"},{value:5,name:"Very Poor"}],required:!0},{id:"3",type:"single-select",question:"How satisfied are you with our customer service?",options:[{value:1,name:"Very Dissatisfied"},{value:2,name:"Dissatisfied"},{value:3,name:"Neutral"},{value:4,name:"Satisfied"},{value:5,name:"Very Satisfied"}],required:!0},{id:"4_1",type:"single-select",question:"Do you find Customer Support valuable?",options:[{value:1,name:"Yes"},{value:0,name:"No"}],required:!0},{id:"4_2",type:"single-select",question:"Do you find Easy to Use valuable?",options:[{value:1,name:"Yes"},{value:0,name:"No"}],required:!0},{id:"4_3",type:"single-select",question:"Do you find Good Value valuable?",options:[{value:1,name:"Yes"},{value:0,name:"No"}],required:!0},{id:"4_4",type:"single-select",question:"Do you find Fast Delivery valuable?",options:[{value:1,name:"Yes"},{value:0,name:"No"}],required:!0},{id:"4_5",type:"single-select",question:"Do you find Quality Products valuable?",options:[{value:1,name:"Yes"},{value:0,name:"No"}],required:!0},{id:"5",type:"text",question:"What could we do to improve our service?",required:!1},{id:"6",type:"single-select",question:"How did you hear about us?",options:[{value:1,name:"Social Media"},{value:2,name:"Friend Referral"},{value:3,name:"Search Engine"},{value:4,name:"Advertisement"},{value:5,name:"Other"}],required:!0}],km:[{id:"1",type:"text",question:"តើអ្នកមានឈ្មោះអ្វី?",required:!0},{id:"2",type:"single-select",question:"តើអ្នកធ្វើការវាយតម្លៃដូចម្តេចចំពោះបទពិសោធន៍រួមជាមួយសេវាកម្មរបស់យើង?",options:[{value:1,name:"ល្អបំផុត"},{value:2,name:"ល្អ"},{value:3,name:"មធ្យម"},{value:4,name:"អន់"},{value:5,name:"អន់ខ្លាំង"}],required:!0},{id:"3",type:"single-select",question:"តើអ្នកពេញចិត្តជាមួយសេវាអតិថិជនរបស់យើងយ៉ាងដូចម្តេច?",options:[{value:1,name:"មិនពេញចិត្តខ្លាំង"},{value:2,name:"មិនពេញចិត្ត"},{value:3,name:"មធ្យម"},{value:4,name:"ពេញចិត្ត"},{value:5,name:"ពេញចិត្តខ្លាំង"}],required:!0},{id:"4_1",type:"single-select",question:"តើអ្នកគិតថាសេវាផ្តល់ជំនួយអតិថិជនមានតម្លៃឬទេ?",options:[{value:1,name:"បាទ/ចាស"},{value:0,name:"ទេ"}],required:!0},{id:"4_2",type:"single-select",question:"តើអ្នកគិតថាការប្រើប្រាស់ងាយស្រួលមានតម្លៃឬទេ?",options:[{value:1,name:"បាទ/ចាស"},{value:0,name:"ទេ"}],required:!0},{id:"4_3",type:"single-select",question:"តើអ្នកគិតថាតម្លៃល្អមានតម្លៃឬទេ?",options:[{value:1,name:"បាទ/ចាស"},{value:0,name:"ទេ"}],required:!0},{id:"4_4",type:"single-select",question:"តើអ្នកគិតថាការដឹកជញ្ជូនលឿនមានតម្លៃឬទេ?",options:[{value:1,name:"បាទ/ចាស"},{value:0,name:"ទេ"}],required:!0},{id:"4_5",type:"single-select",question:"តើអ្នកគិតថាផលិតផលដែលមានគុណភាពមានតម្លៃឬទេ?",options:[{value:1,name:"បាទ/ចាស"},{value:0,name:"ទេ"}],required:!0},{id:"5",type:"text",question:"តើយើងអាចធ្វើអ្វីដើម្បីធ្វើឲ្យសេវាកម្មរបស់យើងប្រសើរឡើង?",required:!1},{id:"6",type:"single-select",question:"តើអ្នកបានដឹងអំពីយើងដោយរបៀបណា?",options:[{value:1,name:"បណ្តាញសង្គម"},{value:2,name:"មិត្តភក្តិណែនាំ"},{value:3,name:"ម៉ាស៊ីនស្វែងរក"},{value:4,name:"ពាណិជ្ជកម្ម"},{value:5,name:"ផ្សេងទៀត"}],required:!0}]})[e],nR={API_BASE_URL:"https://voicesurveybackend.edashboard.in"},wq=({onStartNewSurvey:e})=>P.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:P.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-8 text-center",children:P.jsxs("div",{className:"mb-6",children:[P.jsx(Yk,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),P.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Thank You!"}),P.jsx("p",{className:"text-gray-600 mb-6",children:"Your feedback has been successfully submitted. We appreciate your time and valuable input."}),P.jsx("div",{className:"h-2 bg-green-100 rounded-full mb-6",children:P.jsx("div",{className:"h-2 bg-green-500 rounded-full w-full animate-pulse"})}),P.jsx(zr,{onClick:e,className:"bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors",children:"Start New Survey"})]})})});function Rq(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}const Pq=()=>{const[e,t]=w.useState("km"),[n,r]=w.useState(0),[i,o]=w.useState(()=>{const q=localStorage.getItem("surveyAnswers");return q?JSON.parse(q):[]}),[a,s]=w.useState(!1),[c,l]=w.useState(!1),[u]=w.useState(()=>new mq),[d,p]=w.useState(!0),[h,v]=w.useState(!0),{toast:g}=bE(),[y,f]=w.useState(!1),[m,S]=w.useState(null),C=w.useRef(null),[R,T]=w.useState(!1),A=w.useRef(!1),[E,k]=w.useState(!1),[_,N]=w.useState(!1),[B,$]=w.useState(!1),j=Cq(e),L=j[n],V=(n+1)/j.length*100,Y=n===j.length-1,b=n===0;w.useEffect(()=>{localStorage.setItem("surveyAnswers",JSON.stringify(i))},[i]),w.useEffect(()=>((async()=>{try{await u.initialize(),u.setLanguage(e);const z=u.isSupported();v(z),p(z),z||g({title:"Voice Features Not Available",description:"Please ensure you've granted microphone permissions and are using a supported browser (Chrome or Safari).",variant:"default",duration:6e3}),N(!0)}catch(z){console.error("Error initializing voice service:",z),v(!1),p(!1),N(!0)}})(),()=>{u.stopListening(),u.stopSpeaking(),u.reset()}),[]),w.useEffect(()=>{_&&u.setLanguage(e)},[e,_]),w.useEffect(()=>{if(!_){console.log("Waiting for voice service initialization...");return}console.log("Question changed to:",n);let q=!0;return(async()=>{try{if(console.log("Stopping all voice activities..."),u.stopListening(),u.stopSpeaking(),u.reset(),s(!1),l(!1),k(!1),C.current&&(console.log("Clearing existing timeout from ref"),clearTimeout(C.current),C.current=null),m&&(console.log("Clearing existing timeout from state"),clearTimeout(m),S(null)),await new Promise(J=>setTimeout(J,250)),!q||(A.current=!1,T(!1),!q||!h))return;d&&L&&(console.log("Starting to read question:",n,"navigationRef:",A.current),await U())}catch(J){console.error("Error in setupQuestion:",J)}})(),()=>{q=!1,C.current&&(clearTimeout(C.current),C.current=null),m&&(clearTimeout(m),S(null)),k(!1),u.stopListening(),u.stopSpeaking(),u.reset()}},[n,d,_,e]),w.useEffect(()=>{localStorage.getItem("startTime")||localStorage.setItem("startTime",new Date().toISOString())},[]),w.useEffect(()=>{const q=()=>{localStorage.removeItem("surveyAnswers"),localStorage.removeItem("unique_id"),localStorage.removeItem("startTime"),o([]),r(0)},J=new URLSearchParams(window.location.search).get("q");if(!J)q();else{const ee=parseInt(J)-1;!isNaN(ee)&&ee>=0&&ee<j.length&&r(ee)}},[]);const D=()=>{const q=new Date(localStorage.getItem("startTime")||new Date().toISOString()).getTime();return Math.floor((Date.now()-q)/1e3)},K=async()=>{try{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?(await navigator.mediaDevices.getUserMedia({audio:!0}),$(!0),console.log("[VoiceSurvey] Microphone permission granted")):($(!1),console.warn("[VoiceSurvey] getUserMedia not supported"))}catch(q){$(!1),console.warn("[VoiceSurvey] Microphone permission denied",q)}};w.useEffect(()=>{const q=()=>{K(),window.removeEventListener("click",q),window.removeEventListener("touchstart",q)};return window.addEventListener("click",q),window.addEventListener("touchstart",q),()=>{window.removeEventListener("click",q),window.removeEventListener("touchstart",q)}},[]);const U=async(q=!1)=>{if(d){if(console.log("Reading question. navigationRef:",A.current,"manual:",q),!q&&A.current){console.log("Navigation flag is true before reading, skipping...");return}C.current&&(clearTimeout(C.current),C.current=null),m&&(clearTimeout(m),S(null)),l(!0),k(!1);try{let z=L.question;if((L.type==="single-select"||L.type==="multi-select")&&L.options&&(e==="en"?(z+=". Your options are: ",z+=L.options.map(ee=>ee.name).join(", "),L.type==="multi-select"&&(z+='. You can select multiple options by saying them separated by "and".')):(z+=". ជម្រើសរបស់អ្នកគឺ: ",z+=L.options.map(ee=>ee.name).join(", "),L.type==="multi-select"&&(z+='. អ្នកអាចជ្រើសរើសជម្រើសច្រើនដោយនិយាយពួកវាដោយបំបែកដោយ "និង".'))),L.type==="rating"&&(e==="en"?z+=". Please rate from 1 to 10, where 1 is not likely and 10 is very likely.":z+=". សូមវាយតម្លៃពី 1 ដល់ 10 ដែល 1 គឺមិនទំនងនិង 10 គឺទំនងខ្លាំង."),await u.speak(z),!q&&A.current){console.log("Navigation occurred during speech, skipping auto-record"),k(!1);return}if(console.log("Finished speaking. navigationRef:",A.current),console.log("Setting up auto-record"),k(!0),g({title:e==="en"?"Get Ready":"រួចរាល់",description:e==="en"?"Recording will start in a moment...":"ការថតសំឡេងនឹងចាប់ផ្តើមបន្តិចទៀត...",duration:1e3}),q&&!B){try{await K(),B||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?setTimeout(()=>{k(!1),oe()},500):k(!1)}catch{k(!1)}return}if(B){const ee=setTimeout(()=>{console.log("Auto-record timeout triggered. navigationRef:",A.current),d?(console.log("Starting auto-record"),k(!1),oe()):(console.log("Auto-record cancelled. Voice disabled"),k(!1))},1500);C.current=ee,S(ee)}else k(!1)}catch(z){console.error("Speech error:",z),k(!1)}finally{l(!1)}}},G=q=>{var J,ee;if(!L.options)return q;if(L.type==="rating"){const ge=q.toLowerCase().trim(),ve={one:"1",first:"1",two:"2",second:"2",three:"3",third:"3",four:"4",fourth:"4",five:"5",fifth:"5",six:"6",sixth:"6",seven:"7",seventh:"7",eight:"8",eighth:"8",nine:"9",ninth:"9",ten:"10",tenth:"10",មួយ:"1",ពីរ:"2",បី:"3",បួន:"4",ប្រាំ:"5",ប្រាំមួយ:"6",ប្រាំពីរ:"7",ប្រាំបី:"8",ប្រាំបួន:"9",ដប់:"10"};for(const[We,$e]of Object.entries(ve))if(ge.includes(We))return $e;const Re=ge.match(/\b(\d+)\b/);if(Re){const We=parseInt(Re[1]);if(We>=1&&We<=10)return We.toString()}return q}const z=q.toLowerCase().trim();if(L.type==="multi-select"&&L.options){const ge=z.split(/\s+និង\s+|\s+and\s+|\s*,\s*/),ve=[];return ge.forEach(Re=>{var pn;const We=Re.trim(),$e=(pn=L.options)==null?void 0:pn.find(fr=>fr.name.toLowerCase()===We||fr.name.toLowerCase().includes(We)||We.includes(fr.name.toLowerCase()));$e&&!ve.includes($e.name)&&ve.push($e.name)}),ve.length>0?ve.join(","):q}if(L.type==="single-select"&&L.options){const ge=L.options.find(Re=>Re.name.toLowerCase()===z);if(ge)return ge.name;const ve=L.options.find(Re=>Re.name.toLowerCase().includes(z)||z.includes(Re.name.toLowerCase()));if(ve)return ve.name;if(L.options.length===2){const Re=["បាទ","ចាស","yes","yeah","yep"],We=["ទេ","no","nope"];if(Re.some($e=>z.includes($e.toLowerCase())))return((J=L.options.find($e=>$e.value===1))==null?void 0:J.name)||q;if(We.some($e=>z.includes($e.toLowerCase())))return((ee=L.options.find($e=>$e.value===0))==null?void 0:ee.name)||q}}return q},oe=async()=>{if(console.log("[VoiceSurvey] startVoiceRecording called"),!d){console.log("[VoiceSurvey] Voice features are disabled"),g({title:e==="en"?"Voice Features Disabled":"មុខងារសំឡេងត្រូវបានបិទ",description:e==="en"?"Please enable voice features to use voice recording.":"សូមបើកមុខងារសំឡេងដើម្បីប្រើការថតសំឡេង។",variant:"destructive"});return}if(!h){console.log("[VoiceSurvey] Voice is not supported in this browser"),g({title:e==="en"?"Browser Support Issue":"បញ្ហាការគាំទ្រអ្នករុករក",description:e==="en"?"Please ensure you've granted microphone permissions and are using a supported browser.":"សូមធានាថាអ្នកបានផ្តល់ការអនុញ្ញាតមីក្រូហ្វូននិងប្រើអ្នករុករកដែលគាំទ្រ។",variant:"destructive"});return}if(a||c||E){console.log(`[VoiceSurvey] Not starting recording: isListening=${a}, isSpeaking=${c}, isWaitingToRecord=${E}`);return}try{s(!0),console.log("[VoiceSurvey] Calling voiceService.startListening()");const q=await u.startListening();if(console.log("[VoiceSurvey] voiceService.startListening result:",q),q){const z=G(q);console.log("[VoiceSurvey] Matched answer:",z),he(z);let J=!1;L.type==="single-select"&&L.options?J=L.options.some(ee=>ee.name===z):L.type==="multi-select"&&L.options?J=z.split(",").map(ge=>ge.trim()).some(ge=>{var ve;return(ve=L.options)==null?void 0:ve.some(Re=>Re.name===ge)}):L.type==="text"&&(J=z.trim()!==""),console.log("[VoiceSurvey] isValidAnswer:",J),J?g({title:e==="en"?"Voice Recorded":"សំឡេងត្រូវបានថត",description:e==="en"?"Your response has been captured successfully.":"ការឆ្លើយតបរបស់អ្នកត្រូវបានចាប់យកដោយជោគជ័យ។"}):L.type!=="text"&&g({title:e==="en"?"No Valid Option Selected":"គ្មានជម្រើសត្រឹមត្រូវត្រូវបានជ្រើសរើស",description:e==="en"?"Please try again with one of the available options.":"សូមព្យាយាមម្តងទៀតជាមួយជម្រើសដែលមាន។",variant:"destructive"})}else console.log("[VoiceSurvey] No result returned from voiceService.startListening")}catch(q){console.error("[VoiceSurvey] Error recording voice:",q);let z=e==="en"?"Could not record your voice. Please try again.":"មិនអាចថតសំឡេងរបស់អ្នកបានទេ។ សូមព្យាយាមម្តងទៀត។";if(q instanceof Error){const J=q.message.toLowerCase();if(J.includes("reset called")){console.log("[VoiceSurvey] Reset called during recording");return}J.includes("permission")||J.includes("denied")?z=e==="en"?"Microphone access was denied. Please check your browser settings and make sure microphone permissions are enabled.":"ការចូលប្រើមីក្រូហ្វូនត្រូវបានបដិសេធ។ សូមពិនិត្យការកំណត់អ្នករុករករបស់អ្នកនិងធានាថាការអនុញ្ញាតមីក្រូហ្វូនត្រូវបានបើក។":J.includes("not found")||J.includes("no microphone")?z=e==="en"?"No microphone found. Please check your device settings and ensure a microphone is available.":"រកមិនឃើញមីក្រូហ្វូនទេ។ សូមពិនិត្យការកំណត់ឧបករណ៍របស់អ្នកនិងធានាថាមីក្រូហ្វូនមាន។":J.includes("not supported")||J.includes("mimetype")?z=e==="en"?"Your browser doesn't support the required audio format. Please try using Chrome or Firefox.":"អ្នករុករករបស់អ្នកមិនគាំទ្រទម្រង់អូឌីដែលត្រូវការទេ។ សូមព្យាយាមប្រើ Chrome ឬ Firefox។":J.includes("in use")||J.includes("already")?z=e==="en"?"Microphone is being used by another application. Please close other apps that might be using the microphone.":"មីក្រូហ្វូនកំពុងត្រូវបានប្រើដោយកម្មវិធីផ្សេងទៀត។ សូមបិទកម្មវិធីផ្សេងទៀតដែលអាចប្រើមីក្រូហ្វូន។":J.includes("secure")||J.includes("ssl")?z=e==="en"?"Voice recording requires a secure connection. Please ensure you're using HTTPS.":"ការថតសំឡេងត្រូវការការតភ្ជាប់ដែលមានសុវត្ថិភាព។ សូមធានាថាអ្នកកំពុងប្រើ HTTPS។":J.includes("timeout")?z=e==="en"?"Recording timed out. Please try speaking more quickly after pressing the record button.":"ការថតផុតកំណត់ពេលវេលា។ សូមព្យាយាមនិយាយលឿនជាងបន្ទាប់ពីចុចប៊ូតុងថត។":J.includes("network")&&(z=e==="en"?"A network error occurred. Please check your internet connection.":"កំហុសបណ្តាញបានកើតឡើង។ សូមពិនិត្យការតភ្ជាប់អ៊ីនធឺណិតរបស់អ្នក។")}Rq()&&(z="Voice recording is limited on iPhone/iPad browsers. Please use the keyboard if voice does not work, or try updating your iOS version."),g({title:e==="en"?"Recording Error":"កំហុសការថត",description:z,variant:"destructive",duration:6e3})}finally{s(!1),k(!1),console.log("[VoiceSurvey] Recording finished (finally block)")}},Se=()=>{u.stopListening(),s(!1)},Ye=()=>{p(!d),c&&(u.stopSpeaking(),l(!1)),a&&Se()},he=q=>{A.current=!0,T(!0);const z=i.findIndex(ee=>ee.questionId===L.id),J={questionId:L.id,answer:q};if(z>=0){const ee=[...i];ee[z]=J,o(ee)}else o([...i,J])},Xe=()=>{var q;return((q=i.find(z=>z.questionId===L.id))==null?void 0:q.answer)||""},jt=()=>{var z;const q=Xe();return L.required?L.type==="multi-select"?q.trim()!==""&&q.split(",").some(J=>J.trim()!==""):L.type==="single-select"?!!((z=L.options)==null?void 0:z.find(ee=>ee.name===q.trim())):q.trim()!=="":!0};function Lt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,q=>{const z=Math.random()*16|0;return(q==="x"?z:z&3|8).toString(16)})}const Ft=q=>{console.log("Formatting answers:",q);const z={};return q.forEach(J=>{var ge;if(!J.answer.trim())return;const ee=j.find(ve=>ve.id===J.questionId);if(ee)if(ee.type==="multi-select"){const ve=J.answer.split(",").map(Re=>Re.trim()).filter(Re=>Re);(ge=ee.options)==null||ge.forEach(Re=>{const We=`q${ee.id}_${Re.value}`;z[We]=ve.includes(Re.name)?1:0})}else if(ee.options){const ve=ee.options.find(Re=>Re.name===J.answer.trim());ve&&(z[`q${ee.id}`]=ve.value)}else z[`q${ee.id}`]=J.answer.trim()}),console.log("Formatted responses:",z),z},pr=async()=>{const q=Ft(i);console.log("Current answers state:",i);const z={unique_id:localStorage.getItem("unique_id")||Lt(),sys_start_time:localStorage.getItem("startTime")||new Date().toISOString(),sys_end_time:new Date().toISOString(),sys_device:navigator.userAgent,survey_status:"incomplete",elapsed_time:D(),language:e,...q};console.log("Saving incomplete response payload:",z),localStorage.getItem("unique_id")||localStorage.setItem("unique_id",z.unique_id);try{const ee=await(await fetch(`${nR.API_BASE_URL}/api/survey/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();console.log("Response from server for incomplete save:",ee)}catch(J){console.error("Error saving incomplete survey:",J)}},_n=()=>{f(!1),r(0),o([]),localStorage.clear()},dn=async()=>{if(console.log("Submitting answers:",i),j.filter(ge=>ge.required).filter(ge=>!i.find(ve=>ve.questionId===ge.id&&ve.answer.trim())).length>0){g({title:e==="en"?"Required Questions":"សំណួរដែលត្រូវការ",description:e==="en"?"Please answer all required questions before submitting.":"សូមឆ្លើយសំណួរដែលត្រូវការទាំងអស់មុនពេលដាក់ស្នើ។",variant:"destructive"});return}const z=Ft(i),J=localStorage.getItem("startTime")||new Date().toISOString(),ee={unique_id:localStorage.getItem("unique_id")||Lt(),sys_start_time:J,sys_end_time:new Date().toISOString(),sys_device:navigator.userAgent,survey_status:"completed",elapsed_time:D(),language:e,...z};console.log("Submitting payload:",ee);try{const ge=await fetch(`${nR.API_BASE_URL}/api/survey/save`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(ee)});if(!ge.ok)throw new Error(`HTTP error! status: ${ge.status}`);const ve=await ge.json();console.log("Server response:",ve),localStorage.clear(),o([]),f(!0),g({title:e==="en"?"Survey Completed":"ការស្ទង់មតិបានបញ្ចប់",description:e==="en"?"Thank you for your responses! Your feedback has been saved.":"សូមអរគុណសម្រាប់ការឆ្លើយតបរបស់អ្នក! ការអត្ថាធិប្បាយរបស់អ្នកត្រូវបានរក្សាទុក។"})}catch(ge){console.error("Error saving survey:",ge),g({title:e==="en"?"Error":"កំហុស",description:e==="en"?"There was an error saving your responses. Please try again.":"មានកំហុសក្នុងការរក្សាទុកការឆ្លើយតបរបស់អ្នក។ សូមព្យាយាមម្តងទៀត។",variant:"destructive"})}},Vn=()=>{if(!jt()){g({title:e==="en"?"Required Field":"វាលដែលត្រូវការ",description:e==="en"?"Please provide an answer before proceeding.":"សូមផ្តល់ចម្លើយមុនពេលបន្ត។",variant:"destructive"});return}console.log("Next clicked. Setting navigation flags"),A.current=!0,T(!0),k(!1),C.current&&(console.log("Clearing timeout from ref in handleNext"),clearTimeout(C.current),C.current=null),m&&(console.log("Clearing timeout from state in handleNext"),clearTimeout(m),S(null)),u.stopListening(),u.stopSpeaking(),u.reset(),s(!1),l(!1),pr(),setTimeout(()=>{Y?dn():r(n+1)},100)},hr=()=>{b||(console.log("Previous clicked. Setting navigation flags"),A.current=!0,T(!0),k(!1),C.current&&(console.log("Clearing timeout from ref in handlePrevious"),clearTimeout(C.current),C.current=null),m&&(console.log("Clearing timeout from state in handlePrevious"),clearTimeout(m),S(null)),u.stopListening(),u.stopSpeaking(),u.reset(),s(!1),l(!1),setTimeout(()=>{r(n-1)},100))},Xt=()=>{Xe()&&(u.stopSpeaking(),l(!1))},li=q=>{A.current=!1,T(!1),C.current&&(clearTimeout(C.current),C.current=null),m&&(clearTimeout(m),S(null)),u.stopListening(),u.stopSpeaking(),u.reset(),s(!1),l(!1),k(!1),t(q),r(0),o([])};return y?P.jsx(wq,{onStartNewSurvey:_n}):P.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[P.jsx("div",{className:"fixed left-4 top-4 z-10",children:P.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-8 md:h-12 w-auto"})}),P.jsxs("div",{className:"max-w-2xl mx-auto",children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("div",{className:"h-12 md:h-16"})," ",P.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:e==="en"?"Voice Survey":"ស្ទង់មតិដោយសំឡេង"}),P.jsx("p",{className:"text-gray-600",children:e==="en"?"Answer questions using your voice or keyboard":"សូមឆ្លើយសំណួរដោយប្រើសំឡេងឬក្តារចុច"})]}),P.jsx("div",{className:"flex justify-center mb-6",children:P.jsx(Sq,{currentLanguage:e,onLanguageChange:li})}),P.jsxs("div",{className:"mb-8",children:[P.jsxs("div",{className:"flex justify-between items-center mb-2",children:[P.jsxs("span",{className:"text-sm text-gray-600",children:[e==="en"?"Question":"សំណួរ"," ",n+1," ",e==="en"?"of":"ក្នុងចំណោម"," ",j.length]}),P.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(V),"%"," ",e==="en"?"Complete":"បញ្ចប់"]})]}),P.jsx(cT,{value:V,className:"h-2"})]}),P.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[P.jsxs(zr,{variant:d?"default":"outline",size:"sm",onClick:Ye,className:"flex items-center gap-2",children:[d?P.jsx(Ly,{size:16}):P.jsx(tx,{size:16}),e==="en"?"Voice":"សំឡេង"," ",d?e==="en"?"On":"បើក":e==="en"?"Off":"បិទ"]}),P.jsxs(zr,{variant:"outline",size:"sm",onClick:()=>U(!0),disabled:!d||c,className:"flex items-center gap-2",children:[P.jsx(Ly,{size:16}),c?e==="en"?"Reading...":"កំពុងអាន...":e==="en"?"Read Question":"អានសំណួរ"]})]}),P.jsx(nT,{className:"p-6 mb-8 shadow-lg",children:P.jsx(lz,{question:L,answer:Xe(),onAnswerChange:he,isListening:a,onStartRecording:oe,onStopRecording:Se,voiceEnabled:d,isSpeaking:c,onStopSpeaking:Xt,isWaitingToRecord:E,language:e})}),P.jsxs("div",{className:"flex justify-between",children:[P.jsxs(zr,{variant:"outline",onClick:hr,disabled:b,className:"flex items-center gap-2",children:[P.jsx(Jk,{size:16}),e==="en"?"Previous":"មុន"]}),P.jsxs(zr,{onClick:Vn,disabled:!jt(),className:"flex items-center gap-2",children:[Y?e==="en"?"Submit":"ដាក់ស្នើ":e==="en"?"Next":"បន្ទាប់",P.jsx(Gk,{size:16})]})]})]})]})},Eq=()=>{const e=tT();return w.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),P.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:P.jsxs("div",{className:"text-center",children:[P.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),P.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),P.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},Tq=new dD,Aq=()=>P.jsx(hD,{client:Tq,children:P.jsxs(UM,{children:[P.jsx(Lx,{}),P.jsx(hO,{}),P.jsx(YD,{children:P.jsxs(JD,{children:[P.jsx(ov,{path:"/",element:P.jsx(Pq,{})}),P.jsx(ov,{path:"*",element:P.jsx(Eq,{})})]})})]})});AE(document.getElementById("root")).render(P.jsx(Aq,{}));
